{"ast":null,"code":"import API from \"../../../api\";\nimport ENDPOINTS from \"../../../../../configs/apiendpoints\";\nimport { sha256 } from 'js-sha256';\nexport default class SubmitSearchRequest extends API {\n  constructor(type = 'parallel-corpus', tgt = [], src = null, domain = [], collectionMethod = [], timeout = 2000) {\n    super(\"POST\", timeout, false);\n    this.tgt = tgt;\n    this.src = src;\n    this.domain = domain;\n    this.collectionMethod = collectionMethod;\n    this.datasetType = type;\n    this.endpoint = `${super.apiEndPointAuto()}${ENDPOINTS.submitSearchReq}`;\n    this.userDetails = JSON.parse(localStorage.getItem('userInfo'));\n  }\n\n  apiEndPoint() {\n    return this.endpoint;\n  }\n\n  getBody() {\n    return {\n      datasetType: this.datasetType,\n      criteria: {\n        sourceLanguage: this.src !== null ? [this.src] : this.tgt,\n        targetLanguage: this.src === null ? null : this.tgt,\n        domain: this.domain && this.domain.length > 0 ? this.domain : null,\n        collectionMethod: this.collectionMethod && this.collectionMethod.length > 0 ? this.collectionMethod : null\n      } // groupby: []\n\n    };\n  }\n\n  getHeaders() {\n    let urlSha = sha256(JSON.stringify(this.getBody()));\n    this.headers = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"key\": this.userDetails.publicKey,\n        \"sig\": sha256(this.userDetails.privateKey + \"|\" + urlSha),\n        \"userId\": JSON.parse(localStorage.getItem('userDetails')).userID\n      }\n    };\n    return this.headers;\n  }\n\n  getPayload() {\n    return this.credentials;\n  }\n\n}","map":{"version":3,"sources":["/home/sajish/Documents/Sajish/ULCA/ULCA/frontend/webapp/src/redux/actions/api/DataSet/DatasetSearch/SubmitSearchRequest.js"],"names":["API","ENDPOINTS","sha256","SubmitSearchRequest","constructor","type","tgt","src","domain","collectionMethod","timeout","datasetType","endpoint","apiEndPointAuto","submitSearchReq","userDetails","JSON","parse","localStorage","getItem","apiEndPoint","getBody","criteria","sourceLanguage","targetLanguage","length","getHeaders","urlSha","stringify","headers","publicKey","privateKey","userID","getPayload","credentials"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,cAAhB;AACA,OAAOC,SAAP,MAAsB,qCAAtB;AACA,SAASC,MAAT,QAAuB,WAAvB;AAEA,eAAe,MAAMC,mBAAN,SAAkCH,GAAlC,CAAsC;AACjDI,EAAAA,WAAW,CAACC,IAAI,GAAG,iBAAR,EAA2BC,GAAG,GAAG,EAAjC,EAAqCC,GAAG,GAAG,IAA3C,EAAiDC,MAAM,GAAG,EAA1D,EAA8DC,gBAAgB,GAAG,EAAjF,EAAqFC,OAAO,GAAG,IAA/F,EAAqG;AAC5G,UAAM,MAAN,EAAcA,OAAd,EAAuB,KAAvB;AACA,SAAKJ,GAAL,GAAWA,GAAX;AACA,SAAKC,GAAL,GAAWA,GAAX;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKC,gBAAL,GAAwBA,gBAAxB;AACA,SAAKE,WAAL,GAAmBN,IAAnB;AACA,SAAKO,QAAL,GAAiB,GAAE,MAAMC,eAAN,EAAwB,GAAEZ,SAAS,CAACa,eAAgB,EAAvE;AACA,SAAKC,WAAL,GAAmBC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CAAnB;AAEH;;AAGDC,EAAAA,WAAW,GAAG;AACV,WAAO,KAAKR,QAAZ;AACH;;AAEDS,EAAAA,OAAO,GAAG;AACN,WAAO;AACHV,MAAAA,WAAW,EAAE,KAAKA,WADf;AAEHW,MAAAA,QAAQ,EAAE;AACNC,QAAAA,cAAc,EAAE,KAAKhB,GAAL,KAAa,IAAb,GAAoB,CAAC,KAAKA,GAAN,CAApB,GAAiC,KAAKD,GADhD;AAENkB,QAAAA,cAAc,EAAE,KAAKjB,GAAL,KAAa,IAAb,GAAoB,IAApB,GAA2B,KAAKD,GAF1C;AAGNE,QAAAA,MAAM,EAAE,KAAKA,MAAL,IAAe,KAAKA,MAAL,CAAYiB,MAAZ,GAAmB,CAAlC,GAAsC,KAAKjB,MAA3C,GAAoD,IAHtD;AAINC,QAAAA,gBAAgB,EAAE,KAAKA,gBAAL,IAAyB,KAAKA,gBAAL,CAAsBgB,MAAtB,GAA6B,CAAtD,GAA0D,KAAKhB,gBAA/D,GAAkF;AAJ9F,OAFP,CAQH;;AARG,KAAP;AAUH;;AAEDiB,EAAAA,UAAU,GAAG;AACb,QAAIC,MAAM,GAAGzB,MAAM,CAACc,IAAI,CAACY,SAAL,CAAe,KAAKP,OAAL,EAAf,CAAD,CAAnB;AACA,SAAKQ,OAAL,GAAe;AACbA,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEP,eAAO,KAAKd,WAAL,CAAiBe,SAFjB;AAGP,eAAS5B,MAAM,CAAC,KAAKa,WAAL,CAAiBgB,UAAjB,GAA4B,GAA5B,GAAgCJ,MAAjC,CAHR;AAIP,kBAAUX,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAX,EAAgDa;AAJnD;AADI,KAAf;AAQA,WAAO,KAAKH,OAAZ;AACD;;AAECI,EAAAA,UAAU,GAAG;AACT,WAAO,KAAKC,WAAZ;AACH;;AA9CgD","sourcesContent":["import API from \"../../../api\";\nimport ENDPOINTS from \"../../../../../configs/apiendpoints\";\nimport { sha256 } from 'js-sha256';\n\nexport default class SubmitSearchRequest extends API {\n    constructor(type = 'parallel-corpus', tgt = [], src = null, domain = [], collectionMethod = [], timeout = 2000) {\n        super(\"POST\", timeout, false);\n        this.tgt = tgt\n        this.src = src\n        this.domain = domain\n        this.collectionMethod = collectionMethod\n        this.datasetType = type\n        this.endpoint = `${super.apiEndPointAuto()}${ENDPOINTS.submitSearchReq}`;\n        this.userDetails = JSON.parse(localStorage.getItem('userInfo'))\n      \n    }\n\n\n    apiEndPoint() {\n        return this.endpoint;\n    }\n\n    getBody() {\n        return {\n            datasetType: this.datasetType,\n            criteria: {\n                sourceLanguage: this.src !== null ? [this.src] : this.tgt,\n                targetLanguage: this.src === null ? null : this.tgt,\n                domain: this.domain && this.domain.length>0 ? this.domain : null,\n                collectionMethod: this.collectionMethod && this.collectionMethod.length>0 ? this.collectionMethod : null\n            },\n            // groupby: []\n        }\n    }\n\n    getHeaders() {\n    let urlSha = sha256(JSON.stringify(this.getBody()))\n    this.headers = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"key\" :this.userDetails.publicKey,\n        \"sig\"  : sha256(this.userDetails.privateKey+\"|\"+urlSha),\n        \"userId\": JSON.parse(localStorage.getItem('userDetails')).userID\n      }\n    };\n    return this.headers;\n  }\n\n    getPayload() {\n        return this.credentials;\n    }\n}\n"]},"metadata":{},"sourceType":"module"}