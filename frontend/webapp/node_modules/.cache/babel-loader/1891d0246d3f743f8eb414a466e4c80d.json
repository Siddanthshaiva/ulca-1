{"ast":null,"code":"var _jsxFileName = \"/home/sajish/Documents/Sajish/ULCA/ULCA/frontend/webapp/src/ui/container/Dashboard/ChartRender.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { withStyles, Typography, MuiThemeProvider, Paper, Button } from \"@material-ui/core\";\nimport ChartStyles from \"../../styles/Dashboard\";\nimport { ResponsiveContainer, BarChart, Bar, Cell, CartesianGrid, XAxis, Label, LabelList, YAxis, Tooltip } from 'recharts';\nimport Select from 'react-select';\nimport APITransport from \"../../../redux/actions/apitransport/apitransport\";\nimport FetchLanguageDataSets from \"../../../redux/actions/api/Dashboard/languageDatasets\";\nimport { isMobile } from 'react-device-detect';\nimport { ArrowBack } from '@material-ui/icons';\nimport Header from '../../components/common/Header';\nimport Dataset from \"../../../configs/DatasetItems\";\nimport authenticate from '../../../configs/authenticate';\nimport Theme from \"../../theme/theme-default\";\nimport TitleBar from \"./TitleBar\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar colors = [\"188efc\", \"7a47a4\", \"b93e94\", \"1fc6a4\", \"f46154\", \"d088fd\", \"f3447d\", \"188efc\", \"f48734\", \"189ac9\", \"0e67bd\"];\n\nconst ChartRender = props => {\n  _s();\n\n  const [selectedOption, setSelectedOption] = useState(Dataset[0]);\n  const [title, setTitle] = useState(\"Number of parallel dataset per language with English\");\n  const [filterValue, setFilterValue] = useState(\"domains\");\n  const [selectedLanguage, setSelectedLanguage] = useState(\"\");\n  const [selectedLanguageName, setSelectedLanguageName] = useState(\"\");\n  const [page, setPage] = useState(0);\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const DashboardReport = useSelector(state => state.dashboardReport);\n  const {\n    classes\n  } = props;\n  const options = Dataset;\n  useEffect(() => {\n    fetchChartData(selectedOption.value, \"languagePairs\", []);\n\n    if (authenticate()) {\n      history.push(`${process.env.PUBLIC_URL}/private-dashboard`);\n    } else {\n      localStorage.clear();\n      history.push(`${process.env.PUBLIC_URL}/dashboard`);\n    }\n  }, []);\n\n  const fetchChartData = (dataType, value, criterions) => {\n    const userObj = new FetchLanguageDataSets(dataType, value, criterions);\n    dispatch(APITransport(userObj));\n  };\n\n  const customStyles = {\n    option: (provided, state) => ({ ...provided,\n      borderColor: \"green\",\n      color: 'black',\n      padding: 20,\n      background: state.isSelected && \"#c7c6c68a !important\",\n      cursor: \"pointer\",\n      fontFamily: \"Lato, sans-serif \"\n    }),\n    control: (base, state) => ({ ...base,\n      // This line disable the blue border\n      borderColor: \"#392C71\",\n      border: \"1px solid rgba(57, 44, 113, 0.5)\",\n      boxShadow: state.isFocused ? 0 : 0,\n      fontFamily: \"Lato, sans-serif \",\n      cursor: \"pointer\"\n    })\n  };\n\n  const fetchParams = event => {\n    var sourceLanguage = \"\";\n    let targetLanguage = \"\";\n\n    if (selectedOption.value === \"parallel-corpus\") {\n      sourceLanguage = {\n        \"type\": \"PARAMS\",\n        \"value\": \"en\"\n      };\n      targetLanguage = {\n        \"type\": \"PARAMS\",\n        \"value\": selectedLanguage ? selectedLanguage : event && event.hasOwnProperty(\"_id\") && event._id\n      };\n    } else {\n      sourceLanguage = {\n        \"type\": \"PARAMS\",\n        \"value\": selectedLanguage ? selectedLanguage : event && event.hasOwnProperty(\"_id\") && event._id\n      };\n      targetLanguage = {\n        \"type\": \"PARAMS\",\n        \"value\": \"\"\n      };\n    }\n\n    setSelectedLanguage(selectedLanguage ? selectedLanguage : event && event.hasOwnProperty(\"_id\") && event._id);\n    setSelectedLanguageName(selectedLanguageName ? selectedLanguageName : event && event.hasOwnProperty(\"label\") && event.label);\n    return [{\n      \"type\": \"PARAMS\",\n      \"sourceLanguage\": sourceLanguage,\n      \"targetLanguage\": targetLanguage\n    }];\n  };\n\n  const fetchNextParams = eventValue => {\n    var sourceLanguage = \"\";\n    let targetLanguage = \"\";\n    let event = {\n      \"type\": \"PARAMS\",\n      \"value\": eventValue && eventValue.hasOwnProperty(\"_id\") && eventValue._id\n    };\n\n    if (selectedOption.value === \"parallel-corpus\") {\n      sourceLanguage = {\n        \"type\": \"PARAMS\",\n        \"value\": \"en\"\n      };\n      targetLanguage = {\n        \"type\": \"PARAMS\",\n        \"value\": selectedLanguage\n      };\n    } else {\n      sourceLanguage = {\n        \"type\": \"PARAMS\",\n        \"value\": selectedLanguage\n      };\n      targetLanguage = {\n        \"type\": \"PARAMS\",\n        \"value\": \"\"\n      };\n    }\n\n    setSelectedLanguage(selectedLanguage ? selectedLanguage : event && event.hasOwnProperty(\"_id\") && event._id);\n    setSelectedLanguageName(selectedLanguageName ? selectedLanguageName : event && event.hasOwnProperty(\"label\") && event.label);\n    return [{\n      \"type\": \"PARAMS\",\n      \"sourceLanguage\": sourceLanguage,\n      \"targetLanguage\": targetLanguage\n    }, event];\n  };\n\n  const handleOnClick = (value, event, filter) => {\n    switch (value) {\n      case 1:\n        // fetchChartData(selectedOption.value, filter ? filter : filterValue, [{ \"type\": \"PARAMS\", \"sourceLanguage\": { \"type\": \"PARAMS\", \"value\": \"en\" }, \"targetLanguage\": { \"type\": \"PARAMS\", \"value\": selectedLanguage ? selectedLanguage : (event && event.hasOwnProperty(\"_id\")) ? event._id : \"\" } }])\n        fetchChartData(selectedOption.value, filter ? filter : filterValue, fetchParams(event));\n        handleSelectChange(selectedOption, event, filter, value);\n        setPage(value);\n        break;\n\n      case 2:\n        fetchChartData(selectedOption.value, filterValue === \"collectionMethod_collectionDescriptions\" ? \"domains\" : \"collectionMethod_collectionDescriptions\", fetchNextParams(event));\n        setPage(value);\n        setFilterValue('domains');\n        handleSelectChange(selectedOption, event, filter, value);\n        break;\n\n      case 0:\n        fetchChartData(selectedOption.value, \"languagePairs\", []);\n        setPage(value);\n        setFilterValue('domains');\n        handleSelectChange(selectedOption, \"\", \"\", value);\n        setSelectedLanguage(\"\");\n        setSelectedLanguageName(\"\");\n        break;\n\n      default:\n    }\n  };\n\n  const handleLanguageChange = value => {\n    setFilterValue(value);\n    setTitle(`English-${selectedLanguageName}  ${selectedOption.value}- Grouped by ${value === \"domains\" ? \"Domain\" : value === \"source\" ? \"Source\" : value === \"collectionMethod_collectionDescriptions\" ? \"Collection Method\" : \"Domain\"}`);\n    handleOnClick(1, \"\", value);\n  };\n\n  const handleCardNavigation = () => {\n    handleOnClick(page - 1);\n  };\n\n  const fetchFilterButtons = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.filterButton,\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        color: filterValue === \"domains\" ? \"primary\" : \"default\",\n        size: \"small\",\n        variant: \"outlined\",\n        className: classes.backButton,\n        onClick: () => handleLanguageChange(\"domains\"),\n        children: \"Domain\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        color: filterValue === \"collectionMethod_collectionDescriptions\" ? \"primary\" : \"default\",\n        size: \"small\",\n        variant: \"outlined\",\n        onClick: () => handleLanguageChange(\"collectionMethod_collectionDescriptions\"),\n        children: \"Collection Method\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 4\n    }, this);\n  };\n\n  const handleSelectChange = (dataSet, event, filter, page) => {\n    debugger;\n    console.log(selectedOption, dataSet);\n    setSelectedOption(dataSet);\n\n    switch (dataSet.value) {\n      case 'parallel-corpus':\n        if (page === 0) {\n          setTitle(\"Number of parallel sentences per language with English\");\n          selectedOption.value !== dataSet.value && fetchChartData(dataSet.value, \"languagePairs\", []);\n        } else if (page === 1) {\n          setTitle(`English-${selectedLanguageName ? selectedLanguageName : event && event.hasOwnProperty(\"label\") && event.label}  ${selectedOption.label} - Grouped by ${filter === \"domains\" ? \"Domain\" : filter === \"source\" ? \"Source\" : filter === \"collectionMethod_collectionDescriptions\" ? \"Collection Method\" : \"Domain\"}`);\n        } else if (page === 2) {\n          setTitle(`English-${selectedLanguageName} ${selectedOption.label} `);\n        }\n\n        break;\n\n      case 'monolingual-corpus':\n        if (page === 0) {\n          selectedOption.value !== dataSet.value && fetchChartData(dataSet.value, \"languagePairs\", []);\n          setTitle('Number of sentences per language');\n        } else if (page === 1) {\n          setTitle(`Number of sentences in ${selectedLanguageName ? selectedLanguageName : event && event.hasOwnProperty(\"label\") && event.label} - Grouped by ${filter === \"domains\" ? \"Domain\" : filter === \"source\" ? \"Source\" : filter === \"collectionMethod_collectionDescriptions\" ? \"Collection Method\" : \"Domain\"}`);\n        } else if (page === 2) {\n          setTitle(`Number of sentences in ${selectedLanguageName} `);\n        }\n\n        break;\n\n      case 'asr-corpus':\n        if (page === 0) {\n          selectedOption.value !== dataSet.value && fetchChartData(dataSet.value, \"languagePairs\", []);\n          setTitle(\"Number of audio hours per language\");\n        } else if (page === 1) {\n          setTitle(`Number of audio hours in ${selectedLanguageName ? selectedLanguageName : event && event.hasOwnProperty(\"label\") && event.label} - Grouped by ${filter === \"domains\" ? \"Domain\" : filter === \"source\" ? \"Source\" : filter === \"collectionMethod_collectionDescriptions\" ? \"Collection Method\" : \"Domain\"}`);\n        } else if (page === 2) {\n          setTitle(`Number of audio hours in ${selectedLanguageName} `);\n        }\n\n        break;\n\n      case 'ocr-corpus':\n        if (page === 0) {\n          selectedOption.value !== dataSet.value && fetchChartData(dataSet.value, \"languagePairs\", []);\n          setTitle(\"Number of images per script\");\n        } else if (page === 1) {\n          setTitle(`Number of images per script in ${selectedLanguageName ? selectedLanguageName : event && event.hasOwnProperty(\"label\") && event.label} - Grouped by ${filter === \"domains\" ? \"Domain\" : filter === \"source\" ? \"Source\" : filter === \"collectionMethod_collectionDescriptions\" ? \"Collection Method\" : \"Domain\"}`);\n        } else if (page === 2) {\n          setTitle(`Number of images per script in ${selectedLanguageName} `);\n        }\n\n        break;\n\n      default:\n        setTitle(\"\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(MuiThemeProvider, {\n    theme: Theme,\n    children: [!authenticate() && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        style: {\n          marginBottom: \"10px\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 50\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 56\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 62\n      }, this)]\n    }, void 0, true), /*#__PURE__*/_jsxDEV(TitleBar, {\n      selectedOption: selectedOption,\n      handleSelectChange: handleSelectChange,\n      options: options,\n      isDisabled: page !== 0 ? true : false,\n      page: page,\n      children: page === 1 && fetchFilterButtons()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.container,\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        elevation: 3,\n        className: classes.paper,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.titleBar,\n          children: [/*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              size: \"small\",\n              variant: \"contained\",\n              disabled: page !== 0 ? false : true,\n              startIcon: /*#__PURE__*/_jsxDEV(ArrowBack, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 100\n              }, this),\n              onClick: () => handleCardNavigation(),\n              children: \"Back\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.seperator\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true), /*#__PURE__*/_jsxDEV(Typography, {\n            value: \"\",\n            variant: \"h6\",\n            children: [\" \", title, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.title,\n          children: /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n            width: \"95%\",\n            height: 550,\n            children: /*#__PURE__*/_jsxDEV(BarChart, {\n              width: 900,\n              height: 350,\n              data: DashboardReport,\n              fontSize: \"14px\",\n              fontFamily: \"Lato\",\n              maxBarSize: 100,\n              children: [/*#__PURE__*/_jsxDEV(XAxis, {\n                dataKey: \"label\" // textAnchor\t=\t{isMobile ? \"end\" : \"middle\"}\n                // tick\t\t=\t{{ angle: isMobile ? -60 : 0 }} \n                // height\t\t=\t{isMobile ? 100 : 60}\n                ,\n                textAnchor: \"end\",\n                tick: {\n                  angle: -30,\n                  marginTop: \"8px\"\n                },\n                height: 130,\n                interval: 0,\n                position: \"insideLeft\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(YAxis, {\n                padding: {\n                  top: 10\n                },\n                tickInterval: 10,\n                allowDecimals: false,\n                type: \"number\",\n                dx: 0,\n                tickFormatter: value => new Intl.NumberFormat('en', {\n                  notation: \"compact\"\n                }).format(value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                fontFamily: \"Lato\",\n                formatter: value => new Intl.NumberFormat('en').format(value),\n                cursor: {\n                  fill: 'none'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(Bar, {\n                margin: {\n                  top: 40,\n                  left: 20,\n                  right: 20,\n                  bottom: 20\n                },\n                dataKey: \"value\",\n                cursor: \"pointer\",\n                radius: [8, 8, 0, 0],\n                maxBarSize: 65,\n                onClick: event => {\n                  handleOnClick(page + 1, event);\n                },\n                children: [/*#__PURE__*/_jsxDEV(LabelList, {\n                  formatter: value => new Intl.NumberFormat('en').format(value),\n                  cursor: {\n                    fill: 'none'\n                  },\n                  position: \"top\",\n                  dataKey: \"value\",\n                  fill: \"black\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 279,\n                  columnNumber: 10\n                }, this), DashboardReport.length > 0 && DashboardReport.map((entry, index) => {\n                  const color = colors[index < 9 ? index : index % 10];\n                  return /*#__PURE__*/_jsxDEV(Cell, {\n                    fill: `#${color}`\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 289,\n                    columnNumber: 19\n                  }, this);\n                })]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 223,\n    columnNumber: 3\n  }, this);\n};\n\n_s(ChartRender, \"VYF6UMxXCGrtxjNbAaKBV4IiVnk=\", false, function () {\n  return [useHistory, useDispatch, useSelector];\n});\n\n_c = ChartRender;\nexport default withStyles(ChartStyles(Theme))(ChartRender);\n\nvar _c;\n\n$RefreshReg$(_c, \"ChartRender\");","map":{"version":3,"sources":["/home/sajish/Documents/Sajish/ULCA/ULCA/frontend/webapp/src/ui/container/Dashboard/ChartRender.jsx"],"names":["React","useEffect","useState","useDispatch","useSelector","useHistory","useParams","withStyles","Typography","MuiThemeProvider","Paper","Button","ChartStyles","ResponsiveContainer","BarChart","Bar","Cell","CartesianGrid","XAxis","Label","LabelList","YAxis","Tooltip","Select","APITransport","FetchLanguageDataSets","isMobile","ArrowBack","Header","Dataset","authenticate","Theme","TitleBar","colors","ChartRender","props","selectedOption","setSelectedOption","title","setTitle","filterValue","setFilterValue","selectedLanguage","setSelectedLanguage","selectedLanguageName","setSelectedLanguageName","page","setPage","history","dispatch","DashboardReport","state","dashboardReport","classes","options","fetchChartData","value","push","process","env","PUBLIC_URL","localStorage","clear","dataType","criterions","userObj","customStyles","option","provided","borderColor","color","padding","background","isSelected","cursor","fontFamily","control","base","border","boxShadow","isFocused","fetchParams","event","sourceLanguage","targetLanguage","hasOwnProperty","_id","label","fetchNextParams","eventValue","handleOnClick","filter","handleSelectChange","handleLanguageChange","handleCardNavigation","fetchFilterButtons","filterButton","backButton","dataSet","console","log","marginBottom","container","paper","titleBar","seperator","angle","marginTop","top","Intl","NumberFormat","notation","format","fill","left","right","bottom","length","map","entry","index"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { withStyles, Typography, MuiThemeProvider, Paper, Button } from \"@material-ui/core\";\r\nimport ChartStyles from \"../../styles/Dashboard\";\r\nimport { ResponsiveContainer, BarChart, Bar, Cell, CartesianGrid, XAxis, Label, LabelList, YAxis, Tooltip, } from 'recharts';\r\nimport Select from 'react-select';\r\nimport APITransport from \"../../../redux/actions/apitransport/apitransport\";\r\nimport FetchLanguageDataSets from \"../../../redux/actions/api/Dashboard/languageDatasets\";\r\nimport { isMobile } from 'react-device-detect';\r\nimport { ArrowBack } from '@material-ui/icons';\r\nimport Header from '../../components/common/Header';\r\nimport Dataset from \"../../../configs/DatasetItems\";\r\nimport authenticate from '../../../configs/authenticate';\r\nimport Theme from \"../../theme/theme-default\";\r\nimport TitleBar from \"./TitleBar\";\r\nvar colors = [\"188efc\", \"7a47a4\", \"b93e94\", \"1fc6a4\", \"f46154\", \"d088fd\", \"f3447d\", \"188efc\", \"f48734\", \"189ac9\", \"0e67bd\"]\r\n\r\n\r\nconst ChartRender = (props) => {\r\n\tconst [selectedOption, setSelectedOption] = useState(Dataset[0]);\r\n\tconst [title, setTitle] = useState(\"Number of parallel dataset per language with English\");\r\n\tconst [filterValue, setFilterValue] = useState(\"domains\");\r\n\tconst [selectedLanguage, setSelectedLanguage] = useState(\"\");\r\n\tconst [selectedLanguageName, setSelectedLanguageName] = useState(\"\");\r\n\tconst [page, setPage] = useState(0);\r\n\tconst history = useHistory();\r\n\tconst dispatch = useDispatch();\r\n\tconst DashboardReport = useSelector((state) => state.dashboardReport);\r\n\tconst { classes } = props;\r\n\tconst options = Dataset;\r\n\tuseEffect(() => {\r\n\t\tfetchChartData(selectedOption.value, \"languagePairs\", [])\r\n\t\tif (authenticate()) {\r\n\t\t\thistory.push(`${process.env.PUBLIC_URL}/private-dashboard`)\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlocalStorage.clear()\r\n\t\t\thistory.push(`${process.env.PUBLIC_URL}/dashboard`)\r\n\r\n\t\t}\r\n\t}, []);\r\n\r\n\tconst fetchChartData = (dataType, value, criterions) => {\r\n\t\tconst userObj = new FetchLanguageDataSets(dataType, value, criterions);\r\n\t\tdispatch(APITransport(userObj));\r\n\r\n\t}\r\n\r\n\tconst customStyles = {\r\n\t\toption: (provided, state) => ({\r\n\t\t\t...provided,\r\n\t\t\tborderColor: \"green\",\r\n\t\t\tcolor: 'black',\r\n\t\t\tpadding: 20,\r\n\t\t\tbackground: state.isSelected && \"#c7c6c68a !important\",\r\n\t\t\tcursor: \"pointer\",\r\n\t\t\tfontFamily: \"Lato, sans-serif \",\r\n\r\n\t\t}),\r\n\t\tcontrol: (base, state) => ({\r\n\t\t\t...base,\r\n\t\t\t// This line disable the blue border\r\n\t\t\tborderColor: \"#392C71\",\r\n\t\t\tborder: \"1px solid rgba(57, 44, 113, 0.5)\",\r\n\t\t\tboxShadow: state.isFocused ? 0 : 0,\r\n\t\t\tfontFamily: \"Lato, sans-serif \",\r\n\t\t\tcursor: \"pointer\"\r\n\t\t})\r\n\t}\r\n\r\n\tconst fetchParams = (event) => {\r\n\t\tvar sourceLanguage = \"\"\r\n\t\tlet targetLanguage = \"\"\r\n\t\tif (selectedOption.value === \"parallel-corpus\") {\r\n\t\t\tsourceLanguage = { \"type\": \"PARAMS\", \"value\": \"en\" };\r\n\t\t\ttargetLanguage = { \"type\": \"PARAMS\", \"value\": (selectedLanguage ? selectedLanguage : event && event.hasOwnProperty(\"_id\") && event._id) }\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsourceLanguage = { \"type\": \"PARAMS\", \"value\": (selectedLanguage ? selectedLanguage : event && event.hasOwnProperty(\"_id\") && event._id) };\r\n\t\t\ttargetLanguage = { \"type\": \"PARAMS\", \"value\": \"\" };\r\n\r\n\t\t}\r\n\t\tsetSelectedLanguage(selectedLanguage ? selectedLanguage : event && event.hasOwnProperty(\"_id\") && event._id)\r\n\t\tsetSelectedLanguageName(selectedLanguageName ? selectedLanguageName : event && event.hasOwnProperty(\"label\") && event.label)\r\n\t\treturn ([{ \"type\": \"PARAMS\", \"sourceLanguage\": sourceLanguage, \"targetLanguage\": targetLanguage }])\r\n\t}\r\n\r\n\tconst fetchNextParams = (eventValue) => {\r\n\t\tvar sourceLanguage = \"\"\r\n\t\tlet targetLanguage = \"\"\r\n\t\tlet event = { \"type\": \"PARAMS\", \"value\": eventValue && eventValue.hasOwnProperty(\"_id\") && eventValue._id }\r\n\t\tif (selectedOption.value === \"parallel-corpus\") {\r\n\t\t\tsourceLanguage = { \"type\": \"PARAMS\", \"value\": \"en\" };\r\n\t\t\ttargetLanguage = { \"type\": \"PARAMS\", \"value\": selectedLanguage }\r\n\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsourceLanguage = { \"type\": \"PARAMS\", \"value\": selectedLanguage };\r\n\t\t\ttargetLanguage = { \"type\": \"PARAMS\", \"value\": \"\" };\r\n\r\n\t\t}\r\n\t\tsetSelectedLanguage(selectedLanguage ? selectedLanguage : event && event.hasOwnProperty(\"_id\") && event._id)\r\n\t\tsetSelectedLanguageName(selectedLanguageName ? selectedLanguageName : event && event.hasOwnProperty(\"label\") && event.label)\r\n\t\treturn ([{ \"type\": \"PARAMS\", \"sourceLanguage\": sourceLanguage, \"targetLanguage\": targetLanguage }, event])\r\n\t}\r\n\r\n\tconst handleOnClick = (value, event, filter) => {\r\n\r\n\t\tswitch (value) {\r\n\t\t\tcase 1:\r\n\t\t\t\t// fetchChartData(selectedOption.value, filter ? filter : filterValue, [{ \"type\": \"PARAMS\", \"sourceLanguage\": { \"type\": \"PARAMS\", \"value\": \"en\" }, \"targetLanguage\": { \"type\": \"PARAMS\", \"value\": selectedLanguage ? selectedLanguage : (event && event.hasOwnProperty(\"_id\")) ? event._id : \"\" } }])\r\n\r\n\t\t\t\tfetchChartData(selectedOption.value, filter ? filter : filterValue, fetchParams(event))\r\n\t\t\t\thandleSelectChange(selectedOption, event, filter, value)\r\n\t\t\t\tsetPage(value)\r\n\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tfetchChartData(selectedOption.value, filterValue === \"collectionMethod_collectionDescriptions\" ? \"domains\" : \"collectionMethod_collectionDescriptions\", fetchNextParams(event))\r\n\t\t\t\tsetPage(value)\r\n\t\t\t\tsetFilterValue('domains')\r\n\t\t\t\thandleSelectChange(selectedOption, event, filter, value)\r\n\r\n\t\t\t\tbreak;\r\n\t\t\tcase 0:\r\n\t\t\t\tfetchChartData(selectedOption.value, \"languagePairs\", [])\r\n\t\t\t\tsetPage(value)\r\n\t\t\t\tsetFilterValue('domains')\r\n\t\t\t\thandleSelectChange(selectedOption, \"\", \"\", value)\r\n\t\t\t\tsetSelectedLanguage(\"\")\r\n\t\t\t\tsetSelectedLanguageName(\"\")\r\n\r\n\r\n\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tconst handleLanguageChange = (value) => {\r\n\t\tsetFilterValue(value)\r\n\t\tsetTitle(`English-${selectedLanguageName}  ${selectedOption.value}- Grouped by ${(value === \"domains\") ? \"Domain\" : (value === \"source\") ? \"Source\" : value === \"collectionMethod_collectionDescriptions\" ? \"Collection Method\" : \"Domain\"}`)\r\n\t\thandleOnClick(1, \"\", value)\r\n\t}\r\n\tconst handleCardNavigation = () => {\r\n\r\n\t\thandleOnClick(page - 1)\r\n\t}\r\n\r\n\tconst fetchFilterButtons = () => {\r\n\t\treturn (\r\n\t\t\t<div className={classes.filterButton}>\r\n\t\t\t\t<Button color={filterValue === \"domains\" ? \"primary\" : \"default\"}  size=\"small\" variant=\"outlined\" className={classes.backButton} onClick={() => handleLanguageChange(\"domains\")}>Domain</Button>\r\n\t\t\t\t{/* <Button  color={filterValue === \"source\" ? \"primary\":\"default\"} style={ filterValue === \"source\" ? {backgroundColor: \"#E8F5F8\"} : {} }size=\"medium\" variant=\"outlined\" className={classes.backButton} onClick={() => handleLanguageChange(\"source\")}>Source</Button> */}\r\n\t\t\t\t<Button color={filterValue === \"collectionMethod_collectionDescriptions\" ? \"primary\" : \"default\"}  size=\"small\" variant=\"outlined\" onClick={() => handleLanguageChange(\"collectionMethod_collectionDescriptions\")}>Collection Method</Button>\r\n\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tconst handleSelectChange = (dataSet, event, filter, page) => {\r\n\t\tdebugger\r\n\t\tconsole.log(selectedOption, dataSet)\r\n\t\tsetSelectedOption(dataSet)\r\n\t\tswitch (dataSet.value) {\r\n\t\t\tcase 'parallel-corpus':\r\n\t\t\t\tif (page === 0) {\r\n\t\t\t\t\tsetTitle(\"Number of parallel sentences per language with English\")\r\n\t\t\t\t\tselectedOption.value !== dataSet.value && fetchChartData(dataSet.value, \"languagePairs\", [])\r\n\r\n\t\t\t\t} else if (page === 1) {\r\n\t\t\t\t\tsetTitle(`English-${selectedLanguageName ? selectedLanguageName : event && event.hasOwnProperty(\"label\") && event.label}  ${selectedOption.label} - Grouped by ${(filter === \"domains\") ? \"Domain\" : (filter === \"source\") ? \"Source\" : filter === \"collectionMethod_collectionDescriptions\" ? \"Collection Method\" : \"Domain\"}`)\r\n\r\n\t\t\t\t} else if (page === 2) {\r\n\t\t\t\t\tsetTitle(`English-${selectedLanguageName} ${selectedOption.label} `)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'monolingual-corpus':\r\n\t\t\t\tif (page === 0) {\r\n\t\t\t\t\tselectedOption.value !== dataSet.value && fetchChartData(dataSet.value, \"languagePairs\", [])\r\n\t\t\t\t\tsetTitle('Number of sentences per language')\r\n\t\t\t\t} else if (page === 1) {\r\n\t\t\t\t\tsetTitle(`Number of sentences in ${selectedLanguageName ? selectedLanguageName : event && event.hasOwnProperty(\"label\") && event.label} - Grouped by ${(filter === \"domains\") ? \"Domain\" : (filter === \"source\") ? \"Source\" : filter === \"collectionMethod_collectionDescriptions\" ? \"Collection Method\" : \"Domain\"}`)\r\n\t\t\t\t} else if (page === 2) {\r\n\t\t\t\t\tsetTitle(`Number of sentences in ${selectedLanguageName} `)\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'asr-corpus':\r\n\t\t\t\tif (page === 0) {\r\n\t\t\t\t\tselectedOption.value !== dataSet.value && fetchChartData(dataSet.value, \"languagePairs\", [])\r\n\t\t\t\t\tsetTitle(\"Number of audio hours per language\")\r\n\t\t\t\t} else if (page === 1) {\r\n\t\t\t\t\tsetTitle(`Number of audio hours in ${selectedLanguageName ? selectedLanguageName : event && event.hasOwnProperty(\"label\") && event.label} - Grouped by ${(filter === \"domains\") ? \"Domain\" : (filter === \"source\") ? \"Source\" : filter === \"collectionMethod_collectionDescriptions\" ? \"Collection Method\" : \"Domain\"}`)\r\n\t\t\t\t} else if (page === 2) {\r\n\t\t\t\t\tsetTitle(`Number of audio hours in ${selectedLanguageName} `)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'ocr-corpus':\r\n\r\n\t\t\t\tif (page === 0) {\r\n\t\t\t\t\tselectedOption.value !== dataSet.value && fetchChartData(dataSet.value, \"languagePairs\", [])\r\n\t\t\t\t\tsetTitle(\"Number of images per script\")\r\n\t\t\t\t} else if (page === 1) {\r\n\t\t\t\t\tsetTitle(`Number of images per script in ${selectedLanguageName ? selectedLanguageName : event && event.hasOwnProperty(\"label\") && event.label} - Grouped by ${(filter === \"domains\") ? \"Domain\" : (filter === \"source\") ? \"Source\" : filter === \"collectionMethod_collectionDescriptions\" ? \"Collection Method\" : \"Domain\"}`)\r\n\t\t\t\t} else if (page === 2) {\r\n\t\t\t\t\tsetTitle(`Number of images per script in ${selectedLanguageName} `)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tsetTitle(\"\")\r\n\t\t}\r\n\r\n\r\n\t}\r\n\treturn (\r\n\t\t<MuiThemeProvider theme={Theme}>\r\n\t\t\t{ !authenticate() &&\r\n\r\n\t\t\t\t<><Header style={{ marginBottom: \"10px\" }} /><br /><br /><br /></>\r\n\t\t\t}\r\n\t\t\t<TitleBar selectedOption={selectedOption}\r\n\t\t\t\t\t\t\thandleSelectChange={handleSelectChange}\r\n\t\t\t\t\t\t\toptions={options}\r\n\t\t\t\t\t\t\tisDisabled={page !== 0 ? true : false}\r\n\t\t\t\t\t\t\tpage= {page}>\r\n\r\n\t\t\t\t{page === 1 && fetchFilterButtons()}\r\n\t\t\t\t\r\n\t\t\t</ TitleBar>\r\n\t\t\t<div className={classes.container}>\r\n\t\t\t\t{/* <div className={classes.breadcrum}>\r\n\t\t\t\t<BreadCrum links={[\"Dataset\"]} activeLink=\"Submit Dataset\" />\r\n\t\t\t</div> */}\r\n\r\n\t\t\t\t<Paper elevation={3} className={classes.paper}>\r\n\r\n\t\t\t\t\t<div className={classes.titleBar}>\r\n\t\t\t\t\t <><Button size=\"small\" variant=\"contained\" disabled = {page !== 0 ? false : true} startIcon={<ArrowBack />} onClick={() => handleCardNavigation()}>Back</Button>\r\n\t\t\t\t\t\t\t<div className={classes.seperator}></div></>\r\n\r\n\t\t\t\t\t\t\t<Typography value=\"\" variant=\"h6\"> {title} </Typography>\r\n\t\t\t\t\t\t{/* <Select className={classes.select}\r\n\t\t\t\t\t\t\tstyles={customStyles} color=\"primary\"\r\n\t\t\t\t\t\t\tvalue={selectedOption}\r\n\t\t\t\t\t\t\tonChange={(value) => { handleSelectChange(value, \"\", \"\", page) }}\r\n\t\t\t\t\t\t\toptions={options}\r\n\t\t\t\t\t\t\tisDisabled={page !== 0 ? true : false}\r\n\t\t\t\t\t\t/> */}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<div className={classes.title}>\r\n\t\t\t\t\t\t<ResponsiveContainer width=\"95%\" height={550} >\r\n\t\t\t\t\t\t\t<BarChart width={900} height={350} data={DashboardReport} fontSize=\"14px\" fontFamily=\"Lato\" maxBarSize={100} >\r\n\r\n\t\t\t\t\t\t\t\t<XAxis dataKey=\"label\"\r\n\t\t\t\t\t\t\t\t\t// textAnchor\t=\t{isMobile ? \"end\" : \"middle\"}\r\n\t\t\t\t\t\t\t\t\t// tick\t\t=\t{{ angle: isMobile ? -60 : 0 }} \r\n\t\t\t\t\t\t\t\t\t// height\t\t=\t{isMobile ? 100 : 60}\r\n\t\t\t\t\t\t\t\t\ttextAnchor={\"end\"}\r\n\t\t\t\t\t\t\t\t\ttick={{ angle: -30, marginTop: \"8px\" }}\r\n\t\t\t\t\t\t\t\t\theight={130}\r\n\t\t\t\t\t\t\t\t\tinterval={0}\r\n\t\t\t\t\t\t\t\t\tposition=\"insideLeft\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t</XAxis>\r\n\t\t\t\t\t\t\t\t<YAxis padding={{ top: 10 }} tickInterval={10} allowDecimals={false} type=\"number\" dx={0} tickFormatter={(value) => new Intl.NumberFormat('en', { notation: \"compact\" }).format(value)} />\r\n\r\n\r\n\t\t\t\t\t\t\t\t<Tooltip fontFamily=\"Lato\" formatter={(value) => new Intl.NumberFormat('en').format(value)} cursor={{ fill: 'none' }} />\r\n\t\t\t\t\t\t\t\t<Bar margin={{ top: 40, left: 20, right: 20, bottom: 20 }} dataKey=\"value\" cursor=\"pointer\" radius={[8, 8, 0, 0]} maxBarSize={65} onClick={(event) => { handleOnClick(page + 1, event) }}>\r\n\t\t\t\t\t\t\t\t\t<LabelList\r\n\t\t\t\t\t\t\t\t\t\tformatter={(value) => new Intl.NumberFormat('en').format(value)} cursor={{ fill: 'none' }}\r\n\t\t\t\t\t\t\t\t\t\tposition=\"top\"\r\n\t\t\t\t\t\t\t\t\t\tdataKey=\"value\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"black\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tDashboardReport.length > 0 && DashboardReport.map((entry, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\tconst color = colors[index < 9 ? index : index % 10]\r\n\t\t\t\t\t\t\t\t\t\t\treturn <Cell key={index} fill={`#${color}`} />;\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</Bar>\r\n\t\t\t\t\t\t\t</BarChart>\r\n\t\t\t\t\t\t</ResponsiveContainer>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</Paper>\r\n\r\n\t\t\t</div>\r\n\t\t</MuiThemeProvider>\r\n\t)\r\n\r\n\r\n}\r\n\r\n\r\n\r\nexport default withStyles(ChartStyles(Theme))(ChartRender);\r\n"]},"metadata":{},"sourceType":"module"}