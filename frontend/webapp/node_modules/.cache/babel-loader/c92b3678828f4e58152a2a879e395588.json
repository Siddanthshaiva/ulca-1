{"ast":null,"code":"import React, { useCallback, useState, useMemo, useRef, useContext, useEffect, useReducer, useLayoutEffect } from 'react';\nimport ReactDOM, { unstable_batchedUpdates } from 'react-dom';\nimport PropTypes from 'prop-types';\nconst menuContainerClass = 'rc-menu-container';\nconst menuClass = 'rc-menu';\nconst menuButtonClass = 'rc-menu-button';\nconst menuArrowClass = 'arrow';\nconst menuItemClass = 'item';\nconst menuDividerClass = 'divider';\nconst menuHeaderClass = 'header';\nconst menuGroupClass = 'group';\nconst subMenuClass = 'submenu';\nconst radioGroupClass = 'radio-group';\nconst initialHoverIndex = -1;\nconst MenuListItemContext = /*#__PURE__*/React.createContext({});\nconst MenuListContext = /*#__PURE__*/React.createContext({});\nconst EventHandlersContext = /*#__PURE__*/React.createContext({});\nconst RadioGroupContext = /*#__PURE__*/React.createContext({});\nconst SettingsContext = /*#__PURE__*/React.createContext({});\nconst ItemSettingsContext = /*#__PURE__*/React.createContext({});\nconst Keys = Object.freeze({\n  'ENTER': 'Enter',\n  'ESC': 'Escape',\n  'SPACE': ' ',\n  'HOME': 'Home',\n  'END': 'End',\n  'LEFT': 'ArrowLeft',\n  'RIGHT': 'ArrowRight',\n  'UP': 'ArrowUp',\n  'DOWN': 'ArrowDown'\n});\nconst HoverIndexActionTypes = Object.freeze({\n  'RESET': 'HOVER_INDEX_RESET',\n  'SET': 'HOVER_INDEX_SET',\n  'UNSET': 'HOVER_INDEX_UNSET',\n  'INCREASE': 'HOVER_INDEX_INCREASE',\n  'DECREASE': 'HOVER_INDEX_DECREASE',\n  'FIRST': 'HOVER_INDEX_FIRST',\n  'LAST': 'HOVER_INDEX_LAST'\n});\nconst SubmenuActionTypes = Object.freeze({\n  'OPEN': 'SUBMENU_OPEN',\n  'CLOSE': 'SUBMENU_CLOSE'\n});\nconst CloseReason = Object.freeze({\n  'CLICK': 'click',\n  'CANCEL': 'cancel',\n  'BLUR': 'blur',\n  'SCROLL': 'scroll'\n});\n\nconst batchedUpdates = unstable_batchedUpdates || (callback => callback());\n\nconst defineName = (component, name) => name ? Object.defineProperty(component, '_reactMenu', {\n  value: name,\n  writable: false\n}) : component;\n\nconst getName = component => component && component['_reactMenu'];\n\nconst applyHOC = HOC => (...args) => defineName(HOC(...args), getName(args[0]));\n\nconst applyStatics = sourceComponent => wrappedComponent => defineName(wrappedComponent, getName(sourceComponent));\n\nconst safeCall = (fn, ...args) => typeof fn === 'function' ? fn(...args) : fn;\n\nconst attachHandlerProps = (handlers, props) => {\n  const result = {};\n\n  for (const handlerName of Object.keys(handlers)) {\n    const handler = handlers[handlerName];\n    const propHandler = props[handlerName];\n    let attachedHandler;\n\n    if (typeof propHandler === 'function') {\n      attachedHandler = e => {\n        propHandler(e);\n        handler(e);\n      };\n    } else {\n      attachedHandler = handler;\n    }\n\n    result[handlerName] = attachedHandler;\n  }\n\n  return result;\n};\n\nconst parsePadding = paddingStr => {\n  if (typeof paddingStr !== 'string') return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  };\n  const padding = paddingStr.trim().split(/\\s+/, 4).map(parseFloat);\n  const top = !isNaN(padding[0]) ? padding[0] : 0;\n  const right = !isNaN(padding[1]) ? padding[1] : top;\n  return {\n    top,\n    right,\n    bottom: !isNaN(padding[2]) ? padding[2] : top,\n    left: !isNaN(padding[3]) ? padding[3] : right\n  };\n};\n\nconst bem = (block, element, modifiers = {}) => (userClassName, userModifiers) => {\n  let blockElement = element ? `${block}__${element}` : block;\n  let className = blockElement;\n\n  for (const name of Object.keys(modifiers)) {\n    const value = modifiers[name];\n\n    if (value) {\n      className += ` ${blockElement}--`;\n      className += value === true ? name : `${name}-${value}`;\n    }\n  }\n\n  if (typeof userClassName === 'function') {\n    userClassName = userClassName(userModifiers || modifiers);\n  }\n\n  if (typeof userClassName === 'string') {\n    userClassName = userClassName.trim();\n    if (userClassName) className += ` ${userClassName}`;\n  }\n\n  return className;\n};\n\nconst isObject = obj => obj && typeof obj === 'object';\n\nconst sanitiseKey = key => key.charAt(0) === '$' ? key.slice(1) : key;\n\nconst flatStyles = (styles, modifiers) => {\n  if (typeof styles === 'function') return styles(modifiers);\n  if (!isObject(styles)) return undefined;\n  if (!modifiers) return styles;\n  const style = {};\n\n  for (const prop of Object.keys(styles)) {\n    const value = styles[prop];\n\n    if (isObject(value)) {\n      const modifierValue = modifiers[sanitiseKey(prop)];\n\n      if (typeof modifierValue === 'string') {\n        for (const nestedProp of Object.keys(value)) {\n          const nestedValue = value[nestedProp];\n\n          if (isObject(nestedValue)) {\n            if (sanitiseKey(nestedProp) === modifierValue) {\n              Object.assign(style, nestedValue);\n            }\n          } else {\n            style[nestedProp] = nestedValue;\n          }\n        }\n      } else if (modifierValue) {\n        Object.assign(style, value);\n      }\n    } else {\n      style[prop] = value;\n    }\n  }\n\n  return style;\n};\n\nconst getScrollAncestor = node => {\n  while (node && node !== document.body) {\n    const {\n      overflow,\n      overflowX,\n      overflowY\n    } = getComputedStyle(node);\n    if (/auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX)) return node;\n    node = node.parentNode;\n  }\n\n  return window;\n};\n\nconst floatEqual = (a, b, diff = 0.0001) => Math.abs(a - b) < diff;\n\nconst isProd = process.env.NODE_ENV === 'production';\n\nconst validateChildren = (parent, child, permitted) => {\n  if (!child) return false;\n\n  if (!permitted.includes(getName(child.type))) {\n    !isProd && console.warn(`[react-menu] ${child.type || child} is ignored.\\n`, `The permitted children inside a ${parent} are ${permitted.join(', ')}.`, 'If you create HOC of these components, you can use the applyHOC or applyStatics helper, see more at: https://szhsin.github.io/react-menu/docs#utils-apply-hoc');\n    return false;\n  }\n\n  return true;\n};\n\nconst cloneChildren = (children, startIndex = 0) => {\n  let index = startIndex;\n  let descendOverflow = false;\n  const permittedChildren = ['MenuDivider', 'MenuGroup', 'MenuHeader', 'MenuItem', 'FocusableItem', 'MenuRadioGroup', 'SubMenu'];\n  const items = React.Children.map(children, child => {\n    if (!validateChildren('Menu or SubMenu', child, permittedChildren)) return null;\n\n    switch (getName(child.type)) {\n      case 'MenuDivider':\n      case 'MenuHeader':\n        return child;\n\n      case 'MenuRadioGroup':\n        {\n          const permittedChildren = ['MenuItem'];\n          const props = {\n            type: 'radio'\n          };\n          const radioItems = React.Children.map(child.props.children, radioChild => {\n            if (!validateChildren('MenuRadioGroup', radioChild, permittedChildren)) return null;\n            return radioChild.props.disabled ? /*#__PURE__*/React.cloneElement(radioChild, props) : /*#__PURE__*/React.cloneElement(radioChild, { ...props,\n              index: index++\n            });\n          });\n          return /*#__PURE__*/React.cloneElement(child, {\n            children: radioItems\n          });\n        }\n\n      case 'MenuGroup':\n        {\n          const {\n            items,\n            endIndex,\n            descendOverflow: descOverflow\n          } = cloneChildren(child.props.children, index);\n          index = endIndex;\n          const takeOverflow = Boolean(child.props.takeOverflow);\n          if (!isProd && (descendOverflow === descOverflow ? descOverflow : takeOverflow)) throw new Error('[react-menu] Only one MenuGroup in a menu is allowed to have takeOverflow prop.');\n          descendOverflow = descendOverflow || descOverflow || takeOverflow;\n          return /*#__PURE__*/React.cloneElement(child, {\n            children: items\n          });\n        }\n\n      default:\n        return child.props.disabled ? child : /*#__PURE__*/React.cloneElement(child, {\n          index: index++\n        });\n    }\n  });\n  return {\n    items,\n    endIndex: index,\n    descendOverflow\n  };\n};\n\nconst stylePropTypes = name => ({\n  [name ? `${name}ClassName` : 'className']: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  [name ? `${name}Styles` : 'styles']: PropTypes.oneOfType([PropTypes.object, PropTypes.func])\n});\n\nconst sharedMenuPropTypes = { ...stylePropTypes(),\n  ...stylePropTypes('arrow'),\n  'aria-label': PropTypes.string,\n  arrow: PropTypes.bool,\n  offsetX: PropTypes.number,\n  offsetY: PropTypes.number,\n  align: PropTypes.oneOf(['start', 'center', 'end']),\n  direction: PropTypes.oneOf(['left', 'right', 'top', 'bottom']),\n  position: PropTypes.oneOf(['auto', 'anchor', 'initial']),\n  overflow: PropTypes.oneOf(['auto', 'visible', 'hidden']),\n  children: PropTypes.node.isRequired\n};\nconst menuPropTypesBase = { ...sharedMenuPropTypes,\n  id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  animation: PropTypes.bool,\n  debugging: PropTypes.bool,\n  boundingBoxRef: PropTypes.object,\n  boundingBoxPadding: PropTypes.string,\n  reposition: PropTypes.oneOf(['auto', 'initial']),\n  repositionFlag: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  viewScroll: PropTypes.oneOf(['auto', 'close', 'initial']),\n  submenuOpenDelay: PropTypes.number,\n  submenuCloseDelay: PropTypes.number,\n  portal: PropTypes.bool,\n  theming: PropTypes.string,\n  onClick: PropTypes.func\n};\nconst sharedMenuDefaultProp = {\n  offsetX: 0,\n  offsetY: 0,\n  align: 'start',\n  direction: 'bottom',\n  position: 'auto',\n  overflow: 'visible'\n};\nconst menuDefaultPropsBase = { ...sharedMenuDefaultProp,\n  animation: true,\n  reposition: 'auto',\n  viewScroll: 'initial',\n  submenuOpenDelay: 300,\n  submenuCloseDelay: 150\n};\n\nconst useActiveState = (isHovering, isDisabled, customKey) => {\n  const [active, setActive] = useState(false);\n  const activeKeys = useMemo(() => [Keys.SPACE, Keys.ENTER, ...(customKey ? [customKey] : [])], [customKey]);\n  const cancelActive = useCallback(() => setActive(false), []);\n  return {\n    isActive: active,\n    onPointerDown: useCallback(() => {\n      if (!isDisabled) setActive(true);\n    }, [isDisabled]),\n    onPointerUp: cancelActive,\n    onPointerLeave: cancelActive,\n    onKeyDown: useCallback(e => {\n      if (isHovering && !isDisabled && activeKeys.includes(e.key)) {\n        setActive(true);\n      }\n    }, [isHovering, isDisabled, activeKeys]),\n    onKeyUp: useCallback(e => {\n      if (activeKeys.includes(e.key)) {\n        setActive(false);\n      }\n    }, [activeKeys]),\n    onBlur: useCallback(e => {\n      if (!e.currentTarget.contains(e.relatedTarget)) {\n        setActive(false);\n      }\n    }, [])\n  };\n};\n\nconst useItemState = (isDisabled, index) => {\n  const ref = useRef(null);\n  const {\n    submenuCloseDelay\n  } = useContext(ItemSettingsContext);\n  const {\n    isParentOpen,\n    hoverIndex,\n    isSubmenuOpen,\n    dispatch\n  } = useContext(MenuListItemContext);\n  const isHovering = hoverIndex === index;\n  const timeoutId = useRef();\n  const setHover = useCallback(() => {\n    if (!isDisabled) dispatch({\n      type: HoverIndexActionTypes.SET,\n      index\n    });\n  }, [isDisabled, dispatch, index]);\n  const onBlur = useCallback(e => {\n    if (!e.currentTarget.contains(e.relatedTarget)) {\n      dispatch({\n        type: HoverIndexActionTypes.UNSET,\n        index\n      });\n    }\n  }, [dispatch, index]);\n  const onMouseEnter = useCallback(() => {\n    if (isSubmenuOpen) {\n      timeoutId.current = setTimeout(setHover, submenuCloseDelay);\n    } else {\n      setHover();\n    }\n  }, [isSubmenuOpen, submenuCloseDelay, setHover]);\n  const onMouseLeave = useCallback((_, keepHover) => {\n    timeoutId.current && clearTimeout(timeoutId.current);\n    if (!keepHover) dispatch({\n      type: HoverIndexActionTypes.UNSET,\n      index\n    });\n  }, [dispatch, index]);\n  useEffect(() => () => clearTimeout(timeoutId.current), []);\n  useEffect(() => {\n    if (isHovering && isParentOpen) {\n      ref.current && ref.current.focus();\n    }\n  }, [isHovering, isParentOpen]);\n  return {\n    ref,\n    isHovering,\n    setHover,\n    onBlur,\n    onMouseEnter,\n    onMouseLeave\n  };\n};\n\nconst useMenuChange = (onChange, isOpen) => {\n  const prevOpen = useRef(isOpen);\n  useEffect(() => {\n    if (prevOpen.current !== isOpen) safeCall(onChange, {\n      open: isOpen\n    });\n    prevOpen.current = isOpen;\n  }, [onChange, isOpen]);\n};\n\nconst FocusPositions = Object.freeze({\n  'INITIAL': 'initial',\n  'FIRST': 'first',\n  'LAST': 'last'\n});\nconst MenuStates = Object.freeze({\n  'UNMOUNTED': 0,\n  'CLOSED': 1,\n  'OPEN': 2\n});\nconst MenuStateActionType = Object.freeze({\n  'OPEN': 0,\n  'CLOSE': 1,\n  'TOGGLE': 2\n});\n\nconst useMenuState = (keepMounted = true) => {\n  const [menuItemFocus, setMenuItemFocus] = useState({\n    position: FocusPositions.INITIAL\n  });\n  const [menuState, dispatch] = useReducer(menuStateReducer, MenuStates.UNMOUNTED);\n\n  function menuStateReducer(state, {\n    type\n  }) {\n    switch (type) {\n      case MenuStateActionType.OPEN:\n        return MenuStates.OPEN;\n\n      case MenuStateActionType.CLOSE:\n        if (state === MenuStates.OPEN) {\n          return keepMounted ? MenuStates.CLOSED : MenuStates.UNMOUNTED;\n        } else {\n          return state;\n        }\n\n      case MenuStateActionType.TOGGLE:\n        if (state === MenuStates.OPEN) {\n          return keepMounted ? MenuStates.CLOSED : MenuStates.UNMOUNTED;\n        } else {\n          return MenuStates.OPEN;\n        }\n\n      default:\n        throw new Error('menuStateReducer: unknown action type');\n    }\n  }\n\n  return {\n    isMounted: menuState !== MenuStates.UNMOUNTED,\n    isOpen: menuState === MenuStates.OPEN,\n    menuItemFocus,\n    openMenu: useCallback((menuItemFocus = FocusPositions.INITIAL) => {\n      setMenuItemFocus({\n        position: menuItemFocus\n      });\n      dispatch({\n        type: MenuStateActionType.OPEN\n      });\n    }, []),\n    closeMenu: useCallback(() => dispatch({\n      type: MenuStateActionType.CLOSE\n    }), []),\n    toggleMenu: useCallback((menuItemFocus = FocusPositions.INITIAL) => {\n      setMenuItemFocus({\n        position: menuItemFocus\n      });\n      dispatch({\n        type: MenuStateActionType.TOGGLE\n      });\n    }, [])\n  };\n};\n\nconst useIsomorphicLayoutEffect = typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined' ? useLayoutEffect : useEffect;\nconst MenuButton = defineName( /*#__PURE__*/React.memo( /*#__PURE__*/React.forwardRef(function MenuButton({\n  className,\n  styles,\n  isOpen,\n  disabled,\n  children,\n  ...restProps\n}, ref) {\n  const modifiers = Object.freeze({\n    open: isOpen\n  });\n  return /*#__PURE__*/React.createElement(\"button\", Object.assign({\n    \"aria-haspopup\": \"true\",\n    \"aria-expanded\": isOpen,\n    \"aria-disabled\": disabled || undefined,\n    disabled: disabled\n  }, restProps, {\n    ref: ref,\n    className: bem(menuButtonClass, null, modifiers)(className),\n    style: flatStyles(styles, modifiers)\n  }), children);\n})), 'MenuButton');\nMenuButton.propTypes = { ...stylePropTypes(),\n  isOpen: PropTypes.bool,\n  disabled: PropTypes.bool,\n  children: PropTypes.node.isRequired,\n  onClick: PropTypes.func,\n  onKeyDown: PropTypes.func\n};\nconst MenuList = defineName( /*#__PURE__*/React.memo(function MenuList({\n  ariaLabel,\n  className,\n  styles,\n  arrowClassName,\n  arrowStyles,\n  anchorPoint,\n  anchorRef,\n  containerRef,\n  arrow,\n  align,\n  direction,\n  position,\n  overflow,\n  repositionFlag,\n  captureFocus = true,\n  isOpen,\n  isDisabled,\n  menuItemFocus,\n  offsetX,\n  offsetY,\n  children,\n  onClose,\n  ...restProps\n}) {\n  const [menuPosition, setMenuPosition] = useState({\n    x: 0,\n    y: 0\n  });\n  const [arrowPosition, setArrowPosition] = useState({});\n  const [overflowData, setOverflowData] = useState();\n  const [isClosing, setClosing] = useState(false);\n  const [expandedDirection, setExpandedDirection] = useState(direction);\n  const {\n    animation,\n    boundingBoxRef,\n    boundingBoxPadding,\n    rootMenuRef,\n    rootAnchorRef,\n    scrollingRef,\n    anchorScrollingRef,\n    reposition,\n    viewScroll\n  } = useContext(SettingsContext);\n  const menuRef = useRef(null);\n  const arrowRef = useRef(null);\n  const menuItemsCount = useRef(0);\n  const latestOpen = useRef(isOpen);\n  const latestMenuSize = useRef({\n    width: 0,\n    height: 0\n  });\n  const latestHandlePosition = useRef(() => {});\n  const descendOverflowRef = useRef(false);\n  const reposFlag = useContext(MenuListContext).reposSubmenu || repositionFlag;\n  const [reposSubmenu, forceReposSubmenu] = useReducer(c => c + 1, 1);\n  const [{\n    hoverIndex,\n    openSubmenuCount\n  }, dispatch] = useReducer(reducer, {\n    hoverIndex: initialHoverIndex,\n    openSubmenuCount: 0\n  });\n\n  function reducer({\n    hoverIndex,\n    openSubmenuCount\n  }, action) {\n    return {\n      hoverIndex: hoverIndexReducer(hoverIndex, action),\n      openSubmenuCount: submenuCountReducer(openSubmenuCount, action)\n    };\n  }\n\n  function hoverIndexReducer(state, {\n    type,\n    index\n  }) {\n    switch (type) {\n      case HoverIndexActionTypes.RESET:\n        return initialHoverIndex;\n\n      case HoverIndexActionTypes.SET:\n        return index;\n\n      case HoverIndexActionTypes.UNSET:\n        return state === index ? initialHoverIndex : state;\n\n      case HoverIndexActionTypes.DECREASE:\n        {\n          let i = state;\n          i--;\n          if (i < 0) i = menuItemsCount.current - 1;\n          return i;\n        }\n\n      case HoverIndexActionTypes.INCREASE:\n        {\n          let i = state;\n          i++;\n          if (i >= menuItemsCount.current) i = 0;\n          return i;\n        }\n\n      case HoverIndexActionTypes.FIRST:\n        return menuItemsCount.current > 0 ? 0 : initialHoverIndex;\n\n      case HoverIndexActionTypes.LAST:\n        return menuItemsCount.current > 0 ? menuItemsCount.current - 1 : initialHoverIndex;\n\n      default:\n        return state;\n    }\n  }\n\n  const menuItems = useMemo(() => {\n    const {\n      items,\n      endIndex,\n      descendOverflow\n    } = cloneChildren(children);\n    menuItemsCount.current = endIndex;\n    descendOverflowRef.current = descendOverflow;\n    return items;\n  }, [children]);\n\n  const handleKeyDown = e => {\n    let handled = false;\n\n    switch (e.key) {\n      case Keys.HOME:\n        dispatch({\n          type: HoverIndexActionTypes.FIRST\n        });\n        handled = true;\n        break;\n\n      case Keys.END:\n        dispatch({\n          type: HoverIndexActionTypes.LAST\n        });\n        handled = true;\n        break;\n\n      case Keys.UP:\n        dispatch({\n          type: HoverIndexActionTypes.DECREASE\n        });\n        handled = true;\n        break;\n\n      case Keys.DOWN:\n        dispatch({\n          type: HoverIndexActionTypes.INCREASE\n        });\n        handled = true;\n        break;\n\n      case Keys.SPACE:\n        if (e.target && e.target.className.includes(menuClass)) {\n          e.preventDefault();\n        }\n\n        break;\n    }\n\n    if (handled) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  };\n\n  const handleAnimationEnd = () => {\n    if (isClosing) {\n      setClosing(false);\n      setOverflowData();\n    }\n  };\n\n  const positionHelpers = useCallback(() => {\n    const menuRect = menuRef.current.getBoundingClientRect();\n    const containerRect = containerRef.current.getBoundingClientRect();\n    const boundingRect = scrollingRef.current === window ? {\n      left: 0,\n      top: 0,\n      right: document.documentElement.clientWidth,\n      bottom: window.innerHeight\n    } : scrollingRef.current.getBoundingClientRect();\n    const padding = parsePadding(boundingBoxPadding);\n\n    const getLeftOverflow = x => x + containerRect.left - boundingRect.left - padding.left;\n\n    const getRightOverflow = x => x + containerRect.left + menuRect.width - boundingRect.right + padding.right;\n\n    const getTopOverflow = y => y + containerRect.top - boundingRect.top - padding.top;\n\n    const getBottomOverflow = y => y + containerRect.top + menuRect.height - boundingRect.bottom + padding.bottom;\n\n    const confineHorizontally = x => {\n      let leftOverflow = getLeftOverflow(x);\n\n      if (leftOverflow < 0) {\n        x -= leftOverflow;\n      } else {\n        const rightOverflow = getRightOverflow(x);\n\n        if (rightOverflow > 0) {\n          x -= rightOverflow;\n          leftOverflow = getLeftOverflow(x);\n          if (leftOverflow < 0) x -= leftOverflow;\n        }\n      }\n\n      return x;\n    };\n\n    const confineVertically = y => {\n      let topOverflow = getTopOverflow(y);\n\n      if (topOverflow < 0) {\n        y -= topOverflow;\n      } else {\n        const bottomOverflow = getBottomOverflow(y);\n\n        if (bottomOverflow > 0) {\n          y -= bottomOverflow;\n          topOverflow = getTopOverflow(y);\n          if (topOverflow < 0) y -= topOverflow;\n        }\n      }\n\n      return y;\n    };\n\n    return {\n      menuRect,\n      containerRect,\n      getLeftOverflow,\n      getRightOverflow,\n      getTopOverflow,\n      getBottomOverflow,\n      confineHorizontally,\n      confineVertically\n    };\n  }, [containerRef, scrollingRef, boundingBoxPadding]);\n  const placeArrowX = useCallback((menuX, anchorRect, containerRect, menuRect) => {\n    let x = anchorRect.left - containerRect.left - menuX + anchorRect.width / 2;\n    const offset = arrowRef.current.offsetWidth * 1.25;\n    x = Math.max(offset, x);\n    x = Math.min(x, menuRect.width - offset);\n    return x;\n  }, []);\n  const placeArrowY = useCallback((menuY, anchorRect, containerRect, menuRect) => {\n    let y = anchorRect.top - containerRect.top - menuY + anchorRect.height / 2;\n    const offset = arrowRef.current.offsetHeight * 1.25;\n    y = Math.max(offset, y);\n    y = Math.min(y, menuRect.height - offset);\n    return y;\n  }, []);\n  const placeLeftorRight = useCallback(({\n    anchorRect,\n    containerRect,\n    menuRect\n  }, {\n    placeLeftorRightY,\n    placeLeftX,\n    placeRightX\n  }, {\n    getLeftOverflow,\n    getRightOverflow,\n    confineHorizontally,\n    confineVertically\n  }) => {\n    let computedDirection = direction;\n    let y = placeLeftorRightY;\n\n    if (position !== 'initial') {\n      y = confineVertically(y);\n\n      if (position === 'anchor') {\n        y = Math.min(y, anchorRect.bottom - containerRect.top);\n        y = Math.max(y, anchorRect.top - containerRect.top - menuRect.height);\n      }\n    }\n\n    let x, leftOverflow, rightOverflow;\n\n    if (computedDirection === 'left') {\n      x = placeLeftX;\n\n      if (position !== 'initial') {\n        leftOverflow = getLeftOverflow(x);\n\n        if (leftOverflow < 0) {\n          rightOverflow = getRightOverflow(placeRightX);\n\n          if (rightOverflow <= 0 || -leftOverflow > rightOverflow) {\n            x = placeRightX;\n            computedDirection = 'right';\n          }\n        }\n      }\n    } else {\n      x = placeRightX;\n\n      if (position !== 'initial') {\n        rightOverflow = getRightOverflow(x);\n\n        if (rightOverflow > 0) {\n          leftOverflow = getLeftOverflow(placeLeftX);\n\n          if (leftOverflow >= 0 || -leftOverflow < rightOverflow) {\n            x = placeLeftX;\n            computedDirection = 'left';\n          }\n        }\n      }\n    }\n\n    if (position === 'auto') x = confineHorizontally(x);\n    const arrowY = arrow ? placeArrowY(y, anchorRect, containerRect, menuRect) : undefined;\n    return {\n      arrowY,\n      x,\n      y,\n      computedDirection\n    };\n  }, [placeArrowY, arrow, direction, position]);\n  const placeToporBottom = useCallback(({\n    anchorRect,\n    containerRect,\n    menuRect\n  }, {\n    placeToporBottomX,\n    placeTopY,\n    placeBottomY\n  }, {\n    getTopOverflow,\n    getBottomOverflow,\n    confineHorizontally,\n    confineVertically\n  }) => {\n    let computedDirection = direction === 'top' ? 'top' : 'bottom';\n    let x = placeToporBottomX;\n\n    if (position !== 'initial') {\n      x = confineHorizontally(x);\n\n      if (position === 'anchor') {\n        x = Math.min(x, anchorRect.right - containerRect.left);\n        x = Math.max(x, anchorRect.left - containerRect.left - menuRect.width);\n      }\n    }\n\n    let y, topOverflow, bottomOverflow;\n\n    if (computedDirection === 'top') {\n      y = placeTopY;\n\n      if (position !== 'initial') {\n        topOverflow = getTopOverflow(y);\n\n        if (topOverflow < 0) {\n          bottomOverflow = getBottomOverflow(placeBottomY);\n\n          if (bottomOverflow <= 0 || -topOverflow > bottomOverflow) {\n            y = placeBottomY;\n            computedDirection = 'bottom';\n          }\n        }\n      }\n    } else {\n      y = placeBottomY;\n\n      if (position !== 'initial') {\n        bottomOverflow = getBottomOverflow(y);\n\n        if (bottomOverflow > 0) {\n          topOverflow = getTopOverflow(placeTopY);\n\n          if (topOverflow >= 0 || -topOverflow < bottomOverflow) {\n            y = placeTopY;\n            computedDirection = 'top';\n          }\n        }\n      }\n    }\n\n    if (position === 'auto') y = confineVertically(y);\n    const arrowX = arrow ? placeArrowX(x, anchorRect, containerRect, menuRect) : undefined;\n    return {\n      arrowX,\n      x,\n      y,\n      computedDirection\n    };\n  }, [placeArrowX, arrow, direction, position]);\n  const positionMenu = useCallback((positionHelpers, anchorRef) => {\n    const {\n      menuRect,\n      containerRect,\n      ...helpers\n    } = positionHelpers;\n    let horizontalOffset = offsetX;\n    let verticalOffset = offsetY;\n\n    if (arrow) {\n      if (direction === 'left' || direction === 'right') {\n        horizontalOffset += arrowRef.current.offsetWidth;\n      } else {\n        verticalOffset += arrowRef.current.offsetHeight;\n      }\n    }\n\n    const anchorRect = anchorRef.current.getBoundingClientRect();\n    const placeLeftX = anchorRect.left - containerRect.left - menuRect.width - horizontalOffset;\n    const placeRightX = anchorRect.right - containerRect.left + horizontalOffset;\n    const placeTopY = anchorRect.top - containerRect.top - menuRect.height - verticalOffset;\n    const placeBottomY = anchorRect.bottom - containerRect.top + verticalOffset;\n    let placeToporBottomX, placeLeftorRightY;\n\n    if (align === 'end') {\n      placeToporBottomX = anchorRect.right - containerRect.left - menuRect.width;\n      placeLeftorRightY = anchorRect.bottom - containerRect.top - menuRect.height;\n    } else if (align === 'center') {\n      placeToporBottomX = anchorRect.left - containerRect.left - (menuRect.width - anchorRect.width) / 2;\n      placeLeftorRightY = anchorRect.top - containerRect.top - (menuRect.height - anchorRect.height) / 2;\n    } else {\n      placeToporBottomX = anchorRect.left - containerRect.left;\n      placeLeftorRightY = anchorRect.top - containerRect.top;\n    }\n\n    placeToporBottomX += horizontalOffset;\n    placeLeftorRightY += verticalOffset;\n    const rects = {\n      anchorRect,\n      containerRect,\n      menuRect\n    };\n    const placements = {\n      placeLeftX,\n      placeRightX,\n      placeLeftorRightY,\n      placeTopY,\n      placeBottomY,\n      placeToporBottomX\n    };\n\n    switch (direction) {\n      case 'left':\n      case 'right':\n        return placeLeftorRight(rects, placements, helpers);\n\n      case 'top':\n      case 'bottom':\n      default:\n        return placeToporBottom(rects, placements, helpers);\n    }\n  }, [arrow, align, direction, offsetX, offsetY, placeLeftorRight, placeToporBottom]);\n  const positionContextMenu = useCallback((positionHelpers, anchorPoint) => {\n    const {\n      menuRect,\n      containerRect,\n      getLeftOverflow,\n      getRightOverflow,\n      getTopOverflow,\n      getBottomOverflow,\n      confineHorizontally,\n      confineVertically\n    } = positionHelpers;\n    let x, y;\n    x = anchorPoint.x - containerRect.left;\n    y = anchorPoint.y - containerRect.top;\n    const rightOverflow = getRightOverflow(x);\n\n    if (rightOverflow > 0) {\n      const adjustedX = x - menuRect.width;\n      const leftOverflow = getLeftOverflow(adjustedX);\n\n      if (leftOverflow >= 0 || -leftOverflow < rightOverflow) {\n        x = adjustedX;\n      }\n\n      x = confineHorizontally(x);\n    }\n\n    let computedDirection = 'bottom';\n    const bottomOverflow = getBottomOverflow(y);\n\n    if (bottomOverflow > 0) {\n      const adjustedY = y - menuRect.height;\n      const topOverflow = getTopOverflow(adjustedY);\n\n      if (topOverflow >= 0 || -topOverflow < bottomOverflow) {\n        y = adjustedY;\n        computedDirection = 'top';\n      }\n\n      y = confineVertically(y);\n    }\n\n    return {\n      x,\n      y,\n      computedDirection\n    };\n  }, []);\n  const handlePosition = useCallback(() => {\n    if (!containerRef.current) {\n      if (!isProd) throw new Error('[react-menu] Menu cannot be positioned properly as container ref is null. If you initialise isOpen prop to true for ControlledMenu, please see this link for a solution: https://github.com/szhsin/react-menu/issues/2#issuecomment-719166062');\n      return;\n    }\n\n    if (!scrollingRef.current) {\n      scrollingRef.current = boundingBoxRef ? boundingBoxRef.current : getScrollAncestor(rootMenuRef.current);\n    }\n\n    const helpers = positionHelpers();\n    const {\n      menuRect\n    } = helpers;\n    let results = {\n      computedDirection: 'bottom'\n    };\n\n    if (anchorPoint) {\n      results = positionContextMenu(helpers, anchorPoint);\n    } else if (anchorRef) {\n      results = positionMenu(helpers, anchorRef);\n    }\n\n    let {\n      arrowX,\n      arrowY,\n      x,\n      y,\n      computedDirection\n    } = results;\n    let menuHeight = menuRect.height;\n\n    if (overflow !== 'visible') {\n      const {\n        getTopOverflow,\n        getBottomOverflow\n      } = helpers;\n      let height, overflowAmt;\n      const prevHeight = latestMenuSize.current.height;\n      const bottomOverflow = getBottomOverflow(y);\n\n      if (bottomOverflow > 0 || floatEqual(bottomOverflow, 0) && floatEqual(menuHeight, prevHeight)) {\n        height = menuHeight - bottomOverflow;\n        overflowAmt = bottomOverflow;\n      } else {\n        const topOverflow = getTopOverflow(y);\n\n        if (topOverflow < 0 || floatEqual(topOverflow, 0) && floatEqual(menuHeight, prevHeight)) {\n          height = menuHeight + topOverflow;\n          overflowAmt = 0 - topOverflow;\n          if (height >= 0) y -= topOverflow;\n        }\n      }\n\n      if (height >= 0) {\n        menuHeight = height;\n        setOverflowData({\n          height,\n          overflowAmt\n        });\n      } else {\n        setOverflowData();\n      }\n    }\n\n    if (arrow) setArrowPosition({\n      x: arrowX,\n      y: arrowY\n    });\n    setMenuPosition({\n      x,\n      y\n    });\n    setExpandedDirection(computedDirection);\n    latestMenuSize.current = {\n      width: menuRect.width,\n      height: menuHeight\n    };\n  }, [arrow, anchorPoint, anchorRef, containerRef, boundingBoxRef, rootMenuRef, scrollingRef, overflow, positionHelpers, positionMenu, positionContextMenu]);\n  useIsomorphicLayoutEffect(() => {\n    if (isOpen) {\n      handlePosition();\n      if (latestOpen.current) forceReposSubmenu();\n    }\n\n    latestHandlePosition.current = handlePosition;\n  }, [isOpen, handlePosition, reposFlag]);\n  useIsomorphicLayoutEffect(() => {\n    if (overflowData && !descendOverflowRef.current) menuRef.current.scrollTop = 0;\n  }, [overflowData]);\n  useIsomorphicLayoutEffect(() => {\n    if (animation) {\n      if (isOpen) {\n        setClosing(false);\n      } else if (isOpen !== latestOpen.current) {\n        setClosing(true);\n      }\n    }\n\n    latestOpen.current = isOpen;\n  }, [animation, isOpen]);\n  useEffect(() => {\n    if (!isOpen) return;\n\n    if (!anchorScrollingRef.current && rootAnchorRef && rootAnchorRef.current.tagName) {\n      anchorScrollingRef.current = getScrollAncestor(rootAnchorRef.current);\n    }\n\n    const scrollCurrent = scrollingRef.current;\n    const menuScroll = scrollCurrent && scrollCurrent.addEventListener ? scrollCurrent : window;\n    const anchorScroll = anchorScrollingRef.current || menuScroll;\n    let scroll = viewScroll;\n    if (anchorScroll !== menuScroll && scroll === 'initial') scroll = 'auto';\n    if (scroll === 'initial') return;\n    if (scroll === 'auto' && overflow !== 'visible') scroll = 'close';\n\n    const handleScroll = () => {\n      if (scroll === 'auto') {\n        batchedUpdates(handlePosition);\n      } else {\n        safeCall(onClose, {\n          reason: CloseReason.SCROLL\n        });\n      }\n    };\n\n    const scrollObservers = anchorScroll !== menuScroll && viewScroll !== 'initial' ? [anchorScroll, menuScroll] : [anchorScroll];\n    scrollObservers.forEach(o => o.addEventListener('scroll', handleScroll));\n    return () => scrollObservers.forEach(o => o.removeEventListener('scroll', handleScroll));\n  }, [rootAnchorRef, anchorScrollingRef, scrollingRef, isOpen, overflow, onClose, viewScroll, handlePosition]);\n  useEffect(() => {\n    if (typeof ResizeObserver !== 'function' || reposition === 'initial') return;\n    const resizeObserver = new ResizeObserver(([entry]) => {\n      const {\n        borderBoxSize,\n        target\n      } = entry;\n      let width, height;\n\n      if (borderBoxSize) {\n        const {\n          inlineSize,\n          blockSize\n        } = borderBoxSize[0] || borderBoxSize;\n        width = inlineSize;\n        height = blockSize;\n      } else {\n        const borderRect = target.getBoundingClientRect();\n        width = borderRect.width;\n        height = borderRect.height;\n      }\n\n      if (width === 0 || height === 0) return;\n      if (floatEqual(width, latestMenuSize.current.width, 1) && floatEqual(height, latestMenuSize.current.height, 1)) return;\n      batchedUpdates(() => {\n        latestHandlePosition.current();\n        forceReposSubmenu();\n      });\n    });\n    const observeTarget = menuRef.current;\n    resizeObserver.observe(observeTarget, {\n      box: 'border-box'\n    });\n    return () => resizeObserver.unobserve(observeTarget);\n  }, [reposition]);\n  useEffect(() => {\n    if (!isOpen) {\n      dispatch({\n        type: HoverIndexActionTypes.RESET\n      });\n      if (!animation) setOverflowData();\n    }\n\n    const id = setTimeout(() => {\n      if (!isOpen || !menuRef.current || menuRef.current.contains(document.activeElement)) return;\n      if (captureFocus) menuRef.current.focus();\n\n      if (menuItemFocus.position === FocusPositions.FIRST) {\n        dispatch({\n          type: HoverIndexActionTypes.FIRST\n        });\n      } else if (menuItemFocus.position === FocusPositions.LAST) {\n        dispatch({\n          type: HoverIndexActionTypes.LAST\n        });\n      }\n    }, animation ? 170 : 100);\n    return () => clearTimeout(id);\n  }, [animation, captureFocus, isOpen, menuItemFocus]);\n  const isSubmenuOpen = openSubmenuCount > 0;\n  const itemContext = useMemo(() => ({\n    isParentOpen: isOpen,\n    hoverIndex,\n    isSubmenuOpen,\n    dispatch\n  }), [isOpen, hoverIndex, isSubmenuOpen]);\n  let maxHeight, overflowAmt;\n\n  if (overflowData) {\n    descendOverflowRef.current ? overflowAmt = overflowData.overflowAmt : maxHeight = overflowData.height;\n  }\n\n  const listContext = useMemo(() => ({\n    reposSubmenu,\n    overflow,\n    overflowAmt\n  }), [reposSubmenu, overflow, overflowAmt]);\n  const overflowStyles = maxHeight >= 0 ? {\n    maxHeight,\n    overflow\n  } : undefined;\n  const modifiers = {\n    open: isOpen,\n    closing: isClosing,\n    animation,\n    dir: animation && expandedDirection\n  };\n  const userModifiers = Object.freeze({ ...modifiers,\n    dir: expandedDirection\n  });\n  const arrowModifiers = Object.freeze({\n    dir: expandedDirection\n  });\n  const handlers = attachHandlerProps({\n    onKeyDown: handleKeyDown,\n    onAnimationEnd: handleAnimationEnd\n  }, restProps);\n  return /*#__PURE__*/React.createElement(\"ul\", Object.assign({\n    role: \"menu\",\n    tabIndex: \"-1\",\n    \"aria-disabled\": isDisabled || undefined,\n    \"aria-label\": ariaLabel\n  }, restProps, handlers, {\n    ref: menuRef,\n    className: bem(menuClass, null, modifiers)(className, userModifiers),\n    style: { ...flatStyles(styles, userModifiers),\n      ...overflowStyles,\n      left: `${menuPosition.x}px`,\n      top: `${menuPosition.y}px`\n    }\n  }), arrow && /*#__PURE__*/React.createElement(\"div\", {\n    className: bem(menuClass, menuArrowClass, arrowModifiers)(arrowClassName),\n    style: { ...flatStyles(arrowStyles, arrowModifiers),\n      left: arrowPosition.x && `${arrowPosition.x}px`,\n      top: arrowPosition.y && `${arrowPosition.y}px`\n    },\n    ref: arrowRef\n  }), /*#__PURE__*/React.createElement(MenuListContext.Provider, {\n    value: listContext\n  }, /*#__PURE__*/React.createElement(MenuListItemContext.Provider, {\n    value: itemContext\n  }, menuItems)));\n}), 'MenuList');\n\nfunction submenuCountReducer(state, {\n  type\n}) {\n  switch (type) {\n    case SubmenuActionTypes.OPEN:\n      return state + 1;\n\n    case SubmenuActionTypes.CLOSE:\n      return Math.max(state - 1, 0);\n\n    default:\n      return state;\n  }\n}\n\nconst useMenuList = (menuListProps, {\n  id,\n  animation,\n  boundingBoxRef,\n  boundingBoxPadding,\n  debugging,\n  reposition,\n  submenuOpenDelay,\n  submenuCloseDelay,\n  viewScroll,\n  portal,\n  theming,\n  isMounted,\n  onClick,\n  onClose,\n  skipClick\n}) => {\n  const containerRef = useRef(null);\n  const scrollingRef = useRef(null);\n  const anchorScrollingRef = useRef(null);\n  const {\n    anchorRef,\n    isOpen\n  } = menuListProps;\n  const settings = useMemo(() => ({\n    animation,\n    boundingBoxRef,\n    boundingBoxPadding,\n    rootMenuRef: containerRef,\n    rootAnchorRef: anchorRef,\n    scrollingRef,\n    anchorScrollingRef,\n    reposition,\n    viewScroll\n  }), [animation, anchorRef, boundingBoxRef, boundingBoxPadding, reposition, viewScroll]);\n  const itemSettings = useMemo(() => ({\n    debugging,\n    submenuOpenDelay,\n    submenuCloseDelay\n  }), [debugging, submenuOpenDelay, submenuCloseDelay]);\n  const eventHandlers = useMemo(() => ({\n    handleClick(event, isStopPropagation, isCheckorRadio) {\n      if (!isStopPropagation) safeCall(onClick, event);\n      let keepOpen = event.keepOpen;\n\n      if (keepOpen === undefined) {\n        keepOpen = isCheckorRadio && event.key === Keys.SPACE;\n      }\n\n      if (!keepOpen) {\n        safeCall(onClose, {\n          value: event.value,\n          key: event.key,\n          reason: CloseReason.CLICK\n        });\n      }\n    },\n\n    handleClose(key) {\n      safeCall(onClose, {\n        key,\n        reason: CloseReason.CLICK\n      });\n    }\n\n  }), [onClick, onClose]);\n\n  const handleKeyDown = ({\n    key\n  }) => {\n    switch (key) {\n      case Keys.ESC:\n        safeCall(onClose, {\n          key,\n          reason: CloseReason.CANCEL\n        });\n        break;\n    }\n  };\n\n  const handleBlur = e => {\n    if (isOpen && !e.currentTarget.contains(e.relatedTarget || document.activeElement) && !debugging) {\n      safeCall(onClose, {\n        reason: CloseReason.BLUR\n      });\n\n      if (skipClick) {\n        skipClick.current = true;\n        setTimeout(() => skipClick.current = false, 300);\n      }\n    }\n  };\n\n  const menuList = /*#__PURE__*/React.createElement(\"div\", {\n    id: id,\n    className: bem(menuContainerClass, null, {\n      theme: theming\n    })(),\n    ref: containerRef,\n    onKeyDown: handleKeyDown,\n    onBlur: handleBlur\n  }, isMounted && /*#__PURE__*/React.createElement(SettingsContext.Provider, {\n    value: settings\n  }, /*#__PURE__*/React.createElement(ItemSettingsContext.Provider, {\n    value: itemSettings\n  }, /*#__PURE__*/React.createElement(EventHandlersContext.Provider, {\n    value: eventHandlers\n  }, /*#__PURE__*/React.createElement(MenuList, Object.assign({}, menuListProps, {\n    containerRef: containerRef,\n    onClose: onClose\n  }))))));\n\n  if (portal) {\n    return /*#__PURE__*/ReactDOM.createPortal(menuList, document.body);\n  } else {\n    return menuList;\n  }\n};\n\nconst Menu = /*#__PURE__*/React.memo(function Menu({\n  'aria-label': ariaLabel,\n  id,\n  animation,\n  boundingBoxRef,\n  boundingBoxPadding,\n  captureFocus: _,\n  debugging,\n  reposition,\n  viewScroll,\n  keepMounted,\n  menuButton,\n  portal,\n  submenuOpenDelay,\n  submenuCloseDelay,\n  theming,\n  onClick,\n  onChange,\n  ...restProps\n}) {\n  const {\n    isMounted,\n    isOpen,\n    menuItemFocus,\n    openMenu,\n    closeMenu\n  } = useMenuState(keepMounted);\n  const skipClick = useRef(false);\n  const buttonRef = useRef(null);\n  const button = safeCall(menuButton, {\n    open: isOpen\n  });\n  if (!button) throw new Error('Menu requires a menuButton prop.');\n  const handleClose = useCallback(e => {\n    closeMenu();\n    if (e.key) buttonRef.current.focus();\n  }, [closeMenu]);\n  const handleClick = useCallback(e => {\n    if (skipClick.current) return;\n    openMenu(e.detail === 0 ? FocusPositions.FIRST : FocusPositions.INITIAL);\n  }, [openMenu]);\n  const handleKeyDown = useCallback(e => {\n    let handled = false;\n\n    switch (e.key) {\n      case Keys.UP:\n        openMenu(FocusPositions.LAST);\n        handled = true;\n        break;\n\n      case Keys.DOWN:\n        openMenu(FocusPositions.FIRST);\n        handled = true;\n        break;\n    }\n\n    if (handled) e.preventDefault();\n  }, [openMenu]);\n  const renderButton = useMemo(() => {\n    const buttonProps = {\n      ref: buttonRef,\n      ...attachHandlerProps({\n        onClick: handleClick,\n        onKeyDown: handleKeyDown\n      }, button.props)\n    };\n\n    if (getName(button.type) === 'MenuButton') {\n      buttonProps.isOpen = isOpen;\n    }\n\n    return /*#__PURE__*/React.cloneElement(button, buttonProps);\n  }, [button, isOpen, handleClick, handleKeyDown]);\n  const menuList = useMenuList({ ...restProps,\n    ariaLabel: ariaLabel || (typeof button.props.children === 'string' ? button.props.children : 'Menu'),\n    anchorRef: buttonRef,\n    isOpen,\n    menuItemFocus\n  }, {\n    id,\n    animation,\n    boundingBoxRef,\n    boundingBoxPadding,\n    debugging,\n    reposition,\n    submenuOpenDelay,\n    submenuCloseDelay,\n    viewScroll,\n    portal,\n    theming,\n    isMounted,\n    onClick,\n    onClose: handleClose,\n    skipClick\n  });\n  useMenuChange(onChange, isOpen);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, renderButton, menuList);\n});\nMenu.propTypes = { ...menuPropTypesBase,\n  keepMounted: PropTypes.bool,\n  menuButton: PropTypes.oneOfType([PropTypes.element, PropTypes.func]).isRequired,\n  onChange: PropTypes.func\n};\nMenu.defaultProps = { ...menuDefaultPropsBase,\n  keepMounted: true\n};\nconst ControlledMenu = /*#__PURE__*/React.memo(function ControlledMenu({\n  'aria-label': ariaLabel,\n  id,\n  animation,\n  boundingBoxRef,\n  boundingBoxPadding,\n  debugging,\n  reposition,\n  submenuOpenDelay,\n  submenuCloseDelay,\n  viewScroll,\n  portal,\n  theming,\n  isMounted,\n  onClick,\n  onClose,\n  ...restProps\n}) {\n  return useMenuList({ ...restProps,\n    ariaLabel: ariaLabel || 'Menu'\n  }, {\n    id,\n    animation,\n    boundingBoxRef,\n    boundingBoxPadding,\n    debugging,\n    reposition,\n    submenuOpenDelay,\n    submenuCloseDelay,\n    viewScroll,\n    portal,\n    theming,\n    isMounted,\n    onClick,\n    onClose\n  });\n});\nControlledMenu.propTypes = { ...menuPropTypesBase,\n  anchorPoint: PropTypes.exact({\n    x: PropTypes.number,\n    y: PropTypes.number\n  }),\n  anchorRef: PropTypes.object,\n  captureFocus: PropTypes.bool,\n  isOpen: PropTypes.bool,\n  isMounted: PropTypes.bool,\n  menuItemFocus: PropTypes.exact({\n    position: PropTypes.string\n  }),\n  onClose: PropTypes.func\n};\nControlledMenu.defaultProps = { ...menuDefaultPropsBase,\n  captureFocus: true,\n  isOpen: false,\n  isMounted: true,\n  menuItemFocus: {\n    position: FocusPositions.INITIAL\n  }\n};\nconst SubMenu = defineName( /*#__PURE__*/React.memo(function SubMenu({\n  'aria-label': ariaLabel,\n  itemClassName,\n  itemStyles,\n  disabled,\n  keepMounted,\n  label,\n  index,\n  onChange,\n  captureFocus: _1,\n  repositionFlag: _2,\n  ...restProps\n}) {\n  const {\n    isMounted,\n    isOpen,\n    menuItemFocus,\n    openMenu,\n    closeMenu\n  } = useMenuState(keepMounted);\n  const {\n    isParentOpen,\n    hoverIndex,\n    isSubmenuOpen,\n    dispatch\n  } = useContext(MenuListItemContext);\n  const {\n    debugging,\n    submenuOpenDelay,\n    submenuCloseDelay\n  } = useContext(ItemSettingsContext);\n  const isHovering = hoverIndex === index;\n  const isDisabled = Boolean(disabled);\n  const {\n    isActive,\n    onKeyUp,\n    ...activeStateHandlers\n  } = useActiveState(isHovering, isDisabled, Keys.RIGHT);\n  const containerRef = useRef(null);\n  const itemRef = useRef(null);\n  const timeoutId = useRef();\n  const handleClose = useCallback(() => {\n    closeMenu();\n    itemRef.current.focus();\n  }, [closeMenu]);\n\n  const delayOpen = delay => {\n    dispatch({\n      type: HoverIndexActionTypes.SET,\n      index\n    });\n    timeoutId.current = setTimeout(openMenu, Math.max(delay, 0));\n  };\n\n  const handleMouseEnter = () => {\n    if (isDisabled || isOpen) return;\n\n    if (isSubmenuOpen) {\n      timeoutId.current = setTimeout(() => delayOpen(submenuOpenDelay - submenuCloseDelay), submenuCloseDelay);\n    } else {\n      delayOpen(submenuOpenDelay);\n    }\n  };\n\n  const handleMouseLeave = () => {\n    clearTimeout(timeoutId.current);\n\n    if (!isOpen) {\n      dispatch({\n        type: HoverIndexActionTypes.UNSET,\n        index\n      });\n    }\n  };\n\n  const handleClick = () => {\n    if (isDisabled) return;\n    clearTimeout(timeoutId.current);\n    openMenu();\n  };\n\n  const handleKeyDown = e => {\n    let handled = false;\n\n    switch (e.key) {\n      case Keys.LEFT:\n        if (isOpen) {\n          handleClose();\n          handled = true;\n        }\n\n        break;\n\n      case Keys.RIGHT:\n        if (!isOpen) handled = true;\n        break;\n    }\n\n    if (handled) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  };\n\n  const handleKeyUp = e => {\n    if (!isActive) return;\n    onKeyUp(e);\n\n    switch (e.key) {\n      case Keys.SPACE:\n      case Keys.ENTER:\n      case Keys.RIGHT:\n        openMenu(FocusPositions.FIRST);\n        break;\n    }\n  };\n\n  const handleBlur = e => {\n    if (debugging) return;\n    const relatedTarget = e.relatedTarget || document.activeElement;\n\n    if (!e.currentTarget.contains(relatedTarget)) {\n      closeMenu();\n      dispatch({\n        type: HoverIndexActionTypes.UNSET,\n        index\n      });\n    }\n  };\n\n  useEffect(() => () => clearTimeout(timeoutId.current), []);\n  useEffect(() => {\n    if (isHovering && isParentOpen) {\n      itemRef.current.focus();\n    } else {\n      closeMenu();\n    }\n  }, [isHovering, isParentOpen, closeMenu]);\n  useEffect(() => {\n    dispatch({\n      type: isOpen ? SubmenuActionTypes.OPEN : SubmenuActionTypes.CLOSE\n    });\n  }, [dispatch, isOpen]);\n  useMenuChange(onChange, isOpen);\n  const modifiers = Object.freeze({\n    open: isOpen,\n    hover: isHovering,\n    active: isActive,\n    disabled: isDisabled\n  });\n  return /*#__PURE__*/React.createElement(\"li\", {\n    className: bem(menuClass, subMenuClass)(),\n    role: \"presentation\",\n    ref: containerRef,\n    onKeyDown: handleKeyDown,\n    onBlur: handleBlur\n  }, /*#__PURE__*/React.createElement(\"div\", Object.assign({\n    className: bem(menuClass, menuItemClass, modifiers)(itemClassName),\n    style: flatStyles(itemStyles, modifiers),\n    role: \"menuitem\",\n    \"aria-haspopup\": \"true\",\n    \"aria-expanded\": isOpen,\n    \"aria-disabled\": isDisabled || undefined,\n    tabIndex: isHovering && !isOpen ? 0 : -1,\n    ref: itemRef,\n    onMouseEnter: handleMouseEnter,\n    onMouseLeave: handleMouseLeave,\n    onMouseDown: () => !isHovering && dispatch({\n      type: HoverIndexActionTypes.SET,\n      index\n    }),\n    onClick: handleClick,\n    onKeyUp: handleKeyUp\n  }, activeStateHandlers), safeCall(label, modifiers)), isMounted && /*#__PURE__*/React.createElement(MenuList, Object.assign({}, restProps, {\n    ariaLabel: ariaLabel || (typeof label === 'string' ? label : 'Submenu'),\n    anchorRef: itemRef,\n    containerRef: containerRef,\n    isOpen: isOpen,\n    isDisabled: isDisabled,\n    menuItemFocus: menuItemFocus\n  })));\n}), 'SubMenu');\nSubMenu.propTypes = { ...sharedMenuPropTypes,\n  ...stylePropTypes('item'),\n  disabled: PropTypes.bool,\n  keepMounted: PropTypes.bool,\n  label: PropTypes.oneOfType([PropTypes.node, PropTypes.func]).isRequired,\n  onChange: PropTypes.func\n};\nSubMenu.defaultProps = { ...sharedMenuDefaultProp,\n  direction: 'right',\n  keepMounted: true\n};\nconst MenuItem = defineName( /*#__PURE__*/React.memo(function MenuItem({\n  className,\n  styles,\n  value,\n  href,\n  type,\n  checked,\n  disabled,\n  index,\n  children,\n  onClick,\n  ...restProps\n}) {\n  const isDisabled = Boolean(disabled);\n  const {\n    ref,\n    isHovering,\n    setHover,\n    onBlur,\n    onMouseEnter,\n    onMouseLeave\n  } = useItemState(isDisabled, index);\n  const eventHandlers = useContext(EventHandlersContext);\n  const radioGroup = useContext(RadioGroupContext);\n  const {\n    isActive,\n    onKeyUp,\n    onBlur: activeStateBlur,\n    ...activeStateHandlers\n  } = useActiveState(isHovering, isDisabled);\n  const isRadio = type === 'radio';\n  const isCheckBox = type === 'checkbox';\n  const isAnchor = Boolean(href) && !isDisabled && !isRadio && !isCheckBox;\n  const isChecked = isRadio ? radioGroup.value === value : isCheckBox ? Boolean(checked) : false;\n\n  const handleClick = key => {\n    if (isDisabled) return;\n    let isStopPropagation = false;\n    const event = {\n      value,\n      key\n    };\n\n    if (isRadio) {\n      event.name = radioGroup.name;\n      safeCall(radioGroup.onChange, event);\n    }\n\n    event.checked = isCheckBox ? !isChecked : false;\n    isStopPropagation = safeCall(onClick, event) === false;\n    eventHandlers.handleClick(event, isStopPropagation, isCheckBox || isRadio);\n  };\n\n  const handleKeyUp = e => {\n    if (!isActive) return;\n    onKeyUp(e);\n\n    switch (e.key) {\n      case Keys.SPACE:\n      case Keys.ENTER:\n        if (isAnchor) {\n          ref.current.click();\n        } else {\n          handleClick(e.key);\n        }\n\n        break;\n    }\n  };\n\n  const handleBlur = e => {\n    activeStateBlur(e);\n    onBlur(e);\n  };\n\n  const modifiers = Object.freeze({\n    type,\n    disabled: isDisabled,\n    hover: isHovering,\n    active: isActive,\n    checked: isChecked,\n    anchor: isAnchor\n  });\n  const handlers = attachHandlerProps({ ...activeStateHandlers,\n    onMouseEnter,\n    onMouseLeave,\n    onMouseDown: setHover,\n    onKeyUp: handleKeyUp,\n    onBlur: handleBlur,\n    onClick: () => handleClick()\n  }, restProps);\n  const menuItemProps = {\n    role: isRadio ? 'menuitemradio' : isCheckBox ? 'menuitemcheckbox' : 'menuitem',\n    'aria-checked': isRadio || isCheckBox ? isChecked : undefined,\n    'aria-disabled': isDisabled || undefined,\n    tabIndex: isHovering ? 0 : -1,\n    ...restProps,\n    ...handlers,\n    ref,\n    className: bem(menuClass, menuItemClass, modifiers)(className),\n    style: flatStyles(styles, modifiers)\n  };\n  const renderChildren = safeCall(children, modifiers);\n\n  if (isAnchor) {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      role: \"presentation\"\n    }, /*#__PURE__*/React.createElement(\"a\", Object.assign({}, menuItemProps, {\n      href: href\n    }), renderChildren));\n  } else {\n    return /*#__PURE__*/React.createElement(\"li\", menuItemProps, renderChildren);\n  }\n}), 'MenuItem');\nMenuItem.propTypes = { ...stylePropTypes(),\n  value: PropTypes.any,\n  href: PropTypes.string,\n  type: PropTypes.oneOf(['checkbox', 'radio']),\n  checked: PropTypes.bool,\n  disabled: PropTypes.bool,\n  children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]).isRequired,\n  onClick: PropTypes.func\n};\nconst FocusableItem = defineName( /*#__PURE__*/React.memo(function FocusableItem({\n  className,\n  styles,\n  disabled,\n  index,\n  children,\n  ...restProps\n}) {\n  const isDisabled = Boolean(disabled);\n  const {\n    ref,\n    isHovering,\n    setHover,\n    onBlur,\n    onMouseEnter,\n    onMouseLeave\n  } = useItemState(isDisabled, index);\n  const {\n    handleClose\n  } = useContext(EventHandlersContext);\n  const baseParams = {\n    disabled: isDisabled,\n    hover: isHovering\n  };\n  const modifiers = Object.freeze({ ...baseParams,\n    focusable: true\n  });\n  const renderChildren = safeCall(children, { ...baseParams,\n    ref,\n    closeMenu: handleClose\n  });\n  const handlers = attachHandlerProps({\n    onMouseEnter,\n    onMouseLeave: e => onMouseLeave(e, true),\n    onFocus: setHover,\n    onBlur\n  }, restProps);\n  return /*#__PURE__*/React.createElement(\"li\", Object.assign({\n    \"aria-disabled\": isDisabled || undefined,\n    role: \"menuitem\",\n    tabIndex: \"-1\"\n  }, restProps, handlers, {\n    className: bem(menuClass, menuItemClass, modifiers)(className),\n    style: flatStyles(styles, modifiers)\n  }), renderChildren);\n}), 'FocusableItem');\nFocusableItem.propTypes = { ...stylePropTypes(),\n  disabled: PropTypes.bool,\n  children: PropTypes.func.isRequired\n};\nconst MenuDivider = defineName( /*#__PURE__*/React.memo(function MenuDivider({\n  className,\n  styles,\n  ...restProps\n}) {\n  return /*#__PURE__*/React.createElement(\"li\", Object.assign({\n    role: \"separator\"\n  }, restProps, {\n    className: bem(menuClass, menuDividerClass)(className),\n    style: flatStyles(styles)\n  }));\n}), 'MenuDivider');\nMenuDivider.propTypes = { ...stylePropTypes()\n};\nconst MenuHeader = defineName( /*#__PURE__*/React.memo(function MenuHeader({\n  className,\n  styles,\n  ...restProps\n}) {\n  return /*#__PURE__*/React.createElement(\"li\", Object.assign({\n    role: \"presentation\"\n  }, restProps, {\n    className: bem(menuClass, menuHeaderClass)(className),\n    style: flatStyles(styles)\n  }));\n}), 'MenuHeader');\nMenuHeader.propTypes = { ...stylePropTypes()\n};\nconst MenuGroup = defineName( /*#__PURE__*/React.memo(function MenuGroup({\n  className,\n  styles,\n  takeOverflow,\n  ...restProps\n}) {\n  const ref = useRef(null);\n  const [overflowStyles, setOverflowStyles] = useState();\n  const {\n    overflow,\n    overflowAmt\n  } = useContext(MenuListContext);\n  useIsomorphicLayoutEffect(() => {\n    let maxHeight;\n\n    if (takeOverflow && overflowAmt >= 0) {\n      maxHeight = ref.current.getBoundingClientRect().height - overflowAmt;\n      if (maxHeight < 0) maxHeight = 0;\n    }\n\n    setOverflowStyles(maxHeight >= 0 ? {\n      maxHeight,\n      overflow\n    } : undefined);\n  }, [takeOverflow, overflow, overflowAmt]);\n  useIsomorphicLayoutEffect(() => {\n    if (overflowStyles) ref.current.scrollTop = 0;\n  }, [overflowStyles]);\n  return /*#__PURE__*/React.createElement(\"div\", Object.assign({\n    ref: ref\n  }, restProps, {\n    className: bem(menuClass, menuGroupClass)(className),\n    style: { ...flatStyles(styles),\n      ...overflowStyles\n    }\n  }));\n}), 'MenuGroup');\nMenuGroup.propTypes = { ...stylePropTypes(),\n  takeOverflow: PropTypes.bool\n};\nconst MenuRadioGroup = defineName( /*#__PURE__*/React.memo(function MenuRadioGroup({\n  'aria-label': ariaLabel,\n  className,\n  styles,\n  name,\n  value,\n  children,\n  onChange,\n  ...restProps\n}) {\n  const contextValue = useMemo(() => ({\n    name,\n    value,\n    onChange\n  }), [name, value, onChange]);\n  return /*#__PURE__*/React.createElement(\"li\", {\n    role: \"presentation\"\n  }, /*#__PURE__*/React.createElement(\"ul\", Object.assign({\n    role: \"group\",\n    \"aria-label\": ariaLabel || name || 'Radio group'\n  }, restProps, {\n    className: bem(menuClass, radioGroupClass)(className),\n    style: flatStyles(styles)\n  }), /*#__PURE__*/React.createElement(RadioGroupContext.Provider, {\n    value: contextValue\n  }, children)));\n}), 'MenuRadioGroup');\nMenuRadioGroup.propTypes = { ...stylePropTypes(),\n  'aria-label': PropTypes.string,\n  name: PropTypes.string,\n  value: PropTypes.any,\n  children: PropTypes.node.isRequired,\n  onChange: PropTypes.func\n};\nexport { ControlledMenu, FocusableItem, Menu, MenuButton, MenuDivider, MenuGroup, MenuHeader, MenuItem, MenuRadioGroup, SubMenu, applyHOC, applyStatics, useMenuState };","map":{"version":3,"sources":["/home/sajish/Documents/Sajish/ULCA/ULCA/frontend/webapp/node_modules/@szhsin/react-menu/dist/index.modern.js"],"names":["React","useCallback","useState","useMemo","useRef","useContext","useEffect","useReducer","useLayoutEffect","ReactDOM","unstable_batchedUpdates","PropTypes","menuContainerClass","menuClass","menuButtonClass","menuArrowClass","menuItemClass","menuDividerClass","menuHeaderClass","menuGroupClass","subMenuClass","radioGroupClass","initialHoverIndex","MenuListItemContext","createContext","MenuListContext","EventHandlersContext","RadioGroupContext","SettingsContext","ItemSettingsContext","Keys","Object","freeze","HoverIndexActionTypes","SubmenuActionTypes","CloseReason","batchedUpdates","callback","defineName","component","name","defineProperty","value","writable","getName","applyHOC","HOC","args","applyStatics","sourceComponent","wrappedComponent","safeCall","fn","attachHandlerProps","handlers","props","result","handlerName","keys","handler","propHandler","attachedHandler","e","parsePadding","paddingStr","top","right","bottom","left","padding","trim","split","map","parseFloat","isNaN","bem","block","element","modifiers","userClassName","userModifiers","blockElement","className","isObject","obj","sanitiseKey","key","charAt","slice","flatStyles","styles","undefined","style","prop","modifierValue","nestedProp","nestedValue","assign","getScrollAncestor","node","document","body","overflow","overflowX","overflowY","getComputedStyle","test","parentNode","window","floatEqual","a","b","diff","Math","abs","isProd","process","env","NODE_ENV","validateChildren","parent","child","permitted","includes","type","console","warn","join","cloneChildren","children","startIndex","index","descendOverflow","permittedChildren","items","Children","radioItems","radioChild","disabled","cloneElement","endIndex","descOverflow","takeOverflow","Boolean","Error","stylePropTypes","oneOfType","string","func","object","sharedMenuPropTypes","arrow","bool","offsetX","number","offsetY","align","oneOf","direction","position","isRequired","menuPropTypesBase","id","animation","debugging","boundingBoxRef","boundingBoxPadding","reposition","repositionFlag","viewScroll","submenuOpenDelay","submenuCloseDelay","portal","theming","onClick","sharedMenuDefaultProp","menuDefaultPropsBase","useActiveState","isHovering","isDisabled","customKey","active","setActive","activeKeys","SPACE","ENTER","cancelActive","isActive","onPointerDown","onPointerUp","onPointerLeave","onKeyDown","onKeyUp","onBlur","currentTarget","contains","relatedTarget","useItemState","ref","isParentOpen","hoverIndex","isSubmenuOpen","dispatch","timeoutId","setHover","SET","UNSET","onMouseEnter","current","setTimeout","onMouseLeave","_","keepHover","clearTimeout","focus","useMenuChange","onChange","isOpen","prevOpen","open","FocusPositions","MenuStates","MenuStateActionType","useMenuState","keepMounted","menuItemFocus","setMenuItemFocus","INITIAL","menuState","menuStateReducer","UNMOUNTED","state","OPEN","CLOSE","CLOSED","TOGGLE","isMounted","openMenu","closeMenu","toggleMenu","useIsomorphicLayoutEffect","createElement","MenuButton","memo","forwardRef","restProps","propTypes","MenuList","ariaLabel","arrowClassName","arrowStyles","anchorPoint","anchorRef","containerRef","captureFocus","onClose","menuPosition","setMenuPosition","x","y","arrowPosition","setArrowPosition","overflowData","setOverflowData","isClosing","setClosing","expandedDirection","setExpandedDirection","rootMenuRef","rootAnchorRef","scrollingRef","anchorScrollingRef","menuRef","arrowRef","menuItemsCount","latestOpen","latestMenuSize","width","height","latestHandlePosition","descendOverflowRef","reposFlag","reposSubmenu","forceReposSubmenu","c","openSubmenuCount","reducer","action","hoverIndexReducer","submenuCountReducer","RESET","DECREASE","i","INCREASE","FIRST","LAST","menuItems","handleKeyDown","handled","HOME","END","UP","DOWN","target","preventDefault","stopPropagation","handleAnimationEnd","positionHelpers","menuRect","getBoundingClientRect","containerRect","boundingRect","documentElement","clientWidth","innerHeight","getLeftOverflow","getRightOverflow","getTopOverflow","getBottomOverflow","confineHorizontally","leftOverflow","rightOverflow","confineVertically","topOverflow","bottomOverflow","placeArrowX","menuX","anchorRect","offset","offsetWidth","max","min","placeArrowY","menuY","offsetHeight","placeLeftorRight","placeLeftorRightY","placeLeftX","placeRightX","computedDirection","arrowY","placeToporBottom","placeToporBottomX","placeTopY","placeBottomY","arrowX","positionMenu","helpers","horizontalOffset","verticalOffset","rects","placements","positionContextMenu","adjustedX","adjustedY","handlePosition","results","menuHeight","overflowAmt","prevHeight","scrollTop","tagName","scrollCurrent","menuScroll","addEventListener","anchorScroll","scroll","handleScroll","reason","SCROLL","scrollObservers","forEach","o","removeEventListener","ResizeObserver","resizeObserver","entry","borderBoxSize","inlineSize","blockSize","borderRect","observeTarget","observe","box","unobserve","activeElement","itemContext","maxHeight","listContext","overflowStyles","closing","dir","arrowModifiers","onAnimationEnd","role","tabIndex","Provider","useMenuList","menuListProps","skipClick","settings","itemSettings","eventHandlers","handleClick","event","isStopPropagation","isCheckorRadio","keepOpen","CLICK","handleClose","ESC","CANCEL","handleBlur","BLUR","menuList","theme","createPortal","Menu","menuButton","buttonRef","button","detail","renderButton","buttonProps","Fragment","defaultProps","ControlledMenu","exact","SubMenu","itemClassName","itemStyles","label","_1","_2","activeStateHandlers","RIGHT","itemRef","delayOpen","delay","handleMouseEnter","handleMouseLeave","LEFT","handleKeyUp","hover","onMouseDown","MenuItem","href","checked","radioGroup","activeStateBlur","isRadio","isCheckBox","isAnchor","isChecked","click","anchor","menuItemProps","renderChildren","any","FocusableItem","baseParams","focusable","onFocus","MenuDivider","MenuHeader","MenuGroup","setOverflowStyles","MenuRadioGroup","contextValue"],"mappings":"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","sourcesContent":["import React, { useCallback, useState, useMemo, useRef, useContext, useEffect, useReducer, useLayoutEffect } from 'react';\nimport ReactDOM, { unstable_batchedUpdates } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nconst menuContainerClass = 'rc-menu-container';\nconst menuClass = 'rc-menu';\nconst menuButtonClass = 'rc-menu-button';\nconst menuArrowClass = 'arrow';\nconst menuItemClass = 'item';\nconst menuDividerClass = 'divider';\nconst menuHeaderClass = 'header';\nconst menuGroupClass = 'group';\nconst subMenuClass = 'submenu';\nconst radioGroupClass = 'radio-group';\nconst initialHoverIndex = -1;\nconst MenuListItemContext = /*#__PURE__*/React.createContext({});\nconst MenuListContext = /*#__PURE__*/React.createContext({});\nconst EventHandlersContext = /*#__PURE__*/React.createContext({});\nconst RadioGroupContext = /*#__PURE__*/React.createContext({});\nconst SettingsContext = /*#__PURE__*/React.createContext({});\nconst ItemSettingsContext = /*#__PURE__*/React.createContext({});\nconst Keys = Object.freeze({\n  'ENTER': 'Enter',\n  'ESC': 'Escape',\n  'SPACE': ' ',\n  'HOME': 'Home',\n  'END': 'End',\n  'LEFT': 'ArrowLeft',\n  'RIGHT': 'ArrowRight',\n  'UP': 'ArrowUp',\n  'DOWN': 'ArrowDown'\n});\nconst HoverIndexActionTypes = Object.freeze({\n  'RESET': 'HOVER_INDEX_RESET',\n  'SET': 'HOVER_INDEX_SET',\n  'UNSET': 'HOVER_INDEX_UNSET',\n  'INCREASE': 'HOVER_INDEX_INCREASE',\n  'DECREASE': 'HOVER_INDEX_DECREASE',\n  'FIRST': 'HOVER_INDEX_FIRST',\n  'LAST': 'HOVER_INDEX_LAST'\n});\nconst SubmenuActionTypes = Object.freeze({\n  'OPEN': 'SUBMENU_OPEN',\n  'CLOSE': 'SUBMENU_CLOSE'\n});\nconst CloseReason = Object.freeze({\n  'CLICK': 'click',\n  'CANCEL': 'cancel',\n  'BLUR': 'blur',\n  'SCROLL': 'scroll'\n});\n\nconst batchedUpdates = unstable_batchedUpdates || (callback => callback());\nconst defineName = (component, name) => name ? Object.defineProperty(component, '_reactMenu', {\n  value: name,\n  writable: false\n}) : component;\nconst getName = component => component && component['_reactMenu'];\nconst applyHOC = HOC => (...args) => defineName(HOC(...args), getName(args[0]));\nconst applyStatics = sourceComponent => wrappedComponent => defineName(wrappedComponent, getName(sourceComponent));\nconst safeCall = (fn, ...args) => typeof fn === 'function' ? fn(...args) : fn;\nconst attachHandlerProps = (handlers, props) => {\n  const result = {};\n\n  for (const handlerName of Object.keys(handlers)) {\n    const handler = handlers[handlerName];\n    const propHandler = props[handlerName];\n    let attachedHandler;\n\n    if (typeof propHandler === 'function') {\n      attachedHandler = e => {\n        propHandler(e);\n        handler(e);\n      };\n    } else {\n      attachedHandler = handler;\n    }\n\n    result[handlerName] = attachedHandler;\n  }\n\n  return result;\n};\nconst parsePadding = paddingStr => {\n  if (typeof paddingStr !== 'string') return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  };\n  const padding = paddingStr.trim().split(/\\s+/, 4).map(parseFloat);\n  const top = !isNaN(padding[0]) ? padding[0] : 0;\n  const right = !isNaN(padding[1]) ? padding[1] : top;\n  return {\n    top,\n    right,\n    bottom: !isNaN(padding[2]) ? padding[2] : top,\n    left: !isNaN(padding[3]) ? padding[3] : right\n  };\n};\nconst bem = (block, element, modifiers = {}) => (userClassName, userModifiers) => {\n  let blockElement = element ? `${block}__${element}` : block;\n  let className = blockElement;\n\n  for (const name of Object.keys(modifiers)) {\n    const value = modifiers[name];\n\n    if (value) {\n      className += ` ${blockElement}--`;\n      className += value === true ? name : `${name}-${value}`;\n    }\n  }\n\n  if (typeof userClassName === 'function') {\n    userClassName = userClassName(userModifiers || modifiers);\n  }\n\n  if (typeof userClassName === 'string') {\n    userClassName = userClassName.trim();\n    if (userClassName) className += ` ${userClassName}`;\n  }\n\n  return className;\n};\n\nconst isObject = obj => obj && typeof obj === 'object';\n\nconst sanitiseKey = key => key.charAt(0) === '$' ? key.slice(1) : key;\n\nconst flatStyles = (styles, modifiers) => {\n  if (typeof styles === 'function') return styles(modifiers);\n  if (!isObject(styles)) return undefined;\n  if (!modifiers) return styles;\n  const style = {};\n\n  for (const prop of Object.keys(styles)) {\n    const value = styles[prop];\n\n    if (isObject(value)) {\n      const modifierValue = modifiers[sanitiseKey(prop)];\n\n      if (typeof modifierValue === 'string') {\n        for (const nestedProp of Object.keys(value)) {\n          const nestedValue = value[nestedProp];\n\n          if (isObject(nestedValue)) {\n            if (sanitiseKey(nestedProp) === modifierValue) {\n              Object.assign(style, nestedValue);\n            }\n          } else {\n            style[nestedProp] = nestedValue;\n          }\n        }\n      } else if (modifierValue) {\n        Object.assign(style, value);\n      }\n    } else {\n      style[prop] = value;\n    }\n  }\n\n  return style;\n};\nconst getScrollAncestor = node => {\n  while (node && node !== document.body) {\n    const {\n      overflow,\n      overflowX,\n      overflowY\n    } = getComputedStyle(node);\n    if (/auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX)) return node;\n    node = node.parentNode;\n  }\n\n  return window;\n};\nconst floatEqual = (a, b, diff = 0.0001) => Math.abs(a - b) < diff;\nconst isProd = process.env.NODE_ENV === 'production';\n\nconst validateChildren = (parent, child, permitted) => {\n  if (!child) return false;\n\n  if (!permitted.includes(getName(child.type))) {\n    !isProd && console.warn(`[react-menu] ${child.type || child} is ignored.\\n`, `The permitted children inside a ${parent} are ${permitted.join(', ')}.`, 'If you create HOC of these components, you can use the applyHOC or applyStatics helper, see more at: https://szhsin.github.io/react-menu/docs#utils-apply-hoc');\n    return false;\n  }\n\n  return true;\n};\n\nconst cloneChildren = (children, startIndex = 0) => {\n  let index = startIndex;\n  let descendOverflow = false;\n  const permittedChildren = ['MenuDivider', 'MenuGroup', 'MenuHeader', 'MenuItem', 'FocusableItem', 'MenuRadioGroup', 'SubMenu'];\n  const items = React.Children.map(children, child => {\n    if (!validateChildren('Menu or SubMenu', child, permittedChildren)) return null;\n\n    switch (getName(child.type)) {\n      case 'MenuDivider':\n      case 'MenuHeader':\n        return child;\n\n      case 'MenuRadioGroup':\n        {\n          const permittedChildren = ['MenuItem'];\n          const props = {\n            type: 'radio'\n          };\n          const radioItems = React.Children.map(child.props.children, radioChild => {\n            if (!validateChildren('MenuRadioGroup', radioChild, permittedChildren)) return null;\n            return radioChild.props.disabled ? /*#__PURE__*/React.cloneElement(radioChild, props) : /*#__PURE__*/React.cloneElement(radioChild, { ...props,\n              index: index++\n            });\n          });\n          return /*#__PURE__*/React.cloneElement(child, {\n            children: radioItems\n          });\n        }\n\n      case 'MenuGroup':\n        {\n          const {\n            items,\n            endIndex,\n            descendOverflow: descOverflow\n          } = cloneChildren(child.props.children, index);\n          index = endIndex;\n          const takeOverflow = Boolean(child.props.takeOverflow);\n          if (!isProd && (descendOverflow === descOverflow ? descOverflow : takeOverflow)) throw new Error('[react-menu] Only one MenuGroup in a menu is allowed to have takeOverflow prop.');\n          descendOverflow = descendOverflow || descOverflow || takeOverflow;\n          return /*#__PURE__*/React.cloneElement(child, {\n            children: items\n          });\n        }\n\n      default:\n        return child.props.disabled ? child : /*#__PURE__*/React.cloneElement(child, {\n          index: index++\n        });\n    }\n  });\n  return {\n    items,\n    endIndex: index,\n    descendOverflow\n  };\n};\n\nconst stylePropTypes = name => ({\n  [name ? `${name}ClassName` : 'className']: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  [name ? `${name}Styles` : 'styles']: PropTypes.oneOfType([PropTypes.object, PropTypes.func])\n});\nconst sharedMenuPropTypes = { ...stylePropTypes(),\n  ...stylePropTypes('arrow'),\n  'aria-label': PropTypes.string,\n  arrow: PropTypes.bool,\n  offsetX: PropTypes.number,\n  offsetY: PropTypes.number,\n  align: PropTypes.oneOf(['start', 'center', 'end']),\n  direction: PropTypes.oneOf(['left', 'right', 'top', 'bottom']),\n  position: PropTypes.oneOf(['auto', 'anchor', 'initial']),\n  overflow: PropTypes.oneOf(['auto', 'visible', 'hidden']),\n  children: PropTypes.node.isRequired\n};\nconst menuPropTypesBase = { ...sharedMenuPropTypes,\n  id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  animation: PropTypes.bool,\n  debugging: PropTypes.bool,\n  boundingBoxRef: PropTypes.object,\n  boundingBoxPadding: PropTypes.string,\n  reposition: PropTypes.oneOf(['auto', 'initial']),\n  repositionFlag: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  viewScroll: PropTypes.oneOf(['auto', 'close', 'initial']),\n  submenuOpenDelay: PropTypes.number,\n  submenuCloseDelay: PropTypes.number,\n  portal: PropTypes.bool,\n  theming: PropTypes.string,\n  onClick: PropTypes.func\n};\nconst sharedMenuDefaultProp = {\n  offsetX: 0,\n  offsetY: 0,\n  align: 'start',\n  direction: 'bottom',\n  position: 'auto',\n  overflow: 'visible'\n};\nconst menuDefaultPropsBase = { ...sharedMenuDefaultProp,\n  animation: true,\n  reposition: 'auto',\n  viewScroll: 'initial',\n  submenuOpenDelay: 300,\n  submenuCloseDelay: 150\n};\n\nconst useActiveState = (isHovering, isDisabled, customKey) => {\n  const [active, setActive] = useState(false);\n  const activeKeys = useMemo(() => [Keys.SPACE, Keys.ENTER, ...(customKey ? [customKey] : [])], [customKey]);\n  const cancelActive = useCallback(() => setActive(false), []);\n  return {\n    isActive: active,\n    onPointerDown: useCallback(() => {\n      if (!isDisabled) setActive(true);\n    }, [isDisabled]),\n    onPointerUp: cancelActive,\n    onPointerLeave: cancelActive,\n    onKeyDown: useCallback(e => {\n      if (isHovering && !isDisabled && activeKeys.includes(e.key)) {\n        setActive(true);\n      }\n    }, [isHovering, isDisabled, activeKeys]),\n    onKeyUp: useCallback(e => {\n      if (activeKeys.includes(e.key)) {\n        setActive(false);\n      }\n    }, [activeKeys]),\n    onBlur: useCallback(e => {\n      if (!e.currentTarget.contains(e.relatedTarget)) {\n        setActive(false);\n      }\n    }, [])\n  };\n};\n\nconst useItemState = (isDisabled, index) => {\n  const ref = useRef(null);\n  const {\n    submenuCloseDelay\n  } = useContext(ItemSettingsContext);\n  const {\n    isParentOpen,\n    hoverIndex,\n    isSubmenuOpen,\n    dispatch\n  } = useContext(MenuListItemContext);\n  const isHovering = hoverIndex === index;\n  const timeoutId = useRef();\n  const setHover = useCallback(() => {\n    if (!isDisabled) dispatch({\n      type: HoverIndexActionTypes.SET,\n      index\n    });\n  }, [isDisabled, dispatch, index]);\n  const onBlur = useCallback(e => {\n    if (!e.currentTarget.contains(e.relatedTarget)) {\n      dispatch({\n        type: HoverIndexActionTypes.UNSET,\n        index\n      });\n    }\n  }, [dispatch, index]);\n  const onMouseEnter = useCallback(() => {\n    if (isSubmenuOpen) {\n      timeoutId.current = setTimeout(setHover, submenuCloseDelay);\n    } else {\n      setHover();\n    }\n  }, [isSubmenuOpen, submenuCloseDelay, setHover]);\n  const onMouseLeave = useCallback((_, keepHover) => {\n    timeoutId.current && clearTimeout(timeoutId.current);\n    if (!keepHover) dispatch({\n      type: HoverIndexActionTypes.UNSET,\n      index\n    });\n  }, [dispatch, index]);\n  useEffect(() => () => clearTimeout(timeoutId.current), []);\n  useEffect(() => {\n    if (isHovering && isParentOpen) {\n      ref.current && ref.current.focus();\n    }\n  }, [isHovering, isParentOpen]);\n  return {\n    ref,\n    isHovering,\n    setHover,\n    onBlur,\n    onMouseEnter,\n    onMouseLeave\n  };\n};\n\nconst useMenuChange = (onChange, isOpen) => {\n  const prevOpen = useRef(isOpen);\n  useEffect(() => {\n    if (prevOpen.current !== isOpen) safeCall(onChange, {\n      open: isOpen\n    });\n    prevOpen.current = isOpen;\n  }, [onChange, isOpen]);\n};\n\nconst FocusPositions = Object.freeze({\n  'INITIAL': 'initial',\n  'FIRST': 'first',\n  'LAST': 'last'\n});\nconst MenuStates = Object.freeze({\n  'UNMOUNTED': 0,\n  'CLOSED': 1,\n  'OPEN': 2\n});\nconst MenuStateActionType = Object.freeze({\n  'OPEN': 0,\n  'CLOSE': 1,\n  'TOGGLE': 2\n});\nconst useMenuState = (keepMounted = true) => {\n  const [menuItemFocus, setMenuItemFocus] = useState({\n    position: FocusPositions.INITIAL\n  });\n  const [menuState, dispatch] = useReducer(menuStateReducer, MenuStates.UNMOUNTED);\n\n  function menuStateReducer(state, {\n    type\n  }) {\n    switch (type) {\n      case MenuStateActionType.OPEN:\n        return MenuStates.OPEN;\n\n      case MenuStateActionType.CLOSE:\n        if (state === MenuStates.OPEN) {\n          return keepMounted ? MenuStates.CLOSED : MenuStates.UNMOUNTED;\n        } else {\n          return state;\n        }\n\n      case MenuStateActionType.TOGGLE:\n        if (state === MenuStates.OPEN) {\n          return keepMounted ? MenuStates.CLOSED : MenuStates.UNMOUNTED;\n        } else {\n          return MenuStates.OPEN;\n        }\n\n      default:\n        throw new Error('menuStateReducer: unknown action type');\n    }\n  }\n\n  return {\n    isMounted: menuState !== MenuStates.UNMOUNTED,\n    isOpen: menuState === MenuStates.OPEN,\n    menuItemFocus,\n    openMenu: useCallback((menuItemFocus = FocusPositions.INITIAL) => {\n      setMenuItemFocus({\n        position: menuItemFocus\n      });\n      dispatch({\n        type: MenuStateActionType.OPEN\n      });\n    }, []),\n    closeMenu: useCallback(() => dispatch({\n      type: MenuStateActionType.CLOSE\n    }), []),\n    toggleMenu: useCallback((menuItemFocus = FocusPositions.INITIAL) => {\n      setMenuItemFocus({\n        position: menuItemFocus\n      });\n      dispatch({\n        type: MenuStateActionType.TOGGLE\n      });\n    }, [])\n  };\n};\n\nconst useIsomorphicLayoutEffect = typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined' ? useLayoutEffect : useEffect;\n\nconst MenuButton = defineName( /*#__PURE__*/React.memo( /*#__PURE__*/React.forwardRef(function MenuButton({\n  className,\n  styles,\n  isOpen,\n  disabled,\n  children,\n  ...restProps\n}, ref) {\n  const modifiers = Object.freeze({\n    open: isOpen\n  });\n  return /*#__PURE__*/React.createElement(\"button\", Object.assign({\n    \"aria-haspopup\": \"true\",\n    \"aria-expanded\": isOpen,\n    \"aria-disabled\": disabled || undefined,\n    disabled: disabled\n  }, restProps, {\n    ref: ref,\n    className: bem(menuButtonClass, null, modifiers)(className),\n    style: flatStyles(styles, modifiers)\n  }), children);\n})), 'MenuButton');\nMenuButton.propTypes = { ...stylePropTypes(),\n  isOpen: PropTypes.bool,\n  disabled: PropTypes.bool,\n  children: PropTypes.node.isRequired,\n  onClick: PropTypes.func,\n  onKeyDown: PropTypes.func\n};\n\nconst MenuList = defineName( /*#__PURE__*/React.memo(function MenuList({\n  ariaLabel,\n  className,\n  styles,\n  arrowClassName,\n  arrowStyles,\n  anchorPoint,\n  anchorRef,\n  containerRef,\n  arrow,\n  align,\n  direction,\n  position,\n  overflow,\n  repositionFlag,\n  captureFocus = true,\n  isOpen,\n  isDisabled,\n  menuItemFocus,\n  offsetX,\n  offsetY,\n  children,\n  onClose,\n  ...restProps\n}) {\n  const [menuPosition, setMenuPosition] = useState({\n    x: 0,\n    y: 0\n  });\n  const [arrowPosition, setArrowPosition] = useState({});\n  const [overflowData, setOverflowData] = useState();\n  const [isClosing, setClosing] = useState(false);\n  const [expandedDirection, setExpandedDirection] = useState(direction);\n  const {\n    animation,\n    boundingBoxRef,\n    boundingBoxPadding,\n    rootMenuRef,\n    rootAnchorRef,\n    scrollingRef,\n    anchorScrollingRef,\n    reposition,\n    viewScroll\n  } = useContext(SettingsContext);\n  const menuRef = useRef(null);\n  const arrowRef = useRef(null);\n  const menuItemsCount = useRef(0);\n  const latestOpen = useRef(isOpen);\n  const latestMenuSize = useRef({\n    width: 0,\n    height: 0\n  });\n  const latestHandlePosition = useRef(() => {});\n  const descendOverflowRef = useRef(false);\n  const reposFlag = useContext(MenuListContext).reposSubmenu || repositionFlag;\n  const [reposSubmenu, forceReposSubmenu] = useReducer(c => c + 1, 1);\n  const [{\n    hoverIndex,\n    openSubmenuCount\n  }, dispatch] = useReducer(reducer, {\n    hoverIndex: initialHoverIndex,\n    openSubmenuCount: 0\n  });\n\n  function reducer({\n    hoverIndex,\n    openSubmenuCount\n  }, action) {\n    return {\n      hoverIndex: hoverIndexReducer(hoverIndex, action),\n      openSubmenuCount: submenuCountReducer(openSubmenuCount, action)\n    };\n  }\n\n  function hoverIndexReducer(state, {\n    type,\n    index\n  }) {\n    switch (type) {\n      case HoverIndexActionTypes.RESET:\n        return initialHoverIndex;\n\n      case HoverIndexActionTypes.SET:\n        return index;\n\n      case HoverIndexActionTypes.UNSET:\n        return state === index ? initialHoverIndex : state;\n\n      case HoverIndexActionTypes.DECREASE:\n        {\n          let i = state;\n          i--;\n          if (i < 0) i = menuItemsCount.current - 1;\n          return i;\n        }\n\n      case HoverIndexActionTypes.INCREASE:\n        {\n          let i = state;\n          i++;\n          if (i >= menuItemsCount.current) i = 0;\n          return i;\n        }\n\n      case HoverIndexActionTypes.FIRST:\n        return menuItemsCount.current > 0 ? 0 : initialHoverIndex;\n\n      case HoverIndexActionTypes.LAST:\n        return menuItemsCount.current > 0 ? menuItemsCount.current - 1 : initialHoverIndex;\n\n      default:\n        return state;\n    }\n  }\n\n  const menuItems = useMemo(() => {\n    const {\n      items,\n      endIndex,\n      descendOverflow\n    } = cloneChildren(children);\n    menuItemsCount.current = endIndex;\n    descendOverflowRef.current = descendOverflow;\n    return items;\n  }, [children]);\n\n  const handleKeyDown = e => {\n    let handled = false;\n\n    switch (e.key) {\n      case Keys.HOME:\n        dispatch({\n          type: HoverIndexActionTypes.FIRST\n        });\n        handled = true;\n        break;\n\n      case Keys.END:\n        dispatch({\n          type: HoverIndexActionTypes.LAST\n        });\n        handled = true;\n        break;\n\n      case Keys.UP:\n        dispatch({\n          type: HoverIndexActionTypes.DECREASE\n        });\n        handled = true;\n        break;\n\n      case Keys.DOWN:\n        dispatch({\n          type: HoverIndexActionTypes.INCREASE\n        });\n        handled = true;\n        break;\n\n      case Keys.SPACE:\n        if (e.target && e.target.className.includes(menuClass)) {\n          e.preventDefault();\n        }\n\n        break;\n    }\n\n    if (handled) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  };\n\n  const handleAnimationEnd = () => {\n    if (isClosing) {\n      setClosing(false);\n      setOverflowData();\n    }\n  };\n\n  const positionHelpers = useCallback(() => {\n    const menuRect = menuRef.current.getBoundingClientRect();\n    const containerRect = containerRef.current.getBoundingClientRect();\n    const boundingRect = scrollingRef.current === window ? {\n      left: 0,\n      top: 0,\n      right: document.documentElement.clientWidth,\n      bottom: window.innerHeight\n    } : scrollingRef.current.getBoundingClientRect();\n    const padding = parsePadding(boundingBoxPadding);\n\n    const getLeftOverflow = x => x + containerRect.left - boundingRect.left - padding.left;\n\n    const getRightOverflow = x => x + containerRect.left + menuRect.width - boundingRect.right + padding.right;\n\n    const getTopOverflow = y => y + containerRect.top - boundingRect.top - padding.top;\n\n    const getBottomOverflow = y => y + containerRect.top + menuRect.height - boundingRect.bottom + padding.bottom;\n\n    const confineHorizontally = x => {\n      let leftOverflow = getLeftOverflow(x);\n\n      if (leftOverflow < 0) {\n        x -= leftOverflow;\n      } else {\n        const rightOverflow = getRightOverflow(x);\n\n        if (rightOverflow > 0) {\n          x -= rightOverflow;\n          leftOverflow = getLeftOverflow(x);\n          if (leftOverflow < 0) x -= leftOverflow;\n        }\n      }\n\n      return x;\n    };\n\n    const confineVertically = y => {\n      let topOverflow = getTopOverflow(y);\n\n      if (topOverflow < 0) {\n        y -= topOverflow;\n      } else {\n        const bottomOverflow = getBottomOverflow(y);\n\n        if (bottomOverflow > 0) {\n          y -= bottomOverflow;\n          topOverflow = getTopOverflow(y);\n          if (topOverflow < 0) y -= topOverflow;\n        }\n      }\n\n      return y;\n    };\n\n    return {\n      menuRect,\n      containerRect,\n      getLeftOverflow,\n      getRightOverflow,\n      getTopOverflow,\n      getBottomOverflow,\n      confineHorizontally,\n      confineVertically\n    };\n  }, [containerRef, scrollingRef, boundingBoxPadding]);\n  const placeArrowX = useCallback((menuX, anchorRect, containerRect, menuRect) => {\n    let x = anchorRect.left - containerRect.left - menuX + anchorRect.width / 2;\n    const offset = arrowRef.current.offsetWidth * 1.25;\n    x = Math.max(offset, x);\n    x = Math.min(x, menuRect.width - offset);\n    return x;\n  }, []);\n  const placeArrowY = useCallback((menuY, anchorRect, containerRect, menuRect) => {\n    let y = anchorRect.top - containerRect.top - menuY + anchorRect.height / 2;\n    const offset = arrowRef.current.offsetHeight * 1.25;\n    y = Math.max(offset, y);\n    y = Math.min(y, menuRect.height - offset);\n    return y;\n  }, []);\n  const placeLeftorRight = useCallback(({\n    anchorRect,\n    containerRect,\n    menuRect\n  }, {\n    placeLeftorRightY,\n    placeLeftX,\n    placeRightX\n  }, {\n    getLeftOverflow,\n    getRightOverflow,\n    confineHorizontally,\n    confineVertically\n  }) => {\n    let computedDirection = direction;\n    let y = placeLeftorRightY;\n\n    if (position !== 'initial') {\n      y = confineVertically(y);\n\n      if (position === 'anchor') {\n        y = Math.min(y, anchorRect.bottom - containerRect.top);\n        y = Math.max(y, anchorRect.top - containerRect.top - menuRect.height);\n      }\n    }\n\n    let x, leftOverflow, rightOverflow;\n\n    if (computedDirection === 'left') {\n      x = placeLeftX;\n\n      if (position !== 'initial') {\n        leftOverflow = getLeftOverflow(x);\n\n        if (leftOverflow < 0) {\n          rightOverflow = getRightOverflow(placeRightX);\n\n          if (rightOverflow <= 0 || -leftOverflow > rightOverflow) {\n            x = placeRightX;\n            computedDirection = 'right';\n          }\n        }\n      }\n    } else {\n      x = placeRightX;\n\n      if (position !== 'initial') {\n        rightOverflow = getRightOverflow(x);\n\n        if (rightOverflow > 0) {\n          leftOverflow = getLeftOverflow(placeLeftX);\n\n          if (leftOverflow >= 0 || -leftOverflow < rightOverflow) {\n            x = placeLeftX;\n            computedDirection = 'left';\n          }\n        }\n      }\n    }\n\n    if (position === 'auto') x = confineHorizontally(x);\n    const arrowY = arrow ? placeArrowY(y, anchorRect, containerRect, menuRect) : undefined;\n    return {\n      arrowY,\n      x,\n      y,\n      computedDirection\n    };\n  }, [placeArrowY, arrow, direction, position]);\n  const placeToporBottom = useCallback(({\n    anchorRect,\n    containerRect,\n    menuRect\n  }, {\n    placeToporBottomX,\n    placeTopY,\n    placeBottomY\n  }, {\n    getTopOverflow,\n    getBottomOverflow,\n    confineHorizontally,\n    confineVertically\n  }) => {\n    let computedDirection = direction === 'top' ? 'top' : 'bottom';\n    let x = placeToporBottomX;\n\n    if (position !== 'initial') {\n      x = confineHorizontally(x);\n\n      if (position === 'anchor') {\n        x = Math.min(x, anchorRect.right - containerRect.left);\n        x = Math.max(x, anchorRect.left - containerRect.left - menuRect.width);\n      }\n    }\n\n    let y, topOverflow, bottomOverflow;\n\n    if (computedDirection === 'top') {\n      y = placeTopY;\n\n      if (position !== 'initial') {\n        topOverflow = getTopOverflow(y);\n\n        if (topOverflow < 0) {\n          bottomOverflow = getBottomOverflow(placeBottomY);\n\n          if (bottomOverflow <= 0 || -topOverflow > bottomOverflow) {\n            y = placeBottomY;\n            computedDirection = 'bottom';\n          }\n        }\n      }\n    } else {\n      y = placeBottomY;\n\n      if (position !== 'initial') {\n        bottomOverflow = getBottomOverflow(y);\n\n        if (bottomOverflow > 0) {\n          topOverflow = getTopOverflow(placeTopY);\n\n          if (topOverflow >= 0 || -topOverflow < bottomOverflow) {\n            y = placeTopY;\n            computedDirection = 'top';\n          }\n        }\n      }\n    }\n\n    if (position === 'auto') y = confineVertically(y);\n    const arrowX = arrow ? placeArrowX(x, anchorRect, containerRect, menuRect) : undefined;\n    return {\n      arrowX,\n      x,\n      y,\n      computedDirection\n    };\n  }, [placeArrowX, arrow, direction, position]);\n  const positionMenu = useCallback((positionHelpers, anchorRef) => {\n    const {\n      menuRect,\n      containerRect,\n      ...helpers\n    } = positionHelpers;\n    let horizontalOffset = offsetX;\n    let verticalOffset = offsetY;\n\n    if (arrow) {\n      if (direction === 'left' || direction === 'right') {\n        horizontalOffset += arrowRef.current.offsetWidth;\n      } else {\n        verticalOffset += arrowRef.current.offsetHeight;\n      }\n    }\n\n    const anchorRect = anchorRef.current.getBoundingClientRect();\n    const placeLeftX = anchorRect.left - containerRect.left - menuRect.width - horizontalOffset;\n    const placeRightX = anchorRect.right - containerRect.left + horizontalOffset;\n    const placeTopY = anchorRect.top - containerRect.top - menuRect.height - verticalOffset;\n    const placeBottomY = anchorRect.bottom - containerRect.top + verticalOffset;\n    let placeToporBottomX, placeLeftorRightY;\n\n    if (align === 'end') {\n      placeToporBottomX = anchorRect.right - containerRect.left - menuRect.width;\n      placeLeftorRightY = anchorRect.bottom - containerRect.top - menuRect.height;\n    } else if (align === 'center') {\n      placeToporBottomX = anchorRect.left - containerRect.left - (menuRect.width - anchorRect.width) / 2;\n      placeLeftorRightY = anchorRect.top - containerRect.top - (menuRect.height - anchorRect.height) / 2;\n    } else {\n      placeToporBottomX = anchorRect.left - containerRect.left;\n      placeLeftorRightY = anchorRect.top - containerRect.top;\n    }\n\n    placeToporBottomX += horizontalOffset;\n    placeLeftorRightY += verticalOffset;\n    const rects = {\n      anchorRect,\n      containerRect,\n      menuRect\n    };\n    const placements = {\n      placeLeftX,\n      placeRightX,\n      placeLeftorRightY,\n      placeTopY,\n      placeBottomY,\n      placeToporBottomX\n    };\n\n    switch (direction) {\n      case 'left':\n      case 'right':\n        return placeLeftorRight(rects, placements, helpers);\n\n      case 'top':\n      case 'bottom':\n      default:\n        return placeToporBottom(rects, placements, helpers);\n    }\n  }, [arrow, align, direction, offsetX, offsetY, placeLeftorRight, placeToporBottom]);\n  const positionContextMenu = useCallback((positionHelpers, anchorPoint) => {\n    const {\n      menuRect,\n      containerRect,\n      getLeftOverflow,\n      getRightOverflow,\n      getTopOverflow,\n      getBottomOverflow,\n      confineHorizontally,\n      confineVertically\n    } = positionHelpers;\n    let x, y;\n    x = anchorPoint.x - containerRect.left;\n    y = anchorPoint.y - containerRect.top;\n    const rightOverflow = getRightOverflow(x);\n\n    if (rightOverflow > 0) {\n      const adjustedX = x - menuRect.width;\n      const leftOverflow = getLeftOverflow(adjustedX);\n\n      if (leftOverflow >= 0 || -leftOverflow < rightOverflow) {\n        x = adjustedX;\n      }\n\n      x = confineHorizontally(x);\n    }\n\n    let computedDirection = 'bottom';\n    const bottomOverflow = getBottomOverflow(y);\n\n    if (bottomOverflow > 0) {\n      const adjustedY = y - menuRect.height;\n      const topOverflow = getTopOverflow(adjustedY);\n\n      if (topOverflow >= 0 || -topOverflow < bottomOverflow) {\n        y = adjustedY;\n        computedDirection = 'top';\n      }\n\n      y = confineVertically(y);\n    }\n\n    return {\n      x,\n      y,\n      computedDirection\n    };\n  }, []);\n  const handlePosition = useCallback(() => {\n    if (!containerRef.current) {\n      if (!isProd) throw new Error('[react-menu] Menu cannot be positioned properly as container ref is null. If you initialise isOpen prop to true for ControlledMenu, please see this link for a solution: https://github.com/szhsin/react-menu/issues/2#issuecomment-719166062');\n      return;\n    }\n\n    if (!scrollingRef.current) {\n      scrollingRef.current = boundingBoxRef ? boundingBoxRef.current : getScrollAncestor(rootMenuRef.current);\n    }\n\n    const helpers = positionHelpers();\n    const {\n      menuRect\n    } = helpers;\n    let results = {\n      computedDirection: 'bottom'\n    };\n\n    if (anchorPoint) {\n      results = positionContextMenu(helpers, anchorPoint);\n    } else if (anchorRef) {\n      results = positionMenu(helpers, anchorRef);\n    }\n\n    let {\n      arrowX,\n      arrowY,\n      x,\n      y,\n      computedDirection\n    } = results;\n    let menuHeight = menuRect.height;\n\n    if (overflow !== 'visible') {\n      const {\n        getTopOverflow,\n        getBottomOverflow\n      } = helpers;\n      let height, overflowAmt;\n      const prevHeight = latestMenuSize.current.height;\n      const bottomOverflow = getBottomOverflow(y);\n\n      if (bottomOverflow > 0 || floatEqual(bottomOverflow, 0) && floatEqual(menuHeight, prevHeight)) {\n        height = menuHeight - bottomOverflow;\n        overflowAmt = bottomOverflow;\n      } else {\n        const topOverflow = getTopOverflow(y);\n\n        if (topOverflow < 0 || floatEqual(topOverflow, 0) && floatEqual(menuHeight, prevHeight)) {\n          height = menuHeight + topOverflow;\n          overflowAmt = 0 - topOverflow;\n          if (height >= 0) y -= topOverflow;\n        }\n      }\n\n      if (height >= 0) {\n        menuHeight = height;\n        setOverflowData({\n          height,\n          overflowAmt\n        });\n      } else {\n        setOverflowData();\n      }\n    }\n\n    if (arrow) setArrowPosition({\n      x: arrowX,\n      y: arrowY\n    });\n    setMenuPosition({\n      x,\n      y\n    });\n    setExpandedDirection(computedDirection);\n    latestMenuSize.current = {\n      width: menuRect.width,\n      height: menuHeight\n    };\n  }, [arrow, anchorPoint, anchorRef, containerRef, boundingBoxRef, rootMenuRef, scrollingRef, overflow, positionHelpers, positionMenu, positionContextMenu]);\n  useIsomorphicLayoutEffect(() => {\n    if (isOpen) {\n      handlePosition();\n      if (latestOpen.current) forceReposSubmenu();\n    }\n\n    latestHandlePosition.current = handlePosition;\n  }, [isOpen, handlePosition, reposFlag]);\n  useIsomorphicLayoutEffect(() => {\n    if (overflowData && !descendOverflowRef.current) menuRef.current.scrollTop = 0;\n  }, [overflowData]);\n  useIsomorphicLayoutEffect(() => {\n    if (animation) {\n      if (isOpen) {\n        setClosing(false);\n      } else if (isOpen !== latestOpen.current) {\n        setClosing(true);\n      }\n    }\n\n    latestOpen.current = isOpen;\n  }, [animation, isOpen]);\n  useEffect(() => {\n    if (!isOpen) return;\n\n    if (!anchorScrollingRef.current && rootAnchorRef && rootAnchorRef.current.tagName) {\n      anchorScrollingRef.current = getScrollAncestor(rootAnchorRef.current);\n    }\n\n    const scrollCurrent = scrollingRef.current;\n    const menuScroll = scrollCurrent && scrollCurrent.addEventListener ? scrollCurrent : window;\n    const anchorScroll = anchorScrollingRef.current || menuScroll;\n    let scroll = viewScroll;\n    if (anchorScroll !== menuScroll && scroll === 'initial') scroll = 'auto';\n    if (scroll === 'initial') return;\n    if (scroll === 'auto' && overflow !== 'visible') scroll = 'close';\n\n    const handleScroll = () => {\n      if (scroll === 'auto') {\n        batchedUpdates(handlePosition);\n      } else {\n        safeCall(onClose, {\n          reason: CloseReason.SCROLL\n        });\n      }\n    };\n\n    const scrollObservers = anchorScroll !== menuScroll && viewScroll !== 'initial' ? [anchorScroll, menuScroll] : [anchorScroll];\n    scrollObservers.forEach(o => o.addEventListener('scroll', handleScroll));\n    return () => scrollObservers.forEach(o => o.removeEventListener('scroll', handleScroll));\n  }, [rootAnchorRef, anchorScrollingRef, scrollingRef, isOpen, overflow, onClose, viewScroll, handlePosition]);\n  useEffect(() => {\n    if (typeof ResizeObserver !== 'function' || reposition === 'initial') return;\n    const resizeObserver = new ResizeObserver(([entry]) => {\n      const {\n        borderBoxSize,\n        target\n      } = entry;\n      let width, height;\n\n      if (borderBoxSize) {\n        const {\n          inlineSize,\n          blockSize\n        } = borderBoxSize[0] || borderBoxSize;\n        width = inlineSize;\n        height = blockSize;\n      } else {\n        const borderRect = target.getBoundingClientRect();\n        width = borderRect.width;\n        height = borderRect.height;\n      }\n\n      if (width === 0 || height === 0) return;\n      if (floatEqual(width, latestMenuSize.current.width, 1) && floatEqual(height, latestMenuSize.current.height, 1)) return;\n      batchedUpdates(() => {\n        latestHandlePosition.current();\n        forceReposSubmenu();\n      });\n    });\n    const observeTarget = menuRef.current;\n    resizeObserver.observe(observeTarget, {\n      box: 'border-box'\n    });\n    return () => resizeObserver.unobserve(observeTarget);\n  }, [reposition]);\n  useEffect(() => {\n    if (!isOpen) {\n      dispatch({\n        type: HoverIndexActionTypes.RESET\n      });\n      if (!animation) setOverflowData();\n    }\n\n    const id = setTimeout(() => {\n      if (!isOpen || !menuRef.current || menuRef.current.contains(document.activeElement)) return;\n      if (captureFocus) menuRef.current.focus();\n\n      if (menuItemFocus.position === FocusPositions.FIRST) {\n        dispatch({\n          type: HoverIndexActionTypes.FIRST\n        });\n      } else if (menuItemFocus.position === FocusPositions.LAST) {\n        dispatch({\n          type: HoverIndexActionTypes.LAST\n        });\n      }\n    }, animation ? 170 : 100);\n    return () => clearTimeout(id);\n  }, [animation, captureFocus, isOpen, menuItemFocus]);\n  const isSubmenuOpen = openSubmenuCount > 0;\n  const itemContext = useMemo(() => ({\n    isParentOpen: isOpen,\n    hoverIndex,\n    isSubmenuOpen,\n    dispatch\n  }), [isOpen, hoverIndex, isSubmenuOpen]);\n  let maxHeight, overflowAmt;\n\n  if (overflowData) {\n    descendOverflowRef.current ? overflowAmt = overflowData.overflowAmt : maxHeight = overflowData.height;\n  }\n\n  const listContext = useMemo(() => ({\n    reposSubmenu,\n    overflow,\n    overflowAmt\n  }), [reposSubmenu, overflow, overflowAmt]);\n  const overflowStyles = maxHeight >= 0 ? {\n    maxHeight,\n    overflow\n  } : undefined;\n  const modifiers = {\n    open: isOpen,\n    closing: isClosing,\n    animation,\n    dir: animation && expandedDirection\n  };\n  const userModifiers = Object.freeze({ ...modifiers,\n    dir: expandedDirection\n  });\n  const arrowModifiers = Object.freeze({\n    dir: expandedDirection\n  });\n  const handlers = attachHandlerProps({\n    onKeyDown: handleKeyDown,\n    onAnimationEnd: handleAnimationEnd\n  }, restProps);\n  return /*#__PURE__*/React.createElement(\"ul\", Object.assign({\n    role: \"menu\",\n    tabIndex: \"-1\",\n    \"aria-disabled\": isDisabled || undefined,\n    \"aria-label\": ariaLabel\n  }, restProps, handlers, {\n    ref: menuRef,\n    className: bem(menuClass, null, modifiers)(className, userModifiers),\n    style: { ...flatStyles(styles, userModifiers),\n      ...overflowStyles,\n      left: `${menuPosition.x}px`,\n      top: `${menuPosition.y}px`\n    }\n  }), arrow && /*#__PURE__*/React.createElement(\"div\", {\n    className: bem(menuClass, menuArrowClass, arrowModifiers)(arrowClassName),\n    style: { ...flatStyles(arrowStyles, arrowModifiers),\n      left: arrowPosition.x && `${arrowPosition.x}px`,\n      top: arrowPosition.y && `${arrowPosition.y}px`\n    },\n    ref: arrowRef\n  }), /*#__PURE__*/React.createElement(MenuListContext.Provider, {\n    value: listContext\n  }, /*#__PURE__*/React.createElement(MenuListItemContext.Provider, {\n    value: itemContext\n  }, menuItems)));\n}), 'MenuList');\n\nfunction submenuCountReducer(state, {\n  type\n}) {\n  switch (type) {\n    case SubmenuActionTypes.OPEN:\n      return state + 1;\n\n    case SubmenuActionTypes.CLOSE:\n      return Math.max(state - 1, 0);\n\n    default:\n      return state;\n  }\n}\n\nconst useMenuList = (menuListProps, {\n  id,\n  animation,\n  boundingBoxRef,\n  boundingBoxPadding,\n  debugging,\n  reposition,\n  submenuOpenDelay,\n  submenuCloseDelay,\n  viewScroll,\n  portal,\n  theming,\n  isMounted,\n  onClick,\n  onClose,\n  skipClick\n}) => {\n  const containerRef = useRef(null);\n  const scrollingRef = useRef(null);\n  const anchorScrollingRef = useRef(null);\n  const {\n    anchorRef,\n    isOpen\n  } = menuListProps;\n  const settings = useMemo(() => ({\n    animation,\n    boundingBoxRef,\n    boundingBoxPadding,\n    rootMenuRef: containerRef,\n    rootAnchorRef: anchorRef,\n    scrollingRef,\n    anchorScrollingRef,\n    reposition,\n    viewScroll\n  }), [animation, anchorRef, boundingBoxRef, boundingBoxPadding, reposition, viewScroll]);\n  const itemSettings = useMemo(() => ({\n    debugging,\n    submenuOpenDelay,\n    submenuCloseDelay\n  }), [debugging, submenuOpenDelay, submenuCloseDelay]);\n  const eventHandlers = useMemo(() => ({\n    handleClick(event, isStopPropagation, isCheckorRadio) {\n      if (!isStopPropagation) safeCall(onClick, event);\n      let keepOpen = event.keepOpen;\n\n      if (keepOpen === undefined) {\n        keepOpen = isCheckorRadio && event.key === Keys.SPACE;\n      }\n\n      if (!keepOpen) {\n        safeCall(onClose, {\n          value: event.value,\n          key: event.key,\n          reason: CloseReason.CLICK\n        });\n      }\n    },\n\n    handleClose(key) {\n      safeCall(onClose, {\n        key,\n        reason: CloseReason.CLICK\n      });\n    }\n\n  }), [onClick, onClose]);\n\n  const handleKeyDown = ({\n    key\n  }) => {\n    switch (key) {\n      case Keys.ESC:\n        safeCall(onClose, {\n          key,\n          reason: CloseReason.CANCEL\n        });\n        break;\n    }\n  };\n\n  const handleBlur = e => {\n    if (isOpen && !e.currentTarget.contains(e.relatedTarget || document.activeElement) && !debugging) {\n      safeCall(onClose, {\n        reason: CloseReason.BLUR\n      });\n\n      if (skipClick) {\n        skipClick.current = true;\n        setTimeout(() => skipClick.current = false, 300);\n      }\n    }\n  };\n\n  const menuList = /*#__PURE__*/React.createElement(\"div\", {\n    id: id,\n    className: bem(menuContainerClass, null, {\n      theme: theming\n    })(),\n    ref: containerRef,\n    onKeyDown: handleKeyDown,\n    onBlur: handleBlur\n  }, isMounted && /*#__PURE__*/React.createElement(SettingsContext.Provider, {\n    value: settings\n  }, /*#__PURE__*/React.createElement(ItemSettingsContext.Provider, {\n    value: itemSettings\n  }, /*#__PURE__*/React.createElement(EventHandlersContext.Provider, {\n    value: eventHandlers\n  }, /*#__PURE__*/React.createElement(MenuList, Object.assign({}, menuListProps, {\n    containerRef: containerRef,\n    onClose: onClose\n  }))))));\n\n  if (portal) {\n    return /*#__PURE__*/ReactDOM.createPortal(menuList, document.body);\n  } else {\n    return menuList;\n  }\n};\n\nconst Menu = /*#__PURE__*/React.memo(function Menu({\n  'aria-label': ariaLabel,\n  id,\n  animation,\n  boundingBoxRef,\n  boundingBoxPadding,\n  captureFocus: _,\n  debugging,\n  reposition,\n  viewScroll,\n  keepMounted,\n  menuButton,\n  portal,\n  submenuOpenDelay,\n  submenuCloseDelay,\n  theming,\n  onClick,\n  onChange,\n  ...restProps\n}) {\n  const {\n    isMounted,\n    isOpen,\n    menuItemFocus,\n    openMenu,\n    closeMenu\n  } = useMenuState(keepMounted);\n  const skipClick = useRef(false);\n  const buttonRef = useRef(null);\n  const button = safeCall(menuButton, {\n    open: isOpen\n  });\n  if (!button) throw new Error('Menu requires a menuButton prop.');\n  const handleClose = useCallback(e => {\n    closeMenu();\n    if (e.key) buttonRef.current.focus();\n  }, [closeMenu]);\n  const handleClick = useCallback(e => {\n    if (skipClick.current) return;\n    openMenu(e.detail === 0 ? FocusPositions.FIRST : FocusPositions.INITIAL);\n  }, [openMenu]);\n  const handleKeyDown = useCallback(e => {\n    let handled = false;\n\n    switch (e.key) {\n      case Keys.UP:\n        openMenu(FocusPositions.LAST);\n        handled = true;\n        break;\n\n      case Keys.DOWN:\n        openMenu(FocusPositions.FIRST);\n        handled = true;\n        break;\n    }\n\n    if (handled) e.preventDefault();\n  }, [openMenu]);\n  const renderButton = useMemo(() => {\n    const buttonProps = {\n      ref: buttonRef,\n      ...attachHandlerProps({\n        onClick: handleClick,\n        onKeyDown: handleKeyDown\n      }, button.props)\n    };\n\n    if (getName(button.type) === 'MenuButton') {\n      buttonProps.isOpen = isOpen;\n    }\n\n    return /*#__PURE__*/React.cloneElement(button, buttonProps);\n  }, [button, isOpen, handleClick, handleKeyDown]);\n  const menuList = useMenuList({ ...restProps,\n    ariaLabel: ariaLabel || (typeof button.props.children === 'string' ? button.props.children : 'Menu'),\n    anchorRef: buttonRef,\n    isOpen,\n    menuItemFocus\n  }, {\n    id,\n    animation,\n    boundingBoxRef,\n    boundingBoxPadding,\n    debugging,\n    reposition,\n    submenuOpenDelay,\n    submenuCloseDelay,\n    viewScroll,\n    portal,\n    theming,\n    isMounted,\n    onClick,\n    onClose: handleClose,\n    skipClick\n  });\n  useMenuChange(onChange, isOpen);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, renderButton, menuList);\n});\nMenu.propTypes = { ...menuPropTypesBase,\n  keepMounted: PropTypes.bool,\n  menuButton: PropTypes.oneOfType([PropTypes.element, PropTypes.func]).isRequired,\n  onChange: PropTypes.func\n};\nMenu.defaultProps = { ...menuDefaultPropsBase,\n  keepMounted: true\n};\n\nconst ControlledMenu = /*#__PURE__*/React.memo(function ControlledMenu({\n  'aria-label': ariaLabel,\n  id,\n  animation,\n  boundingBoxRef,\n  boundingBoxPadding,\n  debugging,\n  reposition,\n  submenuOpenDelay,\n  submenuCloseDelay,\n  viewScroll,\n  portal,\n  theming,\n  isMounted,\n  onClick,\n  onClose,\n  ...restProps\n}) {\n  return useMenuList({ ...restProps,\n    ariaLabel: ariaLabel || 'Menu'\n  }, {\n    id,\n    animation,\n    boundingBoxRef,\n    boundingBoxPadding,\n    debugging,\n    reposition,\n    submenuOpenDelay,\n    submenuCloseDelay,\n    viewScroll,\n    portal,\n    theming,\n    isMounted,\n    onClick,\n    onClose\n  });\n});\nControlledMenu.propTypes = { ...menuPropTypesBase,\n  anchorPoint: PropTypes.exact({\n    x: PropTypes.number,\n    y: PropTypes.number\n  }),\n  anchorRef: PropTypes.object,\n  captureFocus: PropTypes.bool,\n  isOpen: PropTypes.bool,\n  isMounted: PropTypes.bool,\n  menuItemFocus: PropTypes.exact({\n    position: PropTypes.string\n  }),\n  onClose: PropTypes.func\n};\nControlledMenu.defaultProps = { ...menuDefaultPropsBase,\n  captureFocus: true,\n  isOpen: false,\n  isMounted: true,\n  menuItemFocus: {\n    position: FocusPositions.INITIAL\n  }\n};\n\nconst SubMenu = defineName( /*#__PURE__*/React.memo(function SubMenu({\n  'aria-label': ariaLabel,\n  itemClassName,\n  itemStyles,\n  disabled,\n  keepMounted,\n  label,\n  index,\n  onChange,\n  captureFocus: _1,\n  repositionFlag: _2,\n  ...restProps\n}) {\n  const {\n    isMounted,\n    isOpen,\n    menuItemFocus,\n    openMenu,\n    closeMenu\n  } = useMenuState(keepMounted);\n  const {\n    isParentOpen,\n    hoverIndex,\n    isSubmenuOpen,\n    dispatch\n  } = useContext(MenuListItemContext);\n  const {\n    debugging,\n    submenuOpenDelay,\n    submenuCloseDelay\n  } = useContext(ItemSettingsContext);\n  const isHovering = hoverIndex === index;\n  const isDisabled = Boolean(disabled);\n  const {\n    isActive,\n    onKeyUp,\n    ...activeStateHandlers\n  } = useActiveState(isHovering, isDisabled, Keys.RIGHT);\n  const containerRef = useRef(null);\n  const itemRef = useRef(null);\n  const timeoutId = useRef();\n  const handleClose = useCallback(() => {\n    closeMenu();\n    itemRef.current.focus();\n  }, [closeMenu]);\n\n  const delayOpen = delay => {\n    dispatch({\n      type: HoverIndexActionTypes.SET,\n      index\n    });\n    timeoutId.current = setTimeout(openMenu, Math.max(delay, 0));\n  };\n\n  const handleMouseEnter = () => {\n    if (isDisabled || isOpen) return;\n\n    if (isSubmenuOpen) {\n      timeoutId.current = setTimeout(() => delayOpen(submenuOpenDelay - submenuCloseDelay), submenuCloseDelay);\n    } else {\n      delayOpen(submenuOpenDelay);\n    }\n  };\n\n  const handleMouseLeave = () => {\n    clearTimeout(timeoutId.current);\n\n    if (!isOpen) {\n      dispatch({\n        type: HoverIndexActionTypes.UNSET,\n        index\n      });\n    }\n  };\n\n  const handleClick = () => {\n    if (isDisabled) return;\n    clearTimeout(timeoutId.current);\n    openMenu();\n  };\n\n  const handleKeyDown = e => {\n    let handled = false;\n\n    switch (e.key) {\n      case Keys.LEFT:\n        if (isOpen) {\n          handleClose();\n          handled = true;\n        }\n\n        break;\n\n      case Keys.RIGHT:\n        if (!isOpen) handled = true;\n        break;\n    }\n\n    if (handled) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  };\n\n  const handleKeyUp = e => {\n    if (!isActive) return;\n    onKeyUp(e);\n\n    switch (e.key) {\n      case Keys.SPACE:\n      case Keys.ENTER:\n      case Keys.RIGHT:\n        openMenu(FocusPositions.FIRST);\n        break;\n    }\n  };\n\n  const handleBlur = e => {\n    if (debugging) return;\n    const relatedTarget = e.relatedTarget || document.activeElement;\n\n    if (!e.currentTarget.contains(relatedTarget)) {\n      closeMenu();\n      dispatch({\n        type: HoverIndexActionTypes.UNSET,\n        index\n      });\n    }\n  };\n\n  useEffect(() => () => clearTimeout(timeoutId.current), []);\n  useEffect(() => {\n    if (isHovering && isParentOpen) {\n      itemRef.current.focus();\n    } else {\n      closeMenu();\n    }\n  }, [isHovering, isParentOpen, closeMenu]);\n  useEffect(() => {\n    dispatch({\n      type: isOpen ? SubmenuActionTypes.OPEN : SubmenuActionTypes.CLOSE\n    });\n  }, [dispatch, isOpen]);\n  useMenuChange(onChange, isOpen);\n  const modifiers = Object.freeze({\n    open: isOpen,\n    hover: isHovering,\n    active: isActive,\n    disabled: isDisabled\n  });\n  return /*#__PURE__*/React.createElement(\"li\", {\n    className: bem(menuClass, subMenuClass)(),\n    role: \"presentation\",\n    ref: containerRef,\n    onKeyDown: handleKeyDown,\n    onBlur: handleBlur\n  }, /*#__PURE__*/React.createElement(\"div\", Object.assign({\n    className: bem(menuClass, menuItemClass, modifiers)(itemClassName),\n    style: flatStyles(itemStyles, modifiers),\n    role: \"menuitem\",\n    \"aria-haspopup\": \"true\",\n    \"aria-expanded\": isOpen,\n    \"aria-disabled\": isDisabled || undefined,\n    tabIndex: isHovering && !isOpen ? 0 : -1,\n    ref: itemRef,\n    onMouseEnter: handleMouseEnter,\n    onMouseLeave: handleMouseLeave,\n    onMouseDown: () => !isHovering && dispatch({\n      type: HoverIndexActionTypes.SET,\n      index\n    }),\n    onClick: handleClick,\n    onKeyUp: handleKeyUp\n  }, activeStateHandlers), safeCall(label, modifiers)), isMounted && /*#__PURE__*/React.createElement(MenuList, Object.assign({}, restProps, {\n    ariaLabel: ariaLabel || (typeof label === 'string' ? label : 'Submenu'),\n    anchorRef: itemRef,\n    containerRef: containerRef,\n    isOpen: isOpen,\n    isDisabled: isDisabled,\n    menuItemFocus: menuItemFocus\n  })));\n}), 'SubMenu');\nSubMenu.propTypes = { ...sharedMenuPropTypes,\n  ...stylePropTypes('item'),\n  disabled: PropTypes.bool,\n  keepMounted: PropTypes.bool,\n  label: PropTypes.oneOfType([PropTypes.node, PropTypes.func]).isRequired,\n  onChange: PropTypes.func\n};\nSubMenu.defaultProps = { ...sharedMenuDefaultProp,\n  direction: 'right',\n  keepMounted: true\n};\n\nconst MenuItem = defineName( /*#__PURE__*/React.memo(function MenuItem({\n  className,\n  styles,\n  value,\n  href,\n  type,\n  checked,\n  disabled,\n  index,\n  children,\n  onClick,\n  ...restProps\n}) {\n  const isDisabled = Boolean(disabled);\n  const {\n    ref,\n    isHovering,\n    setHover,\n    onBlur,\n    onMouseEnter,\n    onMouseLeave\n  } = useItemState(isDisabled, index);\n  const eventHandlers = useContext(EventHandlersContext);\n  const radioGroup = useContext(RadioGroupContext);\n  const {\n    isActive,\n    onKeyUp,\n    onBlur: activeStateBlur,\n    ...activeStateHandlers\n  } = useActiveState(isHovering, isDisabled);\n  const isRadio = type === 'radio';\n  const isCheckBox = type === 'checkbox';\n  const isAnchor = Boolean(href) && !isDisabled && !isRadio && !isCheckBox;\n  const isChecked = isRadio ? radioGroup.value === value : isCheckBox ? Boolean(checked) : false;\n\n  const handleClick = key => {\n    if (isDisabled) return;\n    let isStopPropagation = false;\n    const event = {\n      value,\n      key\n    };\n\n    if (isRadio) {\n      event.name = radioGroup.name;\n      safeCall(radioGroup.onChange, event);\n    }\n\n    event.checked = isCheckBox ? !isChecked : false;\n    isStopPropagation = safeCall(onClick, event) === false;\n    eventHandlers.handleClick(event, isStopPropagation, isCheckBox || isRadio);\n  };\n\n  const handleKeyUp = e => {\n    if (!isActive) return;\n    onKeyUp(e);\n\n    switch (e.key) {\n      case Keys.SPACE:\n      case Keys.ENTER:\n        if (isAnchor) {\n          ref.current.click();\n        } else {\n          handleClick(e.key);\n        }\n\n        break;\n    }\n  };\n\n  const handleBlur = e => {\n    activeStateBlur(e);\n    onBlur(e);\n  };\n\n  const modifiers = Object.freeze({\n    type,\n    disabled: isDisabled,\n    hover: isHovering,\n    active: isActive,\n    checked: isChecked,\n    anchor: isAnchor\n  });\n  const handlers = attachHandlerProps({ ...activeStateHandlers,\n    onMouseEnter,\n    onMouseLeave,\n    onMouseDown: setHover,\n    onKeyUp: handleKeyUp,\n    onBlur: handleBlur,\n    onClick: () => handleClick()\n  }, restProps);\n  const menuItemProps = {\n    role: isRadio ? 'menuitemradio' : isCheckBox ? 'menuitemcheckbox' : 'menuitem',\n    'aria-checked': isRadio || isCheckBox ? isChecked : undefined,\n    'aria-disabled': isDisabled || undefined,\n    tabIndex: isHovering ? 0 : -1,\n    ...restProps,\n    ...handlers,\n    ref,\n    className: bem(menuClass, menuItemClass, modifiers)(className),\n    style: flatStyles(styles, modifiers)\n  };\n  const renderChildren = safeCall(children, modifiers);\n\n  if (isAnchor) {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      role: \"presentation\"\n    }, /*#__PURE__*/React.createElement(\"a\", Object.assign({}, menuItemProps, {\n      href: href\n    }), renderChildren));\n  } else {\n    return /*#__PURE__*/React.createElement(\"li\", menuItemProps, renderChildren);\n  }\n}), 'MenuItem');\nMenuItem.propTypes = { ...stylePropTypes(),\n  value: PropTypes.any,\n  href: PropTypes.string,\n  type: PropTypes.oneOf(['checkbox', 'radio']),\n  checked: PropTypes.bool,\n  disabled: PropTypes.bool,\n  children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]).isRequired,\n  onClick: PropTypes.func\n};\n\nconst FocusableItem = defineName( /*#__PURE__*/React.memo(function FocusableItem({\n  className,\n  styles,\n  disabled,\n  index,\n  children,\n  ...restProps\n}) {\n  const isDisabled = Boolean(disabled);\n  const {\n    ref,\n    isHovering,\n    setHover,\n    onBlur,\n    onMouseEnter,\n    onMouseLeave\n  } = useItemState(isDisabled, index);\n  const {\n    handleClose\n  } = useContext(EventHandlersContext);\n  const baseParams = {\n    disabled: isDisabled,\n    hover: isHovering\n  };\n  const modifiers = Object.freeze({ ...baseParams,\n    focusable: true\n  });\n  const renderChildren = safeCall(children, { ...baseParams,\n    ref,\n    closeMenu: handleClose\n  });\n  const handlers = attachHandlerProps({\n    onMouseEnter,\n    onMouseLeave: e => onMouseLeave(e, true),\n    onFocus: setHover,\n    onBlur\n  }, restProps);\n  return /*#__PURE__*/React.createElement(\"li\", Object.assign({\n    \"aria-disabled\": isDisabled || undefined,\n    role: \"menuitem\",\n    tabIndex: \"-1\"\n  }, restProps, handlers, {\n    className: bem(menuClass, menuItemClass, modifiers)(className),\n    style: flatStyles(styles, modifiers)\n  }), renderChildren);\n}), 'FocusableItem');\nFocusableItem.propTypes = { ...stylePropTypes(),\n  disabled: PropTypes.bool,\n  children: PropTypes.func.isRequired\n};\n\nconst MenuDivider = defineName( /*#__PURE__*/React.memo(function MenuDivider({\n  className,\n  styles,\n  ...restProps\n}) {\n  return /*#__PURE__*/React.createElement(\"li\", Object.assign({\n    role: \"separator\"\n  }, restProps, {\n    className: bem(menuClass, menuDividerClass)(className),\n    style: flatStyles(styles)\n  }));\n}), 'MenuDivider');\nMenuDivider.propTypes = { ...stylePropTypes()\n};\n\nconst MenuHeader = defineName( /*#__PURE__*/React.memo(function MenuHeader({\n  className,\n  styles,\n  ...restProps\n}) {\n  return /*#__PURE__*/React.createElement(\"li\", Object.assign({\n    role: \"presentation\"\n  }, restProps, {\n    className: bem(menuClass, menuHeaderClass)(className),\n    style: flatStyles(styles)\n  }));\n}), 'MenuHeader');\nMenuHeader.propTypes = { ...stylePropTypes()\n};\n\nconst MenuGroup = defineName( /*#__PURE__*/React.memo(function MenuGroup({\n  className,\n  styles,\n  takeOverflow,\n  ...restProps\n}) {\n  const ref = useRef(null);\n  const [overflowStyles, setOverflowStyles] = useState();\n  const {\n    overflow,\n    overflowAmt\n  } = useContext(MenuListContext);\n  useIsomorphicLayoutEffect(() => {\n    let maxHeight;\n\n    if (takeOverflow && overflowAmt >= 0) {\n      maxHeight = ref.current.getBoundingClientRect().height - overflowAmt;\n      if (maxHeight < 0) maxHeight = 0;\n    }\n\n    setOverflowStyles(maxHeight >= 0 ? {\n      maxHeight,\n      overflow\n    } : undefined);\n  }, [takeOverflow, overflow, overflowAmt]);\n  useIsomorphicLayoutEffect(() => {\n    if (overflowStyles) ref.current.scrollTop = 0;\n  }, [overflowStyles]);\n  return /*#__PURE__*/React.createElement(\"div\", Object.assign({\n    ref: ref\n  }, restProps, {\n    className: bem(menuClass, menuGroupClass)(className),\n    style: { ...flatStyles(styles),\n      ...overflowStyles\n    }\n  }));\n}), 'MenuGroup');\nMenuGroup.propTypes = { ...stylePropTypes(),\n  takeOverflow: PropTypes.bool\n};\n\nconst MenuRadioGroup = defineName( /*#__PURE__*/React.memo(function MenuRadioGroup({\n  'aria-label': ariaLabel,\n  className,\n  styles,\n  name,\n  value,\n  children,\n  onChange,\n  ...restProps\n}) {\n  const contextValue = useMemo(() => ({\n    name,\n    value,\n    onChange\n  }), [name, value, onChange]);\n  return /*#__PURE__*/React.createElement(\"li\", {\n    role: \"presentation\"\n  }, /*#__PURE__*/React.createElement(\"ul\", Object.assign({\n    role: \"group\",\n    \"aria-label\": ariaLabel || name || 'Radio group'\n  }, restProps, {\n    className: bem(menuClass, radioGroupClass)(className),\n    style: flatStyles(styles)\n  }), /*#__PURE__*/React.createElement(RadioGroupContext.Provider, {\n    value: contextValue\n  }, children)));\n}), 'MenuRadioGroup');\nMenuRadioGroup.propTypes = { ...stylePropTypes(),\n  'aria-label': PropTypes.string,\n  name: PropTypes.string,\n  value: PropTypes.any,\n  children: PropTypes.node.isRequired,\n  onChange: PropTypes.func\n};\n\nexport { ControlledMenu, FocusableItem, Menu, MenuButton, MenuDivider, MenuGroup, MenuHeader, MenuItem, MenuRadioGroup, SubMenu, applyHOC, applyStatics, useMenuState };\n"]},"metadata":{},"sourceType":"module"}