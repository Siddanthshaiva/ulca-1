{"ast":null,"code":"import axios from \"axios\";\nimport C from \"../constants\";\nimport Strings from \"../strings\";\n\nfunction dispatchAPIAsync(api) {\n  return {\n    type: api.type,\n    payload: api.getPayload()\n  };\n}\n\nfunction apiStatusAsync(progress, errors, message, res = null, unauthrized = false, loading = false) {\n  if (res === null || !(res.status && res.status.statusCode && res.status.statusCode !== 200 && res.status.statusCode !== 201)) {\n    return {\n      type: C.APISTATUS,\n      payload: {\n        progress,\n        error: errors,\n        message: res && res.status && res.status.statusMessage ? res.status.statusMessage : message,\n        unauthrized: unauthrized,\n        loading: loading\n      }\n    };\n  }\n\n  return {\n    type: C.APISTATUS,\n    payload: {\n      progress,\n      error: res.status.statusCode === 200 || res.status.statusCode === 201,\n      message: res.status.statusCode === 200 || res.status.statusCode === 201 ? message : res.status.errorMessage,\n      unauthrized: unauthrized,\n      loading: loading\n    }\n  };\n}\n\nfunction success(res, api, dispatch) {\n  api.processResponse(res.data);\n  dispatch(apiStatusAsync(false, false, api.successMsg, res.data, null, false));\n\n  if (api.type) {\n    dispatch(dispatchAPIAsync(api));\n  }\n\n  if (typeof api.processNextSuccessStep === \"function\" && res.status && (res.status === 200 || res.status === 201)) api.processNextSuccessStep(res.data);\n}\n\nfunction error(err, api, dispatch) {\n  let errorMsg = err.response && err.response.data && err.response.data.why ? err.response.data.why : Strings.error.message.http.default;\n\n  if (api.errorMsg || api.errorMsg === null) {\n    errorMsg = api.errorMsg === null ? \"\" : api.errorMsg;\n  }\n\n  dispatch(apiStatusAsync(false, true, errorMsg, null, err.response && err.response.status === 401 ? true : false));\n\n  if (typeof api.processNextErrorStep === \"function\") {\n    api.processNextErrorStep();\n  }\n}\n\nexport const updateMessage = apiStatusAsync;\nexport default function dispatchAPI(api) {\n  if (api.reqType === \"MULTIPART\") {\n    return dispatch => {\n      dispatch(apiStatusAsync(api.dontShowApiLoader() ? false : true, false, \"\"));\n      axios.post(api.apiEndPoint(), api.getFormData(), api.getHeaders()).then(res => {\n        success(res, api, dispatch);\n      }).catch(err => {\n        error(err, api, dispatch);\n      });\n    };\n  } else if (api.method === \"POST\") {\n    return dispatch => {\n      dispatch(apiStatusAsync(api.dontShowApiLoader() ? false : true, false, \"\", null, null, true));\n      axios.post(api.apiEndPoint(), api.getBody(), api.getHeaders()).then(res => {\n        success(res, api, dispatch);\n      }).catch(err => {\n        error(err, api, dispatch);\n      });\n    };\n  } else if (api.method === \"PUT\") {\n    return dispatch => {\n      dispatch(apiStatusAsync(api.dontShowApiLoader() ? false : true, false, \"\"));\n      axios.put(api.apiEndPoint(), api.getBody(), api.getHeaders()).then(res => {\n        success(res, api, dispatch);\n      }).catch(err => {\n        error(err, api, dispatch);\n      });\n    };\n  } else if (api.method === \"DELETE\") {\n    return dispatch => {\n      dispatch(apiStatusAsync(api.dontShowApiLoader() ? false : true, false, \"\"));\n      axios.delete(api.apiEndPoint(), api.getHeaders()).then(res => {\n        success(res, api, dispatch);\n      }).catch(err => {\n        error(err, api, dispatch);\n      });\n    };\n  }\n\n  return dispatch => {\n    dispatch(apiStatusAsync(api.dontShowApiLoader() ? false : true, false, \"\"));\n    axios.get(api.apiEndPoint(), api.getHeaders()).then(res => {\n      success(res, api, dispatch);\n    }).catch(err => {\n      error(err, api, dispatch);\n    });\n  };\n}","map":{"version":3,"sources":["/home/sajish/Documents/Sajish/ULCA/ULCA/frontend/webapp/src/redux/actions/apitransport/apitransport.js"],"names":["axios","C","Strings","dispatchAPIAsync","api","type","payload","getPayload","apiStatusAsync","progress","errors","message","res","unauthrized","loading","status","statusCode","APISTATUS","error","statusMessage","errorMessage","success","dispatch","processResponse","data","successMsg","processNextSuccessStep","err","errorMsg","response","why","http","default","processNextErrorStep","updateMessage","dispatchAPI","reqType","dontShowApiLoader","post","apiEndPoint","getFormData","getHeaders","then","catch","method","getBody","put","delete","get"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,CAAP,MAAc,cAAd;AACA,OAAOC,OAAP,MAAoB,YAApB;;AAEA,SAASC,gBAAT,CAA0BC,GAA1B,EAA+B;AAC7B,SAAO;AACLC,IAAAA,IAAI,EAAED,GAAG,CAACC,IADL;AAELC,IAAAA,OAAO,EAAEF,GAAG,CAACG,UAAJ;AAFJ,GAAP;AAID;;AAED,SAASC,cAAT,CAAwBC,QAAxB,EAAkCC,MAAlC,EAA0CC,OAA1C,EAAmDC,GAAG,GAAG,IAAzD,EAA+DC,WAAW,GAAG,KAA7E,EAAoFC,OAAO,GAAG,KAA9F,EAAqG;AACnG,MAAIF,GAAG,KAAK,IAAR,IAAgB,EAAEA,GAAG,CAACG,MAAJ,IAAcH,GAAG,CAACG,MAAJ,CAAWC,UAAzB,IAAuCJ,GAAG,CAACG,MAAJ,CAAWC,UAAX,KAA0B,GAAjE,IAAwEJ,GAAG,CAACG,MAAJ,CAAWC,UAAX,KAA0B,GAApG,CAApB,EAA8H;AAC5H,WAAO;AACLX,MAAAA,IAAI,EAAEJ,CAAC,CAACgB,SADH;AAELX,MAAAA,OAAO,EAAE;AACPG,QAAAA,QADO;AAEPS,QAAAA,KAAK,EAAER,MAFA;AAGPC,QAAAA,OAAO,EAAEC,GAAG,IAAIA,GAAG,CAACG,MAAX,IAAqBH,GAAG,CAACG,MAAJ,CAAWI,aAAhC,GAAgDP,GAAG,CAACG,MAAJ,CAAWI,aAA3D,GAA2ER,OAH7E;AAIPE,QAAAA,WAAW,EAAEA,WAJN;AAKPC,QAAAA,OAAO,EAAEA;AALF;AAFJ,KAAP;AAUD;;AACD,SAAO;AACLT,IAAAA,IAAI,EAAEJ,CAAC,CAACgB,SADH;AAELX,IAAAA,OAAO,EAAE;AACPG,MAAAA,QADO;AAEPS,MAAAA,KAAK,EAAEN,GAAG,CAACG,MAAJ,CAAWC,UAAX,KAA0B,GAA1B,IAAiCJ,GAAG,CAACG,MAAJ,CAAWC,UAAX,KAA0B,GAF3D;AAGPL,MAAAA,OAAO,EAAEC,GAAG,CAACG,MAAJ,CAAWC,UAAX,KAA0B,GAA1B,IAAiCJ,GAAG,CAACG,MAAJ,CAAWC,UAAX,KAA0B,GAA3D,GAAiEL,OAAjE,GAA2EC,GAAG,CAACG,MAAJ,CAAWK,YAHxF;AAIPP,MAAAA,WAAW,EAAEA,WAJN;AAKPC,MAAAA,OAAO,EAAEA;AALF;AAFJ,GAAP;AAUD;;AAED,SAASO,OAAT,CAAiBT,GAAjB,EAAsBR,GAAtB,EAA2BkB,QAA3B,EAAqC;AACnClB,EAAAA,GAAG,CAACmB,eAAJ,CAAoBX,GAAG,CAACY,IAAxB;AACAF,EAAAA,QAAQ,CAACd,cAAc,CAAC,KAAD,EAAQ,KAAR,EAAeJ,GAAG,CAACqB,UAAnB,EAA+Bb,GAAG,CAACY,IAAnC,EAAyC,IAAzC,EAA+C,KAA/C,CAAf,CAAR;;AACA,MAAIpB,GAAG,CAACC,IAAR,EAAc;AACZiB,IAAAA,QAAQ,CAACnB,gBAAgB,CAACC,GAAD,CAAjB,CAAR;AACD;;AACD,MAAI,OAAOA,GAAG,CAACsB,sBAAX,KAAsC,UAAtC,IAAoDd,GAAG,CAACG,MAAxD,KAAmEH,GAAG,CAACG,MAAJ,KAAe,GAAf,IAAsBH,GAAG,CAACG,MAAJ,KAAe,GAAxG,CAAJ,EACEX,GAAG,CAACsB,sBAAJ,CAA2Bd,GAAG,CAACY,IAA/B;AACH;;AAED,SAASN,KAAT,CAAeS,GAAf,EAAoBvB,GAApB,EAAyBkB,QAAzB,EAAmC;AACjC,MAAIM,QAAQ,GAAGD,GAAG,CAACE,QAAJ,IAAgBF,GAAG,CAACE,QAAJ,CAAaL,IAA7B,IAAqCG,GAAG,CAACE,QAAJ,CAAaL,IAAb,CAAkBM,GAAvD,GAA6DH,GAAG,CAACE,QAAJ,CAAaL,IAAb,CAAkBM,GAA/E,GAAqF5B,OAAO,CAACgB,KAAR,CAAcP,OAAd,CAAsBoB,IAAtB,CAA2BC,OAA/H;;AACA,MAAI5B,GAAG,CAACwB,QAAJ,IAAgBxB,GAAG,CAACwB,QAAJ,KAAiB,IAArC,EAA2C;AACzCA,IAAAA,QAAQ,GAAGxB,GAAG,CAACwB,QAAJ,KAAiB,IAAjB,GAAwB,EAAxB,GAA6BxB,GAAG,CAACwB,QAA5C;AACD;;AACDN,EAAAA,QAAQ,CAACd,cAAc,CAAC,KAAD,EAAQ,IAAR,EAAcoB,QAAd,EAAwB,IAAxB,EAA8BD,GAAG,CAACE,QAAJ,IAAgBF,GAAG,CAACE,QAAJ,CAAad,MAAb,KAAwB,GAAxC,GAA8C,IAA9C,GAAqD,KAAnF,CAAf,CAAR;;AACA,MAAI,OAAOX,GAAG,CAAC6B,oBAAX,KAAoC,UAAxC,EAAoD;AAClD7B,IAAAA,GAAG,CAAC6B,oBAAJ;AACD;AACF;;AAED,OAAO,MAAMC,aAAa,GAAG1B,cAAtB;AAEP,eAAe,SAAS2B,WAAT,CAAqB/B,GAArB,EAA0B;AACvC,MAAIA,GAAG,CAACgC,OAAJ,KAAgB,WAApB,EAAiC;AAC/B,WAAOd,QAAQ,IAAI;AACjBA,MAAAA,QAAQ,CAACd,cAAc,CAACJ,GAAG,CAACiC,iBAAJ,KAA0B,KAA1B,GAAkC,IAAnC,EAAyC,KAAzC,EAAgD,EAAhD,CAAf,CAAR;AACArC,MAAAA,KAAK,CACFsC,IADH,CACQlC,GAAG,CAACmC,WAAJ,EADR,EAC2BnC,GAAG,CAACoC,WAAJ,EAD3B,EAC8CpC,GAAG,CAACqC,UAAJ,EAD9C,EAEGC,IAFH,CAEQ9B,GAAG,IAAI;AACXS,QAAAA,OAAO,CAACT,GAAD,EAAMR,GAAN,EAAWkB,QAAX,CAAP;AACD,OAJH,EAKGqB,KALH,CAKShB,GAAG,IAAI;AACZT,QAAAA,KAAK,CAACS,GAAD,EAAMvB,GAAN,EAAWkB,QAAX,CAAL;AACD,OAPH;AAQD,KAVD;AAWD,GAZD,MAYO,IAAIlB,GAAG,CAACwC,MAAJ,KAAe,MAAnB,EAA2B;AAChC,WAAOtB,QAAQ,IAAI;AACjBA,MAAAA,QAAQ,CAACd,cAAc,CAACJ,GAAG,CAACiC,iBAAJ,KAA0B,KAA1B,GAAkC,IAAnC,EAAyC,KAAzC,EAAgD,EAAhD,EAAoD,IAApD,EAA0D,IAA1D,EAAgE,IAAhE,CAAf,CAAR;AACArC,MAAAA,KAAK,CACFsC,IADH,CACQlC,GAAG,CAACmC,WAAJ,EADR,EAC2BnC,GAAG,CAACyC,OAAJ,EAD3B,EAC0CzC,GAAG,CAACqC,UAAJ,EAD1C,EAEGC,IAFH,CAEQ9B,GAAG,IAAI;AACXS,QAAAA,OAAO,CAACT,GAAD,EAAMR,GAAN,EAAWkB,QAAX,CAAP;AACD,OAJH,EAKGqB,KALH,CAKShB,GAAG,IAAI;AACZT,QAAAA,KAAK,CAACS,GAAD,EAAMvB,GAAN,EAAWkB,QAAX,CAAL;AACD,OAPH;AAQD,KAVD;AAWD,GAZM,MAYA,IAAIlB,GAAG,CAACwC,MAAJ,KAAe,KAAnB,EAA0B;AAC/B,WAAOtB,QAAQ,IAAI;AACjBA,MAAAA,QAAQ,CAACd,cAAc,CAACJ,GAAG,CAACiC,iBAAJ,KAA0B,KAA1B,GAAkC,IAAnC,EAAyC,KAAzC,EAAgD,EAAhD,CAAf,CAAR;AACArC,MAAAA,KAAK,CACF8C,GADH,CACO1C,GAAG,CAACmC,WAAJ,EADP,EAC0BnC,GAAG,CAACyC,OAAJ,EAD1B,EACyCzC,GAAG,CAACqC,UAAJ,EADzC,EAEGC,IAFH,CAEQ9B,GAAG,IAAI;AACXS,QAAAA,OAAO,CAACT,GAAD,EAAMR,GAAN,EAAWkB,QAAX,CAAP;AACD,OAJH,EAKGqB,KALH,CAKShB,GAAG,IAAI;AACZT,QAAAA,KAAK,CAACS,GAAD,EAAMvB,GAAN,EAAWkB,QAAX,CAAL;AACD,OAPH;AAQD,KAVD;AAWD,GAZM,MAYA,IAAIlB,GAAG,CAACwC,MAAJ,KAAe,QAAnB,EAA6B;AAClC,WAAOtB,QAAQ,IAAI;AACjBA,MAAAA,QAAQ,CAACd,cAAc,CAACJ,GAAG,CAACiC,iBAAJ,KAA0B,KAA1B,GAAkC,IAAnC,EAAyC,KAAzC,EAAgD,EAAhD,CAAf,CAAR;AACArC,MAAAA,KAAK,CACF+C,MADH,CACU3C,GAAG,CAACmC,WAAJ,EADV,EAC6BnC,GAAG,CAACqC,UAAJ,EAD7B,EAEGC,IAFH,CAEQ9B,GAAG,IAAI;AACXS,QAAAA,OAAO,CAACT,GAAD,EAAMR,GAAN,EAAWkB,QAAX,CAAP;AACD,OAJH,EAKGqB,KALH,CAKShB,GAAG,IAAI;AACZT,QAAAA,KAAK,CAACS,GAAD,EAAMvB,GAAN,EAAWkB,QAAX,CAAL;AACD,OAPH;AAQD,KAVD;AAWD;;AACD,SAAOA,QAAQ,IAAI;AACjBA,IAAAA,QAAQ,CAACd,cAAc,CAACJ,GAAG,CAACiC,iBAAJ,KAA0B,KAA1B,GAAkC,IAAnC,EAAyC,KAAzC,EAAgD,EAAhD,CAAf,CAAR;AACArC,IAAAA,KAAK,CACFgD,GADH,CACO5C,GAAG,CAACmC,WAAJ,EADP,EAC0BnC,GAAG,CAACqC,UAAJ,EAD1B,EAEGC,IAFH,CAEQ9B,GAAG,IAAI;AACXS,MAAAA,OAAO,CAACT,GAAD,EAAMR,GAAN,EAAWkB,QAAX,CAAP;AACD,KAJH,EAKGqB,KALH,CAKShB,GAAG,IAAI;AACZT,MAAAA,KAAK,CAACS,GAAD,EAAMvB,GAAN,EAAWkB,QAAX,CAAL;AACD,KAPH;AAQD,GAVD;AAWD","sourcesContent":["import axios from \"axios\";\nimport C from \"../constants\";\nimport Strings from \"../strings\";\n\nfunction dispatchAPIAsync(api) {\n  return {\n    type: api.type,\n    payload: api.getPayload()\n  };\n}\n\nfunction apiStatusAsync(progress, errors, message, res = null, unauthrized = false, loading = false) {\n  if (res === null || !(res.status && res.status.statusCode && res.status.statusCode !== 200 && res.status.statusCode !== 201)) {\n    return {\n      type: C.APISTATUS,\n      payload: {\n        progress,\n        error: errors,\n        message: res && res.status && res.status.statusMessage ? res.status.statusMessage : message,\n        unauthrized: unauthrized,\n        loading: loading\n      }\n    };\n  }\n  return {\n    type: C.APISTATUS,\n    payload: {\n      progress,\n      error: res.status.statusCode === 200 || res.status.statusCode === 201,\n      message: res.status.statusCode === 200 || res.status.statusCode === 201 ? message : res.status.errorMessage,\n      unauthrized: unauthrized,\n      loading: loading\n    }\n  };\n}\n\nfunction success(res, api, dispatch) {\n  api.processResponse(res.data);\n  dispatch(apiStatusAsync(false, false, api.successMsg, res.data, null, false));\n  if (api.type) {\n    dispatch(dispatchAPIAsync(api));\n  }\n  if (typeof api.processNextSuccessStep === \"function\" && res.status && (res.status === 200 || res.status === 201))\n    api.processNextSuccessStep(res.data);\n}\n\nfunction error(err, api, dispatch) {\n  let errorMsg = err.response && err.response.data && err.response.data.why ? err.response.data.why : Strings.error.message.http.default;\n  if (api.errorMsg || api.errorMsg === null) {\n    errorMsg = api.errorMsg === null ? \"\" : api.errorMsg;\n  }\n  dispatch(apiStatusAsync(false, true, errorMsg, null, err.response && err.response.status === 401 ? true : false));\n  if (typeof api.processNextErrorStep === \"function\") {\n    api.processNextErrorStep();\n  }\n}\n\nexport const updateMessage = apiStatusAsync;\n\nexport default function dispatchAPI(api) {\n  if (api.reqType === \"MULTIPART\") {\n    return dispatch => {\n      dispatch(apiStatusAsync(api.dontShowApiLoader() ? false : true, false, \"\"));\n      axios\n        .post(api.apiEndPoint(), api.getFormData(), api.getHeaders())\n        .then(res => {\n          success(res, api, dispatch);\n        })\n        .catch(err => {\n          error(err, api, dispatch);\n        });\n    };\n  } else if (api.method === \"POST\") {\n    return dispatch => {\n      dispatch(apiStatusAsync(api.dontShowApiLoader() ? false : true, false, \"\", null, null, true));\n      axios\n        .post(api.apiEndPoint(), api.getBody(), api.getHeaders())\n        .then(res => {\n          success(res, api, dispatch);\n        })\n        .catch(err => {\n          error(err, api, dispatch);\n        });\n    };\n  } else if (api.method === \"PUT\") {\n    return dispatch => {\n      dispatch(apiStatusAsync(api.dontShowApiLoader() ? false : true, false, \"\"));\n      axios\n        .put(api.apiEndPoint(), api.getBody(), api.getHeaders())\n        .then(res => {\n          success(res, api, dispatch);\n        })\n        .catch(err => {\n          error(err, api, dispatch);\n        });\n    };\n  } else if (api.method === \"DELETE\") {\n    return dispatch => {\n      dispatch(apiStatusAsync(api.dontShowApiLoader() ? false : true, false, \"\"));\n      axios\n        .delete(api.apiEndPoint(), api.getHeaders())\n        .then(res => {\n          success(res, api, dispatch);\n        })\n        .catch(err => {\n          error(err, api, dispatch);\n        });\n    };\n  }\n  return dispatch => {\n    dispatch(apiStatusAsync(api.dontShowApiLoader() ? false : true, false, \"\"));\n    axios\n      .get(api.apiEndPoint(), api.getHeaders())\n      .then(res => {\n        success(res, api, dispatch);\n      })\n      .catch(err => {\n        error(err, api, dispatch);\n      });\n  };\n}\n"]},"metadata":{},"sourceType":"module"}