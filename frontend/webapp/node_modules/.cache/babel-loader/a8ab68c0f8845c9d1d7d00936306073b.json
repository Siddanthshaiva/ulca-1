{"ast":null,"code":"var _jsxFileName = \"/home/sajish/Documents/Sajish/ULCA/ULCA/frontend/webapp/src/ui/container/Dashboard/ChartRender.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { withStyles, Typography, MuiThemeProvider, Paper, Button } from \"@material-ui/core\";\nimport ChartStyles from \"../../styles/Dashboard\";\nimport { ResponsiveContainer, BarChart, Bar, Cell, CartesianGrid, XAxis, YAxis, Tooltip } from 'recharts';\nimport Select from 'react-select';\nimport APITransport from \"../../../redux/actions/apitransport/apitransport\";\nimport FetchLanguageDataSets from \"../../../redux/actions/api/Dashboard/languageDatasets\";\nimport { isMobile } from 'react-device-detect';\nimport { ArrowBack } from '@material-ui/icons';\nimport Header from '../../components/common/Header';\nimport Dataset from \"../../../configs/DatasetItems\";\nimport authenticate from '../../../configs/authenticate';\nimport Theme from \"../../theme/theme-default\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar colors = [\"188efc\", \"7a47a4\", \"b93e94\", \"1fc6a4\", \"f46154\", \"d088fd\", \"f3447d\", \"188efc\", \"f48734\", \"189ac9\", \"0e67bd\"];\n\nconst ChartRender = props => {\n  _s();\n\n  const [selectedOption, setSelectedOption] = useState(Dataset[0]);\n  const [title, setTitle] = useState(\"Number of parallel dataset per language with English\");\n  const [filterValue, setFilterValue] = useState(\"domains\");\n  const [selectedLanguage, setSelectedLanguage] = useState(\"\");\n  const [selectedLanguageName, setSelectedLanguageName] = useState(\"\");\n  const [page, setPage] = useState(0);\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const DashboardReport = useSelector(state => state.dashboardReport);\n  const {\n    classes\n  } = props;\n  const options = Dataset;\n  useEffect(() => {\n    fetchChartData(selectedOption.value, \"languagePairs\", []);\n\n    if (authenticate()) {\n      history.push(`${process.env.PUBLIC_URL}/private-dashboard`);\n    } else {\n      localStorage.clear();\n      history.push(`${process.env.PUBLIC_URL}/dashboard`);\n    }\n  }, []);\n\n  const fetchChartData = (dataType, value, criterions) => {\n    const userObj = new FetchLanguageDataSets(dataType, value, criterions);\n    dispatch(APITransport(userObj));\n  };\n\n  const customStyles = {\n    option: (provided, state) => ({ ...provided,\n      borderColor: \"green\",\n      color: 'black',\n      padding: 20,\n      background: state.isSelected && \"#c7c6c68a !important\",\n      cursor: \"pointer\",\n      fontFamily: \"Lato, sans-serif \"\n    }),\n    control: (base, state) => ({ ...base,\n      // This line disable the blue border\n      borderColor: \"#392C71\",\n      border: \"1px solid rgba(57, 44, 113, 0.5)\",\n      boxShadow: state.isFocused ? 0 : 0,\n      fontFamily: \"Lato, sans-serif \",\n      cursor: \"pointer\"\n    })\n  };\n\n  const fetchParams = event => {\n    var sourceLanguage = \"\";\n    let targetLanguage = \"\";\n\n    if (selectedOption.value === \"parallel-corpus\") {\n      sourceLanguage = {\n        \"type\": \"PARAMS\",\n        \"value\": \"en\"\n      };\n      targetLanguage = {\n        \"type\": \"PARAMS\",\n        \"value\": selectedLanguage ? selectedLanguage : event && event.hasOwnProperty(\"_id\") && event._id\n      };\n    } else {\n      sourceLanguage = {\n        \"type\": \"PARAMS\",\n        \"value\": selectedLanguage ? selectedLanguage : event && event.hasOwnProperty(\"_id\") && event._id\n      };\n      targetLanguage = {\n        \"type\": \"PARAMS\",\n        \"value\": \"\"\n      };\n    }\n\n    setSelectedLanguage(selectedLanguage ? selectedLanguage : event && event.hasOwnProperty(\"_id\") && event._id);\n    setSelectedLanguageName(selectedLanguageName ? selectedLanguageName : event && event.hasOwnProperty(\"label\") && event.label);\n    return [{\n      \"type\": \"PARAMS\",\n      \"sourceLanguage\": sourceLanguage,\n      \"targetLanguage\": targetLanguage\n    }];\n  };\n\n  const fetchNextParams = eventValue => {\n    var sourceLanguage = \"\";\n    let targetLanguage = \"\";\n    let event = {\n      \"type\": \"PARAMS\",\n      \"value\": eventValue && eventValue.hasOwnProperty(\"_id\") && eventValue._id\n    };\n\n    if (selectedOption.value === \"parallel-corpus\") {\n      sourceLanguage = {\n        \"type\": \"PARAMS\",\n        \"value\": \"en\"\n      };\n      targetLanguage = {\n        \"type\": \"PARAMS\",\n        \"value\": selectedLanguage\n      };\n    } else {\n      sourceLanguage = {\n        \"type\": \"PARAMS\",\n        \"value\": selectedLanguage\n      };\n      targetLanguage = {\n        \"type\": \"PARAMS\",\n        \"value\": \"\"\n      };\n    }\n\n    setSelectedLanguage(selectedLanguage ? selectedLanguage : event && event.hasOwnProperty(\"_id\") && event._id);\n    setSelectedLanguageName(selectedLanguageName ? selectedLanguageName : event && event.hasOwnProperty(\"label\") && event.label);\n    return [{\n      \"type\": \"PARAMS\",\n      \"sourceLanguage\": sourceLanguage,\n      \"targetLanguage\": targetLanguage\n    }, event];\n  };\n\n  const handleOnClick = (value, event, filter) => {\n    switch (value) {\n      case 1:\n        // fetchChartData(selectedOption.value, filter ? filter : filterValue, [{ \"type\": \"PARAMS\", \"sourceLanguage\": { \"type\": \"PARAMS\", \"value\": \"en\" }, \"targetLanguage\": { \"type\": \"PARAMS\", \"value\": selectedLanguage ? selectedLanguage : (event && event.hasOwnProperty(\"_id\")) ? event._id : \"\" } }])\n        fetchChartData(selectedOption.value, filter ? filter : filterValue, fetchParams(event));\n        handleSelectChange(selectedOption, event, filter, value);\n        setPage(value);\n        break;\n\n      case 2:\n        fetchChartData(selectedOption.value, filterValue === \"collectionMethod_collectionDescriptions\" ? \"domains\" : \"collectionMethod_collectionDescriptions\", fetchNextParams(event));\n        setPage(value);\n        setFilterValue('domains');\n        handleSelectChange(selectedOption, event, filter, value);\n        break;\n\n      case 0:\n        fetchChartData(selectedOption.value, \"languagePairs\", []);\n        setPage(value);\n        setFilterValue('domains');\n        handleSelectChange(selectedOption, \"\", \"\", value);\n        setSelectedLanguage(\"\");\n        setSelectedLanguageName(\"\");\n        break;\n\n      default:\n    }\n  };\n\n  const handleLanguageChange = value => {\n    setFilterValue(value);\n    setTitle(`English-${selectedLanguageName}  ${selectedOption.value}- Grouped by ${value === \"domains\" ? \"Domain\" : value === \"source\" ? \"Source\" : value === \"collectionMethod_collectionDescriptions\" ? \"Collection Method\" : \"Domain\"}`);\n    handleOnClick(1, \"\", value);\n  };\n\n  const handleCardNavigation = () => {\n    handleOnClick(page - 1);\n  };\n\n  const fetchLanuagePairButtons = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.filterButton,\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        color: filterValue === \"domains\" ? \"primary\" : \"default\",\n        style: filterValue === \"domains\" ? {\n          backgroundColor: \"#E8F5F8\"\n        } : {},\n        size: \"medium\",\n        variant: \"outlined\",\n        className: classes.backButton,\n        onClick: () => handleLanguageChange(\"domains\"),\n        children: \"Domain\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        color: filterValue === \"collectionMethod_collectionDescriptions\" ? \"primary\" : \"default\",\n        style: filterValue === \"collectionMethod_collectionDescriptions\" ? {\n          backgroundColor: \"#E8F5F8\"\n        } : {},\n        size: \"medium\",\n        variant: \"outlined\",\n        className: classes.backButton,\n        onClick: () => handleLanguageChange(\"collectionMethod_collectionDescriptions\"),\n        children: \"Collection Method\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this);\n  };\n\n  const handleSelectChange = (dataSet, event, filter, page) => {\n    setSelectedOption(dataSet);\n\n    switch (dataSet.value) {\n      case 'parallel-corpus':\n        if (page === 0) {\n          fetchChartData(dataSet.value, \"languagePairs\", []);\n          setTitle(\"Number of parallel sentences per language with English\");\n        } else if (page === 1) {\n          setTitle(`English-${selectedLanguageName ? selectedLanguageName : event && event.hasOwnProperty(\"label\") && event.label}  ${selectedOption.label} - Grouped by ${filter === \"domains\" ? \"Domain\" : filter === \"source\" ? \"Source\" : filter === \"collectionMethod_collectionDescriptions\" ? \"Collection Method\" : \"Domain\"}`);\n        } else if (page === 2) {\n          setTitle(`English-${selectedLanguageName} ${selectedOption.label} `);\n        }\n\n        break;\n\n      case 'monolingual-corpus':\n        setTitle('Number of sentences per language');\n        break;\n\n      case 'asr-corpus':\n        if (page === 0) {\n          fetchChartData(dataSet.value, \"languagePairs\", []);\n          setTitle(\"Number of audio hours per language\");\n        } else if (page === 1) {\n          setTitle(`Number of audio hours in ${selectedLanguageName ? selectedLanguageName : event && event.hasOwnProperty(\"label\") && event.label} - Grouped by ${filter === \"domains\" ? \"Domain\" : filter === \"source\" ? \"Source\" : filter === \"collectionMethod_collectionDescriptions\" ? \"Collection Method\" : \"Domain\"}`);\n        } else if (page === 2) {\n          setTitle(`Number of audio hours in ${selectedLanguageName} `);\n        }\n\n        break;\n\n      case 'ocr-corpus':\n        if (page === 0) {\n          fetchChartData(dataSet.value, \"languagePairs\", []);\n          setTitle(\"Number of images per script\");\n        } else if (page === 1) {\n          setTitle(`Number of images per script in ${selectedLanguageName ? selectedLanguageName : event && event.hasOwnProperty(\"label\") && event.label} - Grouped by ${filter === \"domains\" ? \"Domain\" : filter === \"source\" ? \"Source\" : filter === \"collectionMethod_collectionDescriptions\" ? \"Collection Method\" : \"Domain\"}`);\n        } else if (page === 2) {\n          setTitle(`Number of images per script in ${selectedLanguageName} `);\n        }\n\n        break;\n\n      default:\n        setTitle(\"\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(MuiThemeProvider, {\n    theme: Theme,\n    children: [!authenticate() && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        style: {\n          marginBottom: \"10px\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 46\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 52\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 58\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 64\n      }, this), \" \"]\n    }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.container,\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        elevation: 3,\n        className: classes.paper,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.titleBar,\n          children: [page !== 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              size: \"medium\",\n              variant: \"contained\",\n              className: classes.backButton,\n              startIcon: /*#__PURE__*/_jsxDEV(ArrowBack, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 105\n              }, this),\n              onClick: () => handleCardNavigation(),\n              children: \"Back\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.seperator\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 6\n            }, this)]\n          }, void 0, true), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            children: \" Dataset Type : \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            className: classes.select,\n            styles: customStyles,\n            color: \"primary\",\n            value: selectedOption,\n            onChange: value => {\n              handleSelectChange(value, \"\", \"\", page);\n            },\n            options: options,\n            isDisabled: page !== 0 ? true : false\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 6\n          }, this), page === 1 && fetchLanuagePairButtons()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.title,\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            value: \"\",\n            variant: \"h6\",\n            children: [\" \", title, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 6\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.title,\n          children: /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n            width: \"95%\",\n            height: 450,\n            marginBottom: 0,\n            children: /*#__PURE__*/_jsxDEV(BarChart, {\n              width: 900,\n              height: 450,\n              data: DashboardReport,\n              fontSize: \"12px\",\n              fontFamily: \"Lato\",\n              maxBarSize: 100,\n              children: [/*#__PURE__*/_jsxDEV(XAxis, {\n                dataKey: \"label\" // textAnchor\t=\t{isMobile ? \"end\" : \"middle\"}\n                // tick\t\t=\t{{ angle: isMobile ? -60 : 0 }} \n                // height\t\t=\t{isMobile ? 100 : 60}\n                ,\n                textAnchor: \"end\",\n                tick: {\n                  angle: -60\n                },\n                height: 100,\n                interval: 0,\n                position: \"insideLeft\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 7\n              }, this), /*#__PURE__*/_jsxDEV(YAxis, {\n                type: \"number\",\n                dx: 0,\n                tickFormatter: value => new Intl.NumberFormat('en', {\n                  notation: \"compact\"\n                }).format(value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 7\n              }, this), /*#__PURE__*/_jsxDEV(CartesianGrid, {\n                horizontal: true,\n                vertical: false,\n                textAnchor: \"middle\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 7\n              }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                formatter: value => new Intl.NumberFormat('en').format(value),\n                cursor: {\n                  fill: 'none'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 7\n              }, this), /*#__PURE__*/_jsxDEV(Bar, {\n                dataKey: \"value\",\n                cursor: \"pointer\",\n                radius: [4, 4, 0, 0],\n                maxBarSize: 65,\n                onClick: event => {\n                  handleOnClick(page + 1, event);\n                },\n                children: DashboardReport.length > 0 && DashboardReport.map((entry, index) => {\n                  const color = colors[index < 9 ? index : index % 10];\n                  return /*#__PURE__*/_jsxDEV(Cell, {\n                    fill: `#${color}`\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 262,\n                    columnNumber: 17\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 7\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 6\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 5\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 4\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 212,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ChartRender, \"gG2Obvh5RpJ3AUJFxLv0Kdxn9Do=\", false, function () {\n  return [useHistory, useDispatch, useSelector];\n});\n\n_c = ChartRender;\nexport default withStyles(ChartStyles(Theme))(ChartRender);\n\nvar _c;\n\n$RefreshReg$(_c, \"ChartRender\");","map":{"version":3,"sources":["/home/sajish/Documents/Sajish/ULCA/ULCA/frontend/webapp/src/ui/container/Dashboard/ChartRender.jsx"],"names":["React","useEffect","useState","useDispatch","useSelector","useHistory","useParams","withStyles","Typography","MuiThemeProvider","Paper","Button","ChartStyles","ResponsiveContainer","BarChart","Bar","Cell","CartesianGrid","XAxis","YAxis","Tooltip","Select","APITransport","FetchLanguageDataSets","isMobile","ArrowBack","Header","Dataset","authenticate","Theme","colors","ChartRender","props","selectedOption","setSelectedOption","title","setTitle","filterValue","setFilterValue","selectedLanguage","setSelectedLanguage","selectedLanguageName","setSelectedLanguageName","page","setPage","history","dispatch","DashboardReport","state","dashboardReport","classes","options","fetchChartData","value","push","process","env","PUBLIC_URL","localStorage","clear","dataType","criterions","userObj","customStyles","option","provided","borderColor","color","padding","background","isSelected","cursor","fontFamily","control","base","border","boxShadow","isFocused","fetchParams","event","sourceLanguage","targetLanguage","hasOwnProperty","_id","label","fetchNextParams","eventValue","handleOnClick","filter","handleSelectChange","handleLanguageChange","handleCardNavigation","fetchLanuagePairButtons","filterButton","backgroundColor","backButton","dataSet","marginBottom","container","paper","titleBar","seperator","select","angle","Intl","NumberFormat","notation","format","fill","length","map","entry","index"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,UAAT,EAAqBC,SAArB,QAAsC,kBAAtC;AACA,SAASC,UAAT,EAAqBC,UAArB,EAAiCC,gBAAjC,EAAmDC,KAAnD,EAA0DC,MAA1D,QAAwE,mBAAxE;AACA,OAAOC,WAAP,MAAwB,wBAAxB;AACA,SAASC,mBAAT,EAA8BC,QAA9B,EAAwCC,GAAxC,EAA6CC,IAA7C,EAAmDC,aAAnD,EAAkEC,KAAlE,EAAyEC,KAAzE,EAAgFC,OAAhF,QAA+F,UAA/F;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAOC,YAAP,MAAyB,kDAAzB;AACA,OAAOC,qBAAP,MAAkC,uDAAlC;AACA,SAASC,QAAT,QAAyB,qBAAzB;AACA,SAAQC,SAAR,QAAwB,oBAAxB;AACA,OAAOC,MAAP,MAAmB,gCAAnB;AACA,OAAOC,OAAP,MAAoB,+BAApB;AACA,OAAOC,YAAP,MAAyB,+BAAzB;AACA,OAAOC,KAAP,MAAkB,2BAAlB;;;AACA,IAAIC,MAAM,GAAG,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,EAAmD,QAAnD,EAA6D,QAA7D,EAAuE,QAAvE,EAAiF,QAAjF,EAA2F,QAA3F,EAAqG,QAArG,CAAb;;AAGA,MAAMC,WAAW,GAAIC,KAAD,IAAW;AAAA;;AACvB,QAAM,CAACC,cAAD,EAAiBC,iBAAjB,IAA0ChC,QAAQ,CAACyB,OAAO,CAAC,CAAD,CAAR,CAAxD;AACA,QAAM,CAACQ,KAAD,EAAQC,QAAR,IAA0ClC,QAAQ,CAAC,sDAAD,CAAxD;AACP,QAAM,CAACmC,WAAD,EAAcC,cAAd,IAAiCpC,QAAQ,CAAC,SAAD,CAA/C;AACA,QAAM,CAACqC,gBAAD,EAAkBC,mBAAlB,IAAyCtC,QAAQ,CAAC,EAAD,CAAvD;AACA,QAAM,CAACuC,oBAAD,EAAsBC,uBAAtB,IAAiDxC,QAAQ,CAAC,EAAD,CAA/D;AACA,QAAM,CAACyC,IAAD,EAAOC,OAAP,IAAsB1C,QAAQ,CAAC,CAAD,CAApC;AACO,QAAM2C,OAAO,GAAmCxC,UAAU,EAA1D;AACA,QAAMyC,QAAQ,GAAiC3C,WAAW,EAA1D;AACA,QAAM4C,eAAe,GAA2B3C,WAAW,CAAG4C,KAAD,IAAWA,KAAK,CAACC,eAAnB,CAA3D;AACA,QAAM;AAAEC,IAAAA;AAAF,MAA0ClB,KAAhD;AACA,QAAMmB,OAAO,GAAaxB,OAA1B;AACP1B,EAAAA,SAAS,CAAC,MAAM;AACfmD,IAAAA,cAAc,CAACnB,cAAc,CAACoB,KAAhB,EAAuB,eAAvB,EAAwC,EAAxC,CAAd;;AACA,QAAIzB,YAAY,EAAhB,EAAoB;AACnBiB,MAAAA,OAAO,CAACS,IAAR,CAAc,GAAEC,OAAO,CAACC,GAAR,CAAYC,UAAW,oBAAvC;AACA,KAFD,MAGK;AACJC,MAAAA,YAAY,CAACC,KAAb;AACAd,MAAAA,OAAO,CAACS,IAAR,CAAc,GAAEC,OAAO,CAACC,GAAR,CAAYC,UAAW,YAAvC;AAEA;AACD,GAVQ,EAUN,EAVM,CAAT;;AAYA,QAAML,cAAc,GAAG,CAACQ,QAAD,EAAWP,KAAX,EAAkBQ,UAAlB,KAAgC;AACtD,UAAMC,OAAO,GAAM,IAAIvC,qBAAJ,CAA0BqC,QAA1B,EAAoCP,KAApC,EAA2CQ,UAA3C,CAAnB;AACAf,IAAAA,QAAQ,CAACxB,YAAY,CAACwC,OAAD,CAAb,CAAR;AAEA,GAJD;;AAMA,QAAMC,YAAY,GAAG;AACpBC,IAAAA,MAAM,EAAG,CAACC,QAAD,EAAWjB,KAAX,MAAsB,EAC9B,GAAGiB,QAD2B;AAE9BC,MAAAA,WAAW,EAAG,OAFgB;AAG9BC,MAAAA,KAAK,EAAK,OAHoB;AAI9BC,MAAAA,OAAO,EAAK,EAJkB;AAK9BC,MAAAA,UAAU,EAAIrB,KAAK,CAACsB,UAAN,IAAoB,sBALJ;AAM9BC,MAAAA,MAAM,EAAI,SANoB;AAO9BC,MAAAA,UAAU,EAAI;AAPgB,KAAtB,CADW;AAWpBC,IAAAA,OAAO,EAAE,CAACC,IAAD,EAAO1B,KAAP,MAAkB,EAC3B,GAAG0B,IADwB;AAE3B;AACCR,MAAAA,WAAW,EAAG,SAHY;AAI1BS,MAAAA,MAAM,EAAM,kCAJc;AAK1BC,MAAAA,SAAS,EAAI5B,KAAK,CAAC6B,SAAN,GAAkB,CAAlB,GAAsB,CALT;AAM1BL,MAAAA,UAAU,EAAI,mBANY;AAO1BD,MAAAA,MAAM,EAAI;AAPgB,KAAlB;AAXW,GAArB;;AAsBA,QAAMO,WAAW,GAAIC,KAAD,IAAY;AAC/B,QAAIC,cAAc,GAAG,EAArB;AACA,QAAIC,cAAc,GAAG,EAArB;;AACA,QAAGhD,cAAc,CAACoB,KAAf,KAAyB,iBAA5B,EAA8C;AAC5C2B,MAAAA,cAAc,GAAK;AAAE,gBAAQ,QAAV;AAAoB,iBAAS;AAA7B,OAAnB;AACDC,MAAAA,cAAc,GAAI;AAAE,gBAAQ,QAAV;AAAoB,iBAAU1C,gBAAgB,GAAGA,gBAAH,GAAsBwC,KAAK,IAAIA,KAAK,CAACG,cAAN,CAAqB,KAArB,CAAT,IAAwCH,KAAK,CAACI;AAAlH,OAAlB;AACA,KAHD,MAII;AACHH,MAAAA,cAAc,GAAK;AAAE,gBAAQ,QAAV;AAAoB,iBAAUzC,gBAAgB,GAAGA,gBAAH,GAAsBwC,KAAK,IAAIA,KAAK,CAACG,cAAN,CAAqB,KAArB,CAAT,IAAwCH,KAAK,CAACI;AAAlH,OAAnB;AACAF,MAAAA,cAAc,GAAI;AAAE,gBAAQ,QAAV;AAAoB,iBAAS;AAA7B,OAAlB;AAEA;;AACDzC,IAAAA,mBAAmB,CAACD,gBAAgB,GAAGA,gBAAH,GAAqBwC,KAAK,IAAIA,KAAK,CAACG,cAAN,CAAqB,KAArB,CAAT,IAAwCH,KAAK,CAACI,GAApF,CAAnB;AACAzC,IAAAA,uBAAuB,CAACD,oBAAoB,GAAGA,oBAAH,GAA0BsC,KAAK,IAAIA,KAAK,CAACG,cAAN,CAAqB,OAArB,CAAT,IAA0CH,KAAK,CAACK,KAA/F,CAAvB;AACA,WAAQ,CAAC;AAAE,cAAQ,QAAV;AAAoB,wBAAmBJ,cAAvC;AAAsD,wBAAmBC;AAAzE,KAAD,CAAR;AACA,GAfD;;AAiBA,QAAMI,eAAe,GAAIC,UAAD,IAAiB;AACxC,QAAIN,cAAc,GAAG,EAArB;AACA,QAAIC,cAAc,GAAG,EAArB;AACA,QAAIF,KAAK,GAAK;AAAE,cAAQ,QAAV;AAAoB,eAASO,UAAU,IAAIA,UAAU,CAACJ,cAAX,CAA0B,KAA1B,CAAd,IAAkDI,UAAU,CAACH;AAA1F,KAAd;;AACA,QAAGlD,cAAc,CAACoB,KAAf,KAAyB,iBAA5B,EAA8C;AAC5C2B,MAAAA,cAAc,GAAK;AAAE,gBAAQ,QAAV;AAAoB,iBAAS;AAA7B,OAAnB;AACDC,MAAAA,cAAc,GAAI;AAAE,gBAAQ,QAAV;AAAoB,iBAAS1C;AAA7B,OAAlB;AAEA,KAJD,MAKI;AACHyC,MAAAA,cAAc,GAAK;AAAE,gBAAQ,QAAV;AAAoB,iBAASzC;AAA7B,OAAnB;AACA0C,MAAAA,cAAc,GAAI;AAAE,gBAAQ,QAAV;AAAoB,iBAAS;AAA7B,OAAlB;AAEA;;AACDzC,IAAAA,mBAAmB,CAACD,gBAAgB,GAAGA,gBAAH,GAAqBwC,KAAK,IAAIA,KAAK,CAACG,cAAN,CAAqB,KAArB,CAAT,IAAwCH,KAAK,CAACI,GAApF,CAAnB;AACAzC,IAAAA,uBAAuB,CAACD,oBAAoB,GAAGA,oBAAH,GAA0BsC,KAAK,IAAIA,KAAK,CAACG,cAAN,CAAqB,OAArB,CAAT,IAA0CH,KAAK,CAACK,KAA/F,CAAvB;AACA,WAAQ,CAAC;AAAE,cAAQ,QAAV;AAAoB,wBAAmBJ,cAAvC;AAAsD,wBAAmBC;AAAzE,KAAD,EAA0FF,KAA1F,CAAR;AACA,GAjBD;;AAmBA,QAAMQ,aAAa,GAAE,CAAClC,KAAD,EAAQ0B,KAAR,EAAeS,MAAf,KAA2B;AAE3C,YAAQnC,KAAR;AACH,WAAK,CAAL;AACC;AAEAD,QAAAA,cAAc,CAACnB,cAAc,CAACoB,KAAhB,EAAsBmC,MAAM,GAAGA,MAAH,GAAYnD,WAAxC,EAAqDyC,WAAW,CAACC,KAAD,CAAhE,CAAd;AACAU,QAAAA,kBAAkB,CAACxD,cAAD,EAAiB8C,KAAjB,EAAwBS,MAAxB,EAAgCnC,KAAhC,CAAlB;AACAT,QAAAA,OAAO,CAACS,KAAD,CAAP;AAEA;;AACD,WAAK,CAAL;AACCD,QAAAA,cAAc,CAACnB,cAAc,CAACoB,KAAhB,EAAuBhB,WAAW,KAAK,yCAAhB,GAA4D,SAA5D,GAAwE,yCAA/F,EAA0IgD,eAAe,CAACN,KAAD,CAAzJ,CAAd;AACAnC,QAAAA,OAAO,CAACS,KAAD,CAAP;AACAf,QAAAA,cAAc,CAAC,SAAD,CAAd;AACAmD,QAAAA,kBAAkB,CAACxD,cAAD,EAAiB8C,KAAjB,EAAwBS,MAAxB,EAAgCnC,KAAhC,CAAlB;AAEA;;AACD,WAAK,CAAL;AACCD,QAAAA,cAAc,CAACnB,cAAc,CAACoB,KAAhB,EAAuB,eAAvB,EAAwC,EAAxC,CAAd;AACAT,QAAAA,OAAO,CAACS,KAAD,CAAP;AACAf,QAAAA,cAAc,CAAC,SAAD,CAAd;AACAmD,QAAAA,kBAAkB,CAACxD,cAAD,EAAgB,EAAhB,EAAmB,EAAnB,EAAsBoB,KAAtB,CAAlB;AACAb,QAAAA,mBAAmB,CAAC,EAAD,CAAnB;AACAE,QAAAA,uBAAuB,CAAC,EAAD,CAAvB;AAIA;;AACD;AA3BG;AA+BA,GAjCL;;AAmCA,QAAMgD,oBAAoB,GAAIrC,KAAD,IAAW;AACvCf,IAAAA,cAAc,CAACe,KAAD,CAAd;AACAjB,IAAAA,QAAQ,CAAG,WAAUK,oBAAsB,KAAIR,cAAc,CAACoB,KAAM,gBAAgBA,KAAK,KAAK,SAAX,GAAwB,QAAxB,GAAoCA,KAAK,KAAK,QAAX,GAAuB,QAAvB,GAAkCA,KAAK,KAAK,yCAAV,GAAsD,mBAAtD,GAA4E,QAAS,EAArO,CAAR;AACAkC,IAAAA,aAAa,CAAC,CAAD,EAAI,EAAJ,EAAQlC,KAAR,CAAb;AACI,GAJL;;AAKA,QAAOsC,oBAAoB,GAAG,MAAM;AAE/BJ,IAAAA,aAAa,CAAC5C,IAAI,GAAG,CAAR,CAAb;AACA,GAHL;;AAKA,QAAMiD,uBAAuB,GAAG,MAAM;AACrC,wBACI;AAAK,MAAA,SAAS,EAAE1C,OAAO,CAAC2C,YAAxB;AAAA,8BACH,QAAC,MAAD;AAAS,QAAA,KAAK,EAAExD,WAAW,KAAI,SAAf,GAA2B,SAA3B,GAAsC,SAAtD;AAAkE,QAAA,KAAK,EAAGA,WAAW,KAAK,SAAhB,GAA4B;AAACyD,UAAAA,eAAe,EAAE;AAAlB,SAA5B,GAA2D,EAArI;AAA0I,QAAA,IAAI,EAAC,QAA/I;AAAwJ,QAAA,OAAO,EAAC,UAAhK;AAA2K,QAAA,SAAS,EAAE5C,OAAO,CAAC6C,UAA9L;AAA0M,QAAA,OAAO,EAAE,MAAML,oBAAoB,CAAC,SAAD,CAA7O;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADG,eAGH,QAAC,MAAD;AAAS,QAAA,KAAK,EAAErD,WAAW,KAAK,yCAAhB,GAA2D,SAA3D,GAAsE,SAAtF;AAAiG,QAAA,KAAK,EAAGA,WAAW,KAAK,yCAAhB,GAA4D;AAACyD,UAAAA,eAAe,EAAE;AAAlB,SAA5D,GAA2F,EAApM;AAAyM,QAAA,IAAI,EAAC,QAA9M;AAAuN,QAAA,OAAO,EAAC,UAA/N;AAA0O,QAAA,SAAS,EAAE5C,OAAO,CAAC6C,UAA7P;AAAyQ,QAAA,OAAO,EAAE,MAAML,oBAAoB,CAAC,yCAAD,CAA5S;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHG;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AAQI,GATL;;AAWA,QAAMD,kBAAkB,GAAG,CAACO,OAAD,EAAUjB,KAAV,EAAiBS,MAAjB,EAAyB7C,IAAzB,KAAiC;AAE3DT,IAAAA,iBAAiB,CAAE8D,OAAF,CAAjB;;AACA,YAAQA,OAAO,CAAC3C,KAAhB;AACC,WAAK,iBAAL;AACC,YAAGV,IAAI,KAAG,CAAV,EAAY;AACXS,UAAAA,cAAc,CAAC4C,OAAO,CAAC3C,KAAT,EAAgB,eAAhB,EAAiC,EAAjC,CAAd;AACAjB,UAAAA,QAAQ,CAAC,wDAAD,CAAR;AACA,SAHD,MAGM,IAAGO,IAAI,KAAG,CAAV,EAAY;AACjBP,UAAAA,QAAQ,CAAG,WAAUK,oBAAoB,GAAGA,oBAAH,GAA0BsC,KAAK,IAAIA,KAAK,CAACG,cAAN,CAAqB,OAArB,CAAT,IAA0CH,KAAK,CAACK,KAAO,KAAInD,cAAc,CAACmD,KAAM,iBAAiBI,MAAM,KAAK,SAAZ,GAAyB,QAAzB,GAAqCA,MAAM,KAAK,QAAZ,GAAwB,QAAxB,GAAmCA,MAAM,KAAK,yCAAX,GAAuD,mBAAvD,GAA6E,QAAS,EAAxT,CAAR;AAEA,SAHK,MAGA,IAAG7C,IAAI,KAAG,CAAV,EAAY;AACjBP,UAAAA,QAAQ,CAAG,WAAUK,oBAAqB,IAAGR,cAAc,CAACmD,KAAM,GAA1D,CAAR;AACA;;AAEA;;AACF,WAAK,oBAAL;AACEhD,QAAAA,QAAQ,CAAC,kCAAD,CAAR;AACA;;AACF,WAAK,YAAL;AACC,YAAGO,IAAI,KAAG,CAAV,EAAY;AACXS,UAAAA,cAAc,CAAC4C,OAAO,CAAC3C,KAAT,EAAgB,eAAhB,EAAiC,EAAjC,CAAd;AACAjB,UAAAA,QAAQ,CAAC,oCAAD,CAAR;AACA,SAHD,MAGM,IAAGO,IAAI,KAAG,CAAV,EAAY;AACjBP,UAAAA,QAAQ,CAAE,4BAA2BK,oBAAoB,GAAGA,oBAAH,GAA0BsC,KAAK,IAAIA,KAAK,CAACG,cAAN,CAAqB,OAArB,CAAT,IAA0CH,KAAK,CAACK,KAAO,iBAAiBI,MAAM,KAAK,SAAZ,GAAyB,QAAzB,GAAqCA,MAAM,KAAK,QAAZ,GAAwB,QAAxB,GAAmCA,MAAM,KAAK,yCAAX,GAAuD,mBAAvD,GAA6E,QAAS,EAA/S,CAAR;AACA,SAFK,MAEA,IAAG7C,IAAI,KAAG,CAAV,EAAY;AACjBP,UAAAA,QAAQ,CAAE,4BAA2BK,oBAAqB,GAAlD,CAAR;AACA;;AAEA;;AACF,WAAK,YAAL;AAEC,YAAGE,IAAI,KAAG,CAAV,EAAY;AACXS,UAAAA,cAAc,CAAC4C,OAAO,CAAC3C,KAAT,EAAgB,eAAhB,EAAiC,EAAjC,CAAd;AACAjB,UAAAA,QAAQ,CAAC,6BAAD,CAAR;AACA,SAHD,MAGM,IAAGO,IAAI,KAAG,CAAV,EAAY;AACjBP,UAAAA,QAAQ,CAAE,kCAAiCK,oBAAoB,GAAGA,oBAAH,GAA0BsC,KAAK,IAAIA,KAAK,CAACG,cAAN,CAAqB,OAArB,CAAT,IAA0CH,KAAK,CAACK,KAAO,iBAAiBI,MAAM,KAAK,SAAZ,GAAyB,QAAzB,GAAqCA,MAAM,KAAK,QAAZ,GAAwB,QAAxB,GAAmCA,MAAM,KAAK,yCAAX,GAAuD,mBAAvD,GAA6E,QAAS,EAArT,CAAR;AACA,SAFK,MAEA,IAAG7C,IAAI,KAAG,CAAV,EAAY;AACjBP,UAAAA,QAAQ,CAAE,kCAAiCK,oBAAqB,GAAxD,CAAR;AACA;;AAEA;;AACF;AACCL,QAAAA,QAAQ,CAAC,EAAD,CAAR;AAxCF;AA4CA,GA/CD;;AAgDI,sBACG,QAAC,gBAAD;AAAkB,IAAA,KAAK,EAAEP,KAAzB;AAAA,eACO,CAACD,YAAY,EAAb,iBAEX;AAAA,8BAAE,QAAC,MAAD;AAAQ,QAAA,KAAK,EAAE;AAACqE,UAAAA,YAAY,EAAC;AAAd;AAAf;AAAA;AAAA;AAAA;AAAA,cAAF,eAAyC;AAAA;AAAA;AAAA;AAAA,cAAzC,eAA+C;AAAA;AAAA;AAAA;AAAA,cAA/C,eAAqD;AAAA;AAAA;AAAA;AAAA,cAArD,eAA2D;AAAA;AAAA;AAAA;AAAA,cAA3D;AAAA,oBAHI,eAKQ;AAAK,MAAA,SAAS,EAAI/C,OAAO,CAACgD,SAA1B;AAAA,6BAIb,QAAC,KAAD;AAAO,QAAA,SAAS,EAAK,CAArB;AAAwB,QAAA,SAAS,EAAKhD,OAAO,CAACiD,KAA9C;AAAA,gCAEC;AAAK,UAAA,SAAS,EAAKjD,OAAO,CAACkD,QAA3B;AAAA,qBACEzD,IAAI,KAAG,CAAP,iBAAY;AAAA,oCAAE,QAAC,MAAD;AAAQ,cAAA,IAAI,EAAC,QAAb;AAAsB,cAAA,OAAO,EAAC,WAA9B;AAA0C,cAAA,SAAS,EAAEO,OAAO,CAAC6C,UAA7D;AAAyE,cAAA,SAAS,eAAE,QAAC,SAAD;AAAA;AAAA;AAAA;AAAA,sBAApF;AAAmG,cAAA,OAAO,EAAE,MAAMJ,oBAAoB,EAAtI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAF,eACb;AAAK,cAAA,SAAS,EAAEzC,OAAO,CAACmD;AAAxB;AAAA;AAAA;AAAA;AAAA,oBADa;AAAA,0BADd,eAIC,QAAC,UAAD;AAAa,YAAA,OAAO,EAAM,IAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJD,eAMC,QAAC,MAAD;AAAS,YAAA,SAAS,EAAMnD,OAAO,CAACoD,MAAhC;AACE,YAAA,MAAM,EAAOvC,YADf;AAC6B,YAAA,KAAK,EAAE,SADpC;AAEE,YAAA,KAAK,EAAO9B,cAFd;AAGE,YAAA,QAAQ,EAAKoB,KAAD,IAAS;AAACoC,cAAAA,kBAAkB,CAACpC,KAAD,EAAO,EAAP,EAAU,EAAV,EAAaV,IAAb,CAAlB;AAAqC,aAH7D;AAIE,YAAA,OAAO,EAAKQ,OAJd;AAKE,YAAA,UAAU,EAAIR,IAAI,KAAI,CAAR,GAAY,IAAZ,GAAmB;AALnC;AAAA;AAAA;AAAA;AAAA,kBAND,EAaEA,IAAI,KAAK,CAAT,IAAciD,uBAAuB,EAbvC;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFD,eAiBC;AAAK,UAAA,SAAS,EAAE1C,OAAO,CAACf,KAAxB;AAAA,iCACC,QAAC,UAAD;AAAY,YAAA,KAAK,EAAC,EAAlB;AAAqB,YAAA,OAAO,EAAC,IAA7B;AAAA,4BAAoCA,KAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,gBAjBD,eAoBC;AAAK,UAAA,SAAS,EAAEe,OAAO,CAACf,KAAxB;AAAA,iCACA,QAAC,mBAAD;AAAqB,YAAA,KAAK,EAAG,KAA7B;AAAmC,YAAA,MAAM,EAAI,GAA7C;AAAkD,YAAA,YAAY,EAAI,CAAlE;AAAA,mCACC,QAAC,QAAD;AAAU,cAAA,KAAK,EAAI,GAAnB;AAAwB,cAAA,MAAM,EAAM,GAApC;AAAyC,cAAA,IAAI,EAAEY,eAA/C;AAAgE,cAAA,QAAQ,EAAC,MAAzE;AAAgF,cAAA,UAAU,EAAC,MAA3F;AAAkG,cAAA,UAAU,EAAI,GAAhH;AAAA,sCACC,QAAC,KAAD;AAAQ,gBAAA,OAAO,EAAK,OAApB,CACC;AACA;AACA;AAHD;AAIC,gBAAA,UAAU,EAAI,KAJf;AAKC,gBAAA,IAAI,EAAK;AAAEwD,kBAAAA,KAAK,EAAC,CAAC;AAAT,iBALV;AAMC,gBAAA,MAAM,EAAK,GANZ;AAOC,gBAAA,QAAQ,EAAI,CAPb;AAQC,gBAAA,QAAQ,EAAG;AARZ;AAAA;AAAA;AAAA;AAAA,sBADD,eAWC,QAAC,KAAD;AAAO,gBAAA,IAAI,EAAC,QAAZ;AAAqB,gBAAA,EAAE,EAAI,CAA3B;AAA8B,gBAAA,aAAa,EAAGlD,KAAD,IAAW,IAAImD,IAAI,CAACC,YAAT,CAAsB,IAAtB,EAA4B;AAAEC,kBAAAA,QAAQ,EAAE;AAAZ,iBAA5B,EAAoDC,MAApD,CAA2DtD,KAA3D;AAAxD;AAAA;AAAA;AAAA;AAAA,sBAXD,eAaC,QAAC,aAAD;AAAe,gBAAA,UAAU,EAAI,IAA7B;AAAmC,gBAAA,QAAQ,EAAI,KAA/C;AAAsD,gBAAA,UAAU,EAAI;AAApE;AAAA;AAAA;AAAA;AAAA,sBAbD,eAcC,QAAC,OAAD;AAAS,gBAAA,SAAS,EAAGA,KAAD,IAAW,IAAImD,IAAI,CAACC,YAAT,CAAsB,IAAtB,EAA4BE,MAA5B,CAAmCtD,KAAnC,CAA/B;AAA0E,gBAAA,MAAM,EAAE;AAACuD,kBAAAA,IAAI,EAAE;AAAP;AAAlF;AAAA;AAAA;AAAA;AAAA,sBAdD,eAeC,QAAC,GAAD;AAAK,gBAAA,OAAO,EAAG,OAAf;AAAuB,gBAAA,MAAM,EAAE,SAA/B;AAA0C,gBAAA,MAAM,EAAI,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAApD;AAAkE,gBAAA,UAAU,EAAI,EAAhF;AAAoF,gBAAA,OAAO,EAAG7B,KAAD,IAAW;AAAEQ,kBAAAA,aAAa,CAAC5C,IAAI,GAAG,CAAR,EAAWoC,KAAX,CAAb;AAAgC,iBAA1I;AAAA,0BAEEhC,eAAe,CAAC8D,MAAhB,GAAyB,CAAzB,IAA8B9D,eAAe,CAAC+D,GAAhB,CAAoB,CAACC,KAAD,EAAQC,KAAR,KAAkB;AACnE,wBAAM7C,KAAK,GAAKrC,MAAM,CAACkF,KAAK,GAAG,CAAR,GAAYA,KAAZ,GAAoBA,KAAK,GAAG,EAA7B,CAAtB;AACA,sCAAO,QAAC,IAAD;AAAoB,oBAAA,IAAI,EAAK,IAAG7C,KAAM;AAAtC,qBAAa6C,KAAb;AAAA;AAAA;AAAA;AAAA,0BAAP;AACA,iBAH6B;AAFhC;AAAA;AAAA;AAAA;AAAA,sBAfD;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,gBApBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAJa;AAAA;AAAA;AAAA;AAAA,YALR;AAAA;AAAA;AAAA;AAAA;AAAA,UADH;AAkEJ,CAlQD;;GAAMjF,W;UAOkD1B,U,EACDF,W,EACCC,W;;;KATlD2B,W;AAsQN,eAAexB,UAAU,CAACK,WAAW,CAACiB,KAAD,CAAZ,CAAV,CAA+BE,WAA/B,CAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { withStyles, Typography, MuiThemeProvider, Paper, Button } from \"@material-ui/core\";\r\nimport ChartStyles from \"../../styles/Dashboard\";\r\nimport { ResponsiveContainer, BarChart, Bar, Cell, CartesianGrid, XAxis, YAxis, Tooltip,} from 'recharts';\r\nimport Select from 'react-select';\r\nimport APITransport from \"../../../redux/actions/apitransport/apitransport\";\r\nimport FetchLanguageDataSets from \"../../../redux/actions/api/Dashboard/languageDatasets\";\r\nimport { isMobile } from 'react-device-detect';\r\nimport {ArrowBack} from '@material-ui/icons';\r\nimport Header from '../../components/common/Header';\r\nimport Dataset from \"../../../configs/DatasetItems\";\r\nimport authenticate from '../../../configs/authenticate';\r\nimport Theme from \"../../theme/theme-default\";\r\nvar colors = [\"188efc\", \"7a47a4\", \"b93e94\", \"1fc6a4\", \"f46154\", \"d088fd\", \"f3447d\", \"188efc\", \"f48734\", \"189ac9\", \"0e67bd\"]\r\n\r\n\r\nconst ChartRender = (props) => {\r\n        const [selectedOption, setSelectedOption]   \t= \tuseState(Dataset[0]);\r\n        const [title, setTitle]                     \t= \tuseState(\"Number of parallel dataset per language with English\");\r\n\tconst [filterValue, setFilterValue]\t\t=\tuseState(\"domains\");\r\n\tconst [selectedLanguage,setSelectedLanguage]\t=\tuseState(\"\");\r\n\tconst [selectedLanguageName,setSelectedLanguageName]\t=\tuseState(\"\");\r\n\tconst [page, setPage]\t\t\t\t= \tuseState(0);\r\n        const history                               \t= \tuseHistory();\r\n        const dispatch                             \t= \tuseDispatch();\r\n        const DashboardReport                       \t= \tuseSelector( (state) => state.dashboardReport);\r\n        const { classes }                           \t= \tprops;\r\n        const options \t\t\t\t    \t= \tDataset;\r\n\tuseEffect(() => {\r\n\t\tfetchChartData(selectedOption.value, \"languagePairs\", [])\r\n\t\tif (authenticate()) {\r\n\t\t\thistory.push(`${process.env.PUBLIC_URL}/private-dashboard`)\r\n\t\t} \r\n\t\telse {\r\n\t\t\tlocalStorage.clear()\r\n\t\t\thistory.push(`${process.env.PUBLIC_URL}/dashboard`)\r\n\r\n\t\t}\r\n\t}, []);\r\n\r\n\tconst fetchChartData = (dataType, value, criterions) =>{\r\n\t\tconst userObj \t\t= \tnew FetchLanguageDataSets(dataType, value, criterions);\r\n\t\tdispatch(APITransport(userObj));\r\n\t\t\r\n\t} \r\n\r\n\tconst customStyles = {\r\n\t\toption\t: (provided, state) => ({\r\n\t\t\t...provided,\r\n\t\t\tborderColor\t:\t\"green\",\r\n\t\t\tcolor\t\t: \t'black',\r\n\t\t\tpadding\t\t: \t20,\r\n\t\t\tbackground\t: \tstate.isSelected && \"#c7c6c68a !important\",\r\n\t\t\tcursor\t\t:\t\"pointer\",\r\n\t\t\tfontFamily\t: \t\"Lato, sans-serif \",\r\n\r\n\t\t}),\r\n\t\tcontrol: (base, state) => ({\r\n\t\t...base,\r\n\t\t// This line disable the blue border\r\n\t\t\tborderColor\t:\t\"#392C71\",\r\n\t\t\tborder \t\t: \t\"1px solid rgba(57, 44, 113, 0.5)\",\r\n\t\t\tboxShadow\t: \tstate.isFocused ? 0 : 0,\r\n\t\t\tfontFamily\t: \t\"Lato, sans-serif \",\r\n\t\t\tcursor\t\t:\t\"pointer\"\r\n\t\t})\r\n\t}\r\n\r\n\tconst fetchParams = (event ) => {\r\n\t\tvar sourceLanguage = \"\"\r\n\t\tlet targetLanguage = \"\"\r\n\t\tif(selectedOption.value ===\t\"parallel-corpus\"){\r\n\t\t\t sourceLanguage =  \t{ \"type\": \"PARAMS\", \"value\": \"en\" };\r\n\t\t\ttargetLanguage \t=\t{ \"type\": \"PARAMS\", \"value\": (selectedLanguage ? selectedLanguage : event && event.hasOwnProperty(\"_id\") && event._id)}\r\n\t\t}\r\n\t\telse{\r\n\t\t\tsourceLanguage =  \t{ \"type\": \"PARAMS\", \"value\": (selectedLanguage ? selectedLanguage : event && event.hasOwnProperty(\"_id\") && event._id)};\r\n\t\t\ttargetLanguage \t=\t{ \"type\": \"PARAMS\", \"value\": \"\" };\r\n\t\t\t\r\n\t\t}\r\n\t\tsetSelectedLanguage(selectedLanguage ? selectedLanguage :event && event.hasOwnProperty(\"_id\") && event._id)\r\n\t\tsetSelectedLanguageName(selectedLanguageName ? selectedLanguageName : event && event.hasOwnProperty(\"label\") && event.label)\r\n\t\treturn ([{ \"type\": \"PARAMS\", \"sourceLanguage\" : sourceLanguage,\"targetLanguage\" : targetLanguage}])\r\n\t}\r\n\t\r\n\tconst fetchNextParams = (eventValue ) => {\r\n\t\tvar sourceLanguage = \"\"\r\n\t\tlet targetLanguage = \"\"\r\n\t\tlet event\t\t\t=\t{ \"type\": \"PARAMS\", \"value\": eventValue && eventValue.hasOwnProperty(\"_id\") && eventValue._id } \r\n\t\tif(selectedOption.value ===\t\"parallel-corpus\"){\r\n\t\t\t sourceLanguage =  \t{ \"type\": \"PARAMS\", \"value\": \"en\" };\r\n\t\t\ttargetLanguage \t=\t{ \"type\": \"PARAMS\", \"value\": selectedLanguage}\r\n\t\t\t\r\n\t\t}\r\n\t\telse{\r\n\t\t\tsourceLanguage =  \t{ \"type\": \"PARAMS\", \"value\": selectedLanguage};\r\n\t\t\ttargetLanguage \t=\t{ \"type\": \"PARAMS\", \"value\": \"\" };\r\n\t\t\t\r\n\t\t}\r\n\t\tsetSelectedLanguage(selectedLanguage ? selectedLanguage :event && event.hasOwnProperty(\"_id\") && event._id)\r\n\t\tsetSelectedLanguageName(selectedLanguageName ? selectedLanguageName : event && event.hasOwnProperty(\"label\") && event.label)\r\n\t\treturn ([{ \"type\": \"PARAMS\", \"sourceLanguage\" : sourceLanguage,\"targetLanguage\" : targetLanguage},event])\r\n\t}\r\n\r\n\tconst handleOnClick= (value, event, filter) =>  {\r\n\r\n\t\t    switch (value) {\r\n\t\t\tcase 1:\r\n\t\t\t\t// fetchChartData(selectedOption.value, filter ? filter : filterValue, [{ \"type\": \"PARAMS\", \"sourceLanguage\": { \"type\": \"PARAMS\", \"value\": \"en\" }, \"targetLanguage\": { \"type\": \"PARAMS\", \"value\": selectedLanguage ? selectedLanguage : (event && event.hasOwnProperty(\"_id\")) ? event._id : \"\" } }])\r\n\t\t\t\t\r\n\t\t\t\tfetchChartData(selectedOption.value,filter ? filter : filterValue, fetchParams(event ))\r\n\t\t\t\thandleSelectChange(selectedOption, event, filter, value)\r\n\t\t\t\tsetPage(value)\r\n\t\t\t\t\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tfetchChartData(selectedOption.value, filterValue === \"collectionMethod_collectionDescriptions\" ? \"domains\" : \"collectionMethod_collectionDescriptions\", fetchNextParams(event))\r\n\t\t\t\tsetPage(value)\r\n\t\t\t\tsetFilterValue('domains')\r\n\t\t\t\thandleSelectChange(selectedOption, event, filter, value)\r\n\t\t\t\t\r\n\t\t\t\tbreak;\r\n\t\t\tcase 0:\r\n\t\t\t\tfetchChartData(selectedOption.value, \"languagePairs\", [])\r\n\t\t\t\tsetPage(value)\r\n\t\t\t\tsetFilterValue('domains')\r\n\t\t\t\thandleSelectChange(selectedOption,\"\",\"\",value)\r\n\t\t\t\tsetSelectedLanguage(\"\")\r\n\t\t\t\tsetSelectedLanguageName(\"\")\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\r\n\t\t    }\r\n\t\t\r\n\t    }\r\n\r\n\tconst handleLanguageChange = (value) => {\r\n\t\tsetFilterValue(value)\r\n\t\tsetTitle( `English-${selectedLanguageName }  ${selectedOption.value}- Grouped by ${(value === \"domains\") ? \"Domain\" : (value === \"source\") ? \"Source\" : value === \"collectionMethod_collectionDescriptions\" ? \"Collection Method\" : \"Domain\"}`)\r\n\t\thandleOnClick(1, \"\", value)\r\n\t    }\r\n\tconst  handleCardNavigation = () => {\r\n\r\n\t\t    handleOnClick(page - 1)\r\n\t    }\r\n\r\n\tconst fetchLanuagePairButtons = () => {\r\n\t\treturn (\r\n\t\t    <div className={classes.filterButton}>\r\n\t\t\t<Button  color={filterValue ===\"domains\" ? \"primary\" :\"default\" } style={ filterValue === \"domains\" ? {backgroundColor: \"#E8F5F8\"} : {} } size=\"medium\" variant=\"outlined\" className={classes.backButton} onClick={() => handleLanguageChange(\"domains\")}>Domain</Button>\r\n\t\t\t{/* <Button  color={filterValue === \"source\" ? \"primary\":\"default\"} style={ filterValue === \"source\" ? {backgroundColor: \"#E8F5F8\"} : {} }size=\"medium\" variant=\"outlined\" className={classes.backButton} onClick={() => handleLanguageChange(\"source\")}>Source</Button> */}\r\n\t\t\t<Button  color={filterValue === \"collectionMethod_collectionDescriptions\" ?\"primary\" :\"default\"} style={ filterValue === \"collectionMethod_collectionDescriptions\" ? {backgroundColor: \"#E8F5F8\"} : {} } size=\"medium\" variant=\"outlined\" className={classes.backButton} onClick={() => handleLanguageChange(\"collectionMethod_collectionDescriptions\")}>Collection Method</Button>\r\n\t\t   \r\n\t\t    </div>\r\n\t\t)\r\n\t    }\r\n\r\n\tconst handleSelectChange = (dataSet, event, filter, page) =>{\r\n\r\n\t\tsetSelectedOption( dataSet)\r\n\t\tswitch (dataSet.value) {\r\n\t\t\tcase 'parallel-corpus':\r\n\t\t\t\tif(page===0){\r\n\t\t\t\t\tfetchChartData(dataSet.value, \"languagePairs\", [])\r\n\t\t\t\t\tsetTitle(\"Number of parallel sentences per language with English\")\r\n\t\t\t\t}else if(page===1){\r\n\t\t\t\t\tsetTitle( `English-${selectedLanguageName ? selectedLanguageName : event && event.hasOwnProperty(\"label\") && event.label }  ${selectedOption.label} - Grouped by ${(filter === \"domains\") ? \"Domain\" : (filter === \"source\") ? \"Source\" : filter === \"collectionMethod_collectionDescriptions\" ? \"Collection Method\" : \"Domain\"}`)\r\n\t\t\t\t\r\n\t\t\t\t}else if(page===2){\r\n\t\t\t\t\tsetTitle( `English-${selectedLanguageName} ${selectedOption.label} `)\r\n\t\t\t\t}\r\n\t\t\t\t \r\n\t\t\t\t break;\r\n\t\t\tcase 'monolingual-corpus':\r\n\t\t\t\t setTitle('Number of sentences per language')\r\n\t\t\t\t break;\r\n\t\t\tcase 'asr-corpus':\r\n\t\t\t\tif(page===0){\r\n\t\t\t\t\tfetchChartData(dataSet.value, \"languagePairs\", [])\r\n\t\t\t\t\tsetTitle(\"Number of audio hours per language\")\r\n\t\t\t\t}else if(page===1){\r\n\t\t\t\t\tsetTitle(`Number of audio hours in ${selectedLanguageName ? selectedLanguageName : event && event.hasOwnProperty(\"label\") && event.label } - Grouped by ${(filter === \"domains\") ? \"Domain\" : (filter === \"source\") ? \"Source\" : filter === \"collectionMethod_collectionDescriptions\" ? \"Collection Method\" : \"Domain\"}`)\r\n\t\t\t\t}else if(page===2){\r\n\t\t\t\t\tsetTitle(`Number of audio hours in ${selectedLanguageName} `)\r\n\t\t\t\t}\r\n\t\t\t\t \r\n\t\t\t\t break;\r\n\t\t\tcase 'ocr-corpus':\r\n\t\t\t\t\r\n\t\t\t\tif(page===0){\r\n\t\t\t\t\tfetchChartData(dataSet.value, \"languagePairs\", [])\r\n\t\t\t\t\tsetTitle(\"Number of images per script\")\r\n\t\t\t\t}else if(page===1){\r\n\t\t\t\t\tsetTitle(`Number of images per script in ${selectedLanguageName ? selectedLanguageName : event && event.hasOwnProperty(\"label\") && event.label } - Grouped by ${(filter === \"domains\") ? \"Domain\" : (filter === \"source\") ? \"Source\" : filter === \"collectionMethod_collectionDescriptions\" ? \"Collection Method\" : \"Domain\"}`)\r\n\t\t\t\t}else if(page===2){\r\n\t\t\t\t\tsetTitle(`Number of images per script in ${selectedLanguageName} `)\r\n\t\t\t\t}\r\n\t\t\t\t \r\n\t\t\t\t break;\r\n\t\t\tdefault:\r\n\t\t\t\tsetTitle(\"\")\r\n\t\t}\r\n\r\n\t\t\r\n\t}\r\n     return (\r\n        <MuiThemeProvider theme={Theme}>\r\n            \t{ !authenticate() &&\r\n\t\t\t\r\n\t\t\t\t<><Header style={{marginBottom:\"10px\"}}/><br /><br /><br /><br /> </>\r\n        \t}\r\n                <div className\t=\t{classes.container}>\r\n\t\t\t{/* <div className={classes.breadcrum}>\r\n\t\t\t\t<BreadCrum links={[\"Dataset\"]} activeLink=\"Submit Dataset\" />\r\n\t\t\t</div> */}\r\n\t\t\t<Paper elevation  = {3} className  = {classes.paper}>\r\n\t\t\t\r\n\t\t\t\t<div className  =\t{classes.titleBar}>\r\n\t\t\t\t\t{page!==0 && <><Button size=\"medium\" variant=\"contained\" className={classes.backButton} startIcon={<ArrowBack />} onClick={() => handleCardNavigation()}>Back</Button>\r\n\t\t\t\t\t<div className={classes.seperator}></div></>}\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Typography \tvariant   \t=\t\"h5\" \r\n\t\t\t\t\t\t\t> Dataset Type :\t</Typography>\r\n\t\t\t\t\t<Select \tclassName \t= \t{classes.select} \r\n\t\t\t\t\t\t\tstyles \t\t= \t{customStyles} color= \"primary\"\r\n\t\t\t\t\t\t\tvalue   \t=\t{selectedOption}\r\n\t\t\t\t\t\t\tonChange\t=\t{(value)=>{handleSelectChange(value,\"\",\"\",page)}}\r\n\t\t\t\t\t\t\toptions\t\t=\t{options}\r\n\t\t\t\t\t\t\tisDisabled\t= {page!== 0 ? true : false}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{page === 1 && fetchLanuagePairButtons()}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t<div className={classes.title}>\r\n\t\t\t\t\t<Typography value=\"\" variant=\"h6\"> {title} </Typography>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={classes.title}>\r\n\t\t\t\t<ResponsiveContainer width = \"95%\" height = {450} marginBottom = {0}>\r\n\t\t\t\t\t<BarChart width = {900} height \t= \t{450} data={DashboardReport} fontSize=\"12px\" fontFamily=\"Lato\" maxBarSize = {100} >\r\n\t\t\t\t\t\t<XAxis \tdataKey \t= \t\"label\"\r\n\t\t\t\t\t\t\t// textAnchor\t=\t{isMobile ? \"end\" : \"middle\"}\r\n\t\t\t\t\t\t\t// tick\t\t=\t{{ angle: isMobile ? -60 : 0 }} \r\n\t\t\t\t\t\t\t// height\t\t=\t{isMobile ? 100 : 60}\r\n\t\t\t\t\t\t\ttextAnchor\t=\t{\"end\"}\r\n\t\t\t\t\t\t\ttick\t\t=\t{{ angle:-60}} \r\n\t\t\t\t\t\t\theight\t\t=\t{100}\r\n\t\t\t\t\t\t\tinterval\t=\t{0}\r\n\t\t\t\t\t\t\tposition\t=\t\"insideLeft\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<YAxis type=\"number\" dx\t=\t{0} tickFormatter={(value) => new Intl.NumberFormat('en', { notation: \"compact\"}).format(value)} />\r\n\r\n\t\t\t\t\t\t<CartesianGrid horizontal = {true} vertical = {false} textAnchor = {\"middle\"} />\r\n\t\t\t\t\t\t<Tooltip formatter={(value) => new Intl.NumberFormat('en').format(value)} cursor={{fill: 'none'}}/>\r\n\t\t\t\t\t\t<Bar dataKey = \"value\" cursor =\"pointer\"  radius = {[4, 4, 0, 0]} maxBarSize = {65} onClick={(event) => { handleOnClick(page + 1, event) }}>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tDashboardReport.length > 0 && DashboardReport.map((entry, index) => {\r\n\t\t\t\t\t\t\t\t\tconst color \t= \tcolors[index < 9 ? index : index % 10]\r\n\t\t\t\t\t\t\t\t\treturn <Cell key = {index} fill = {`#${color}`} />;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Bar>\r\n\t\t\t\t\t</BarChart>\r\n\t\t\t\t</ResponsiveContainer>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</Paper>\r\n\r\n\t\t</div>\r\n        </MuiThemeProvider>\r\n    )\r\n\r\n\r\n}\r\n\r\n\r\n\r\nexport default withStyles(ChartStyles(Theme))(ChartRender);\r\n"]},"metadata":{},"sourceType":"module"}